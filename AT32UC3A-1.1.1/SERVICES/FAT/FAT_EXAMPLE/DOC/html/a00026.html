<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>AVR32 - FAT Services: navigation.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>navigation.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
FAT 12/16/32 Services. 
<p>
This file defines a useful set of functions for file navigation.<p>
<ul>
<li>Compiler: IAR EWAVR32 and GNU GCC for AVR32</li><li>Supported devices: All AVR32 devices can be used.</li><li>AppNote:</li></ul>
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Atmel Corporation: <a href="http://www.atmel.com">http://www.atmel.com</a> <br>
 Support and FAQ: <a href="http://support.atmel.no/">http://support.atmel.no/</a> </dd></dl>

<p>
Definition in file <a class="el" href="a00042.html">navigation.c</a>.
<p>
<code>#include &quot;<a class="el" href="a00030.html">conf_explorer.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00043.html">navigation.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00038.html">file.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00032.html">ctrl_access.h</a>&quot;</code><br>

<p>
<a href="a00042.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#f12a2dc5f9d5ca21f181bdbfdf664652">nav_copy_file_current</a> (U8 u8_idnav)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction copy all current navigator informations to a other navigator.  <a href="#f12a2dc5f9d5ca21f181bdbfdf664652"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#dca006b356e65cb05459f7bd7917a1ed">nav_dir_cd</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction enter in the current directory selected in file list.  <a href="#dca006b356e65cb05459f7bd7917a1ed"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#b37aa8fc84aca800a020da78724d729e">nav_dir_gotoparent</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction go to at the parent directory of current directory corresponding at file list.  <a href="#b37aa8fc84aca800a020da78724d729e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#3e6857f4edb9c88949bd56e2233da650">nav_dir_make</a> (const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction create a sub directory in the directory correcponding at file list.  <a href="#3e6857f4edb9c88949bd56e2233da650"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#46a870ca37a6fb671f93596b9bc4b171">nav_dir_name</a> (<a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_path, U8 u8_size_max)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the directory name corresponding at the file list.  <a href="#46a870ca37a6fb671f93596b9bc4b171"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#9447385c9c400b07b99c61ada1a6ea77">nav_dir_root</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction init the file list on the root directory.  <a href="#9447385c9c400b07b99c61ada1a6ea77"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#c5cf99297c9a8a75ffdd28b33a07e958">nav_drive_format</a> (U8 u8_fat_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction format the current drive (disk).  <a href="#c5cf99297c9a8a75ffdd28b33a07e958"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#f6d804b75a8fc489e0e8051e585edef5">nav_drive_get</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the drive number selected in current navigator.  <a href="#f6d804b75a8fc489e0e8051e585edef5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#cf3be5c3ce9b724a135162437642e091">nav_drive_getname</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the drive letter selected in current navigator.  <a href="#cf3be5c3ce9b724a135162437642e091"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#976f31ef59e11ac491ffaae703fa4578">nav_drive_nb</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the number of device possible.  <a href="#976f31ef59e11ac491ffaae703fa4578"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#dd247ba4e5086c74c6f106a55617872a">nav_drive_set</a> (U8 u8_number)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction selects the drive in current navigator but don't mount the disk.  <a href="#dd247ba4e5086c74c6f106a55617872a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#577b3a7ebdc2c85ee56cbba554af9b87">nav_file_attributget</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the attribut of file selected.  <a href="#577b3a7ebdc2c85ee56cbba554af9b87"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#2983932f3bf791ef93f633b5b786a04a">nav_file_attributset</a> (U8 u8_attribut)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction change the attribut of file selected.  <a href="#2983932f3bf791ef93f633b5b786a04a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#4a3e65b107c26de2f7ff4fb1d2a854e3">nav_file_checkext</a> (const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_filterext)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction check the extension of file selected.  <a href="#4a3e65b107c26de2f7ff4fb1d2a854e3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#13a6b054cd7e59bd3e916702f35f7dde">nav_file_copy</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction init the COPY navigator with the position of the current navigator.  <a href="#13a6b054cd7e59bd3e916702f35f7dde"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#27b550ee0cf2326498755b429818b145">nav_file_create</a> (const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction create a file with size 0 and file attribut 0.  <a href="#27b550ee0cf2326498755b429818b145"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#f3db073297dcfda3195606a50f2607e0">nav_file_dateget</a> (<a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_date, Bool type_date)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the date of file selected.  <a href="#f3db073297dcfda3195606a50f2607e0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#2095f8c45dad704dfee904b360ebf45b">nav_file_dateset</a> (const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_date, Bool type_date)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction change the date of file selected.  <a href="#2095f8c45dad704dfee904b360ebf45b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#8cf46891df029a9f3b62503d2c3cc065">nav_file_del</a> (Bool b_only_empty)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction delete the file or folder tree selected in navigator.  <a href="#8cf46891df029a9f3b62503d2c3cc065"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#0e9d8d4d0a438b0803c57c775e6c3b9c">nav_file_isdir</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the type of file selected.  <a href="#0e9d8d4d0a438b0803c57c775e6c3b9c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#414f55acdda5d91d87d0959155c4e615">nav_file_isreadonly</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction check the disk write protection and attribut "read only" of file selected.  <a href="#414f55acdda5d91d87d0959155c4e615"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#c3989dc4a26fbbdf0726fafae6fe4648">nav_file_lgt</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the size of the file selected.  <a href="#c3989dc4a26fbbdf0726fafae6fe4648"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#88385884567371f5d139c8f2b4b03a50">nav_file_lgtsector</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return sector size of the file selected.  <a href="#88385884567371f5d139c8f2b4b03a50"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#10603c2fe89bd66a17cfe3bb49a3fa14">nav_file_name</a> (<a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_name, U8 u8_size_max, Bool b_mode, Bool b_match_case)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return name of file selected or check the name of file selected.  <a href="#10603c2fe89bd66a17cfe3bb49a3fa14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#b55eb40d89b96055f71e71533380fdd0">nav_file_paste_start</a> (const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction paste the file selected in COPY navigator in the file list of the current navigator.  <a href="#b55eb40d89b96055f71e71533380fdd0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#c3bfe1b329ff30efaaad183cffa49f03">nav_file_paste_state</a> (Bool b_stop)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction execute the copy file.  <a href="#c3bfe1b329ff30efaaad183cffa49f03"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#db4a11790eddec97933f80ea44dbefa8">nav_file_rename</a> (const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction rename the directory or file selected.  <a href="#db4a11790eddec97933f80ea44dbefa8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#c7da45cc8084fef48a1944772c146ff7">nav_filelist_bol</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction check the beginning of file list.  <a href="#c7da45cc8084fef48a1944772c146ff7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#4f3b7e6c2f7670c02973654dbc1d550e">nav_filelist_eol</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction check the end of file list.  <a href="#4f3b7e6c2f7670c02973654dbc1d550e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#d2c6198a0ef77a90abdc9c289f7a2218">nav_filelist_exist</a> (Bool b_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction check the presence of files or directorys in file list.  <a href="#d2c6198a0ef77a90abdc9c289f7a2218"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#1d6570347e090b2473510798840a729f">nav_filelist_fileisnotopen</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction check if no file is open.  <a href="#1d6570347e090b2473510798840a729f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#017ce6b53af128e5064a06bc8fadec25">nav_filelist_findname</a> (const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_name, Bool b_match_case)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction search a file name in file list.  <a href="#017ce6b53af128e5064a06bc8fadec25"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#6f711a14b01a8796caf8d6117d61ab09">nav_filelist_first</a> (Bool b_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction go to at the first file or directory in file list.  <a href="#6f711a14b01a8796caf8d6117d61ab09"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#6b1c198eaa70bcb1babce7ad46a865ed">nav_filelist_get</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the position of selected file in file list.  <a href="#6b1c198eaa70bcb1babce7ad46a865ed"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#e725a52dd932465bd1c3ebe61af033c5">nav_filelist_goto</a> (U16 u16_newpos)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction go to a position in file list.  <a href="#e725a52dd932465bd1c3ebe61af033c5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#d7dbd335c9b54a9ebefddf5308df0409">nav_filelist_last</a> (Bool b_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction go to at the last file or directory in file list.  <a href="#d7dbd335c9b54a9ebefddf5308df0409"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U16&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a3116b803ef078138f0d32ac2a92a8cf">nav_filelist_nb</a> (Bool b_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction compute the number of files or directorys in file list.  <a href="#a3116b803ef078138f0d32ac2a92a8cf"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction reset the pointer of selection, so "no file selected" in file list.  <a href="#7ad0aa092d133a156651abe5d871b8eb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a> (U16 u16_nb, Bool b_direction)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction move the pointer of selection in file list.  <a href="#066eaff61613f07dc5fb1f3313747aef"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#dd6435ba1a2f0a8ddc072883c05a1a64">nav_filelist_validpos</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction check if a file is selected.  <a href="#dd6435ba1a2f0a8ddc072883c05a1a64"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#4a9efd8a5ff4c599be7994c009f0fb5f">nav_get</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the current navigation used.  <a href="#4a9efd8a5ff4c599be7994c009f0fb5f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#661d4a0464a9da163de1e07aa9196f0d">nav_getcwd</a> (<a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_path, U8 u8_size_path, Bool b_view_file_select)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the path of the current file list.  <a href="#661d4a0464a9da163de1e07aa9196f0d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00003.html">Fs_index</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#47882923fca657fb23001d23b6b5369d">nav_getindex</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return a small pointer on the current file system position (disk, partition, dir, file/dir selected ).  <a href="#47882923fca657fb23001d23b6b5369d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#503f8d42be2b70cb554589ac7974ed78">nav_gotoindex</a> (const <a class="el" href="a00003.html">Fs_index</a> _MEM_TYPE_SLOW_ *index)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction reinit a navigator via a file pointer.  <a href="#503f8d42be2b70cb554589ac7974ed78"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#44e5b70be51e852438e086225846cea3">nav_partition_freespace</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the free space of the current partition.  <a href="#44e5b70be51e852438e086225846cea3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#9e8934635c66157baff2e6bb066ea373">nav_partition_freespace_percent</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the space free in percent of the current partition.  <a href="#9e8934635c66157baff2e6bb066ea373"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#c2ac7612e00c937c8d83433d2143a4f0">nav_partition_label</a> (Bool b_action, <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_label)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction read or write the label of current partition selected.  <a href="#c2ac7612e00c937c8d83433d2143a4f0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#aa10a2b4e4db0e4eb602b19b4f9ff9b9">nav_partition_mount</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction mount the current partition selected.  <a href="#aa10a2b4e4db0e4eb602b19b4f9ff9b9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#a50a8525f7c598dcfebcbe63aa2dfc23">nav_partition_nb</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the number of partition present on current drive selected.  <a href="#a50a8525f7c598dcfebcbe63aa2dfc23"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#14cf001b6b84590bd3da1f3809844f03">nav_partition_serialnumber</a> (Bool b_action, U8 _MEM_TYPE_SLOW_ *a_u8_sn)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction read or write the serial number of current partition selected.  <a href="#14cf001b6b84590bd3da1f3809844f03"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#43873b28f4ebbd1f092e7f702ee14c61">nav_partition_set</a> (U8 partition_number)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction select a partition available on current drive.  <a href="#43873b28f4ebbd1f092e7f702ee14c61"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#24053c9202d6999e9e56e96b3b89703e">nav_partition_space</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction return the total space of the current partition.  <a href="#24053c9202d6999e9e56e96b3b89703e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#366957a6691432a94f9ec5d82039eebc">nav_partition_type</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction give the partition type.  <a href="#366957a6691432a94f9ec5d82039eebc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#605dfecfa334f8ced2cebfa5162a931b">nav_reset</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction reset ALL navigations to init file sytem module.  <a href="#605dfecfa334f8ced2cebfa5162a931b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a> (U8 u8_idnav)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction select the current navigation to use.  <a href="#7fac26539a62daf547b5eb159f6a43d4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#3d3f2ed17daf26a7aedc2a561cee2558">nav_setcwd</a> (<a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_path, Bool b_match_case, Bool b_create)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction init navigator position via a path.  <a href="#3d3f2ed17daf26a7aedc2a561cee2558"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#7489cf6b312750301cb7df5b915b436a">nav_string_ascii</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction select the ASCII mode for all routines with FS_STRING parameter.  <a href="#7489cf6b312750301cb7df5b915b436a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#69ee3def8525352e53819df1f975dd86">nav_string_unicode</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This fonction select the UNICODE mode for all routines with FS_STRING parameter.  <a href="#69ee3def8525352e53819df1f975dd86"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#b84a05017e426fd46d9eb3698642f133">fs_g_u8_nav_selected</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This one containt the current navigator selected.  <a href="#b84a05017e426fd46d9eb3698642f133"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">_MEM_TYPE_SLOW_ U8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> = ID_STREAM_ERR</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This variable store the current ID transfer used by the internal copy-paste routines.  <a href="#b4aa634e7d90eb225f80597a0e80125d"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="f12a2dc5f9d5ca21f181bdbfdf664652"></a><!-- doxytag: member="navigation.c::nav_copy_file_current" ref="f12a2dc5f9d5ca21f181bdbfdf664652" args="(U8 u8_idnav)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_copy_file_current           </td>
          <td>(</td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>u8_idnav</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction copy all current navigator informations to a other navigator. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u8_idnav</em>&nbsp;</td><td>Id navigator where the main navigator will be to copy</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! Use this routine to open and select quickly the same file of a other navigator
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00196">196</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l01947">fat_copy_file_current()</a>, and <a class="el" href="a00042.html#l00063">fs_g_u8_nav_selected</a>.<div class="fragment"><pre class="fragment"><a name="l00197"></a>00197 {
<a name="l00198"></a>00198 <span class="preprocessor">#if (FS_NB_NAVIGATOR &gt; 1)</span>
<a name="l00199"></a>00199 <span class="preprocessor"></span>   <span class="keywordflow">if</span>( <a class="code" href="a00026.html#b84a05017e426fd46d9eb3698642f133">fs_g_u8_nav_selected</a> == u8_idnav )
<a name="l00200"></a>00200       <span class="keywordflow">return</span> TRUE;  <span class="comment">// It is the source and destination is the same navigator</span>
<a name="l00201"></a>00201    <span class="keywordflow">if</span>( 0 == u8_idnav )
<a name="l00202"></a>00202       u8_idnav = <a class="code" href="a00026.html#b84a05017e426fd46d9eb3698642f133">fs_g_u8_nav_selected</a>; <span class="comment">// the default navigator is invert with the current navigator</span>
<a name="l00203"></a>00203    <span class="keywordflow">return</span> <a class="code" href="a00017.html#019afd16a7838947cee3c910a1dcd045">fat_copy_file_current</a>( u8_idnav );
<a name="l00204"></a>00204 <span class="preprocessor">#else</span>
<a name="l00205"></a>00205 <span class="preprocessor"></span>   u8_idnav++;
<a name="l00206"></a>00206    <span class="keywordflow">return</span> FALSE;
<a name="l00207"></a>00207 <span class="preprocessor">#endif</span>
<a name="l00208"></a>00208 <span class="preprocessor"></span>}
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="dca006b356e65cb05459f7bd7917a1ed"></a><!-- doxytag: member="navigation.c::nav_dir_cd" ref="dca006b356e65cb05459f7bd7917a1ed" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_dir_cd           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction enter in the current directory selected in file list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! After this routine the file list change and containt the files of new current directory,
//! also no file is selected
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l01106">1106</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00245">fat_check_mount_select_noopen()</a>, <a class="el" href="a00033.html#l01373">fat_entry_is_dir()</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00371">fs_g_nav_entry</a>, <a class="el" href="a00042.html#l00563">nav_filelist_reset()</a>, <a class="el" href="a00034.html#l00287">Fs_management_entry::u32_cluster</a>, and <a class="el" href="a00034.html#l00270">Fs_management::u32_cluster_sel_dir</a>.
<p>
Referenced by <a class="el" href="a00042.html#l01855">nav_file_del()</a>, and <a class="el" href="a00042.html#l01452">nav_setcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l01107"></a>01107 {
<a name="l01108"></a>01108    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#003f1c81dcb2c7a95f191c30b8a4f258">fat_check_mount_select_noopen</a>())
<a name="l01109"></a>01109       <span class="keywordflow">return</span> FALSE;
<a name="l01110"></a>01110       
<a name="l01111"></a>01111    <span class="comment">// the current entry, is it a directory ?</span>
<a name="l01112"></a>01112    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#e0caae1c6e4a737af4ad0aa5d4171e79">fat_entry_is_dir</a>())
<a name="l01113"></a>01113       <span class="keywordflow">return</span> FALSE;
<a name="l01114"></a>01114 
<a name="l01115"></a>01115    <span class="comment">// Select the current directory</span>
<a name="l01116"></a>01116    <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#ed8faad36e96ff2f422ddadd3740713f">u32_cluster_sel_dir</a> = <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#eaa27a06eca82fa0f65d848def8a4b87">u32_cluster</a>;
<a name="l01117"></a>01117 
<a name="l01118"></a>01118    <span class="comment">// Go to the first file</span>
<a name="l01119"></a>01119    <span class="keywordflow">if</span>( FALSE == <a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>())
<a name="l01120"></a>01120       <span class="keywordflow">return</span> FALSE;
<a name="l01121"></a>01121    <span class="keywordflow">return</span> TRUE;
<a name="l01122"></a>01122 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b37aa8fc84aca800a020da78724d729e"></a><!-- doxytag: member="navigation.c::nav_dir_gotoparent" ref="b37aa8fc84aca800a020da78724d729e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_dir_gotoparent           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction go to at the parent directory of current directory corresponding at file list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! After, the file list change and containt the files of parent directory,
//! also the file selected is the old directory.
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l01136">1136</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00232">fat_check_mount_noopen()</a>, <a class="el" href="a00033.html#l01341">fat_get_entry_info()</a>, <a class="el" href="a00033.html#l01184">fat_read_dir()</a>, <a class="el" href="a00039.html#l00199">FS_ERR_FS</a>, <a class="el" href="a00039.html#l00216">FS_ERR_IS_ROOT</a>, <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00371">fs_g_nav_entry</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00042.html#l00563">nav_filelist_reset()</a>, <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>, <a class="el" href="a00034.html#l00279">Fs_management_fast::u16_entry_pos_sel_file</a>, <a class="el" href="a00034.html#l00287">Fs_management_entry::u32_cluster</a>, and <a class="el" href="a00034.html#l00270">Fs_management::u32_cluster_sel_dir</a>.
<p>
Referenced by <a class="el" href="a00042.html#l01187">nav_dir_name()</a>, <a class="el" href="a00042.html#l01855">nav_file_del()</a>, <a class="el" href="a00042.html#l01301">nav_getcwd()</a>, and <a class="el" href="a00042.html#l01452">nav_setcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l01137"></a>01137 {
<a name="l01138"></a>01138    U32 u32_cluster_old_dir;
<a name="l01139"></a>01139 
<a name="l01140"></a>01140    <span class="keywordflow">if</span> (!<a class="code" href="a00017.html#e9d0f61d0e7b29a4e8e9e95347194f21">fat_check_mount_noopen</a>())
<a name="l01141"></a>01141       <span class="keywordflow">return</span> FALSE;
<a name="l01142"></a>01142    
<a name="l01143"></a>01143    <span class="keywordflow">if</span> (0 == <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#ed8faad36e96ff2f422ddadd3740713f">u32_cluster_sel_dir</a>)
<a name="l01144"></a>01144    {
<a name="l01145"></a>01145       <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#94e90e580e7ef16c72c2f2cb187af995">FS_ERR_IS_ROOT</a>;        <span class="comment">// There aren't parent</span>
<a name="l01146"></a>01146       <span class="keywordflow">return</span> FALSE;
<a name="l01147"></a>01147    }
<a name="l01148"></a>01148 
<a name="l01149"></a>01149    <span class="comment">// Select directory ".."</span>
<a name="l01150"></a>01150    <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> = 1;
<a name="l01151"></a>01151    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#1a35321a99150ba643f87cb6c79ec3e5">fat_read_dir</a>())
<a name="l01152"></a>01152       <span class="keywordflow">return</span> FALSE;
<a name="l01153"></a>01153    <a class="code" href="a00017.html#56b68ed36f194500ce88c22252e3c317">fat_get_entry_info</a>();
<a name="l01154"></a>01154    
<a name="l01155"></a>01155    <span class="comment">// Save the sub directory cluster for select the previous sub directory at the end of "cd.."</span>
<a name="l01156"></a>01156    u32_cluster_old_dir = <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#ed8faad36e96ff2f422ddadd3740713f">u32_cluster_sel_dir</a>;
<a name="l01157"></a>01157    <span class="comment">// Select the directory ".."</span>
<a name="l01158"></a>01158    <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#ed8faad36e96ff2f422ddadd3740713f">u32_cluster_sel_dir</a> = <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#eaa27a06eca82fa0f65d848def8a4b87">u32_cluster</a>;
<a name="l01159"></a>01159 
<a name="l01160"></a>01160    <span class="comment">// Find the old dir in your parent dir</span>
<a name="l01161"></a>01161    <span class="keywordflow">if</span>( FALSE == <a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>())
<a name="l01162"></a>01162       <span class="keywordflow">return</span> FALSE;
<a name="l01163"></a>01163    <span class="comment">// Scan the list</span>
<a name="l01164"></a>01164    <span class="keywordflow">while</span>( <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( 0 , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> ) )
<a name="l01165"></a>01165    {
<a name="l01166"></a>01166       <span class="keywordflow">if</span> (<a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#eaa27a06eca82fa0f65d848def8a4b87">u32_cluster</a> == u32_cluster_old_dir)
<a name="l01167"></a>01167          <span class="keywordflow">return</span> TRUE;   <span class="comment">// It is the old directory</span>
<a name="l01168"></a>01168    }
<a name="l01169"></a>01169 
<a name="l01170"></a>01170    <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#89613ba21711697c707a3199bf93b9cf">FS_ERR_FS</a>;   <span class="comment">// File system error</span>
<a name="l01171"></a>01171    <span class="keywordflow">return</span> FALSE;
<a name="l01172"></a>01172 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3e6857f4edb9c88949bd56e2233da650"></a><!-- doxytag: member="navigation.c::nav_dir_make" ref="3e6857f4edb9c88949bd56e2233da650" args="(const FS_STRING sz_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_dir_make           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction create a sub directory in the directory correcponding at file list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_name</em>&nbsp;</td><td>buffer with the directory name (ASCII or UNICODE )</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l01253">1253</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00036.html#l02145">fat_allocfreespace()</a>, <a class="el" href="a00033.html#l00232">fat_check_mount_noopen()</a>, <a class="el" href="a00036.html#l01154">fat_initialize_dir()</a>, <a class="el" href="a00033.html#l01184">fat_read_dir()</a>, <a class="el" href="a00033.html#l01407">fat_write_entry_file()</a>, <a class="el" href="a00039.html#l00134">FS_ATTR_DIRECTORY</a>, <a class="el" href="a00039.html#l00118">FS_DIR</a>, <a class="el" href="a00034.html#l00371">fs_g_nav_entry</a>, <a class="el" href="a00034.html#l00375">fs_g_seg</a>, <a class="el" href="a00042.html#l01994">nav_file_create()</a>, <a class="el" href="a00042.html#l00978">nav_filelist_last()</a>, <a class="el" href="a00034.html#l00299">Fs_segment::u32_addr</a>, <a class="el" href="a00034.html#l00287">Fs_management_entry::u32_cluster</a>, <a class="el" href="a00034.html#l00288">Fs_management_entry::u32_size</a>, <a class="el" href="a00034.html#l00300">Fs_segment::u32_size_or_pos</a>, and <a class="el" href="a00034.html#l00286">Fs_management_entry::u8_attr</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, and <a class="el" href="a00042.html#l01452">nav_setcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l01254"></a>01254 {
<a name="l01255"></a>01255    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#e9d0f61d0e7b29a4e8e9e95347194f21">fat_check_mount_noopen</a>())
<a name="l01256"></a>01256       <span class="keywordflow">return</span> FALSE;
<a name="l01257"></a>01257 
<a name="l01258"></a>01258    <span class="comment">// Create entry file</span>
<a name="l01259"></a>01259    <span class="keywordflow">if</span> ( !<a class="code" href="a00026.html#27b550ee0cf2326498755b429818b145">nav_file_create</a>( sz_name ))
<a name="l01260"></a>01260       <span class="keywordflow">return</span> FALSE;
<a name="l01261"></a>01261       
<a name="l01262"></a>01262    <span class="comment">// Alloc one cluster for the new dirctory</span>
<a name="l01263"></a>01263    MSB0(<a class="code" href="a00018.html#6d934f26f97b442c30712e57ee8b21e5">fs_g_seg</a>.<a class="code" href="a00009.html#da7b79119fecdfb1faab2512eb0ee172">u32_addr</a>)=0xFF;    <span class="comment">// It is a new cluster list</span>
<a name="l01264"></a>01264    <a class="code" href="a00018.html#6d934f26f97b442c30712e57ee8b21e5">fs_g_seg</a>.<a class="code" href="a00009.html#09c9847870bc2202980b54e38ea62fae">u32_size_or_pos</a> = 1;    <span class="comment">// Only one sector (= one cluster)</span>
<a name="l01265"></a>01265    <span class="keywordflow">if</span> ( !<a class="code" href="a00018.html#1fa62b2728e71cff2e95556db7ed1b9c">fat_allocfreespace</a>())
<a name="l01266"></a>01266       <span class="keywordflow">return</span> FALSE;
<a name="l01267"></a>01267 
<a name="l01268"></a>01268    <span class="comment">// Save information on new directory</span>
<a name="l01269"></a>01269    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#eaa27a06eca82fa0f65d848def8a4b87">u32_cluster</a> = <a class="code" href="a00018.html#6d934f26f97b442c30712e57ee8b21e5">fs_g_seg</a>.<a class="code" href="a00009.html#da7b79119fecdfb1faab2512eb0ee172">u32_addr</a>; <span class="comment">// First cluster of the directory return by alloc_free_space</span>
<a name="l01270"></a>01270    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#6ffedc3932826a337dfb3e656a09edcc">u32_size</a>    = 0;                 <span class="comment">// The size of the directory is null</span>
<a name="l01271"></a>01271    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#c4f33191c9fd60c7520012bbe6005267">u8_attr</a>     = <a class="code" href="a00023.html#99004e3e756391a7ac1c4dde4db6864c">FS_ATTR_DIRECTORY</a>; <span class="comment">// Attribut is directory file</span>
<a name="l01272"></a>01272  
<a name="l01273"></a>01273    <span class="comment">// Initialize the values in the new directory</span>
<a name="l01274"></a>01274    <span class="keywordflow">if</span> ( !<a class="code" href="a00018.html#9510bd193c1e70f2307c5b9b07078511">fat_initialize_dir</a>())
<a name="l01275"></a>01275       <span class="keywordflow">return</span> FALSE;
<a name="l01276"></a>01276 
<a name="l01277"></a>01277    <span class="comment">// Write directory information in her entry file</span>
<a name="l01278"></a>01278    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#1a35321a99150ba643f87cb6c79ec3e5">fat_read_dir</a>())
<a name="l01279"></a>01279       <span class="keywordflow">return</span> FALSE;
<a name="l01280"></a>01280    <a class="code" href="a00017.html#40035dc41d435ed3281155cdf800cf02">fat_write_entry_file</a>();
<a name="l01281"></a>01281    
<a name="l01282"></a>01282    <span class="comment">// Go to position of new directory (it is the last)</span>
<a name="l01283"></a>01283    <span class="keywordflow">return</span> <a class="code" href="a00026.html#d7dbd335c9b54a9ebefddf5308df0409">nav_filelist_last</a>( <a class="code" href="a00023.html#d043d9359eeca08e8c5ea4d9136eb15b">FS_DIR</a> );
<a name="l01284"></a>01284 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="46a870ca37a6fb671f93596b9bc4b171"></a><!-- doxytag: member="navigation.c::nav_dir_name" ref="46a870ca37a6fb671f93596b9bc4b171" args="(FS_STRING sz_path, U8 u8_size_max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_dir_name           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>u8_size_max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the directory name corresponding at the file list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_path</em>&nbsp;</td><td>buffer to store the name file (ASCII or UNICODE ) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>u8_size_max</em>&nbsp;</td><td>buffer size (unit ASCII or UNICODE )</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l01187">1187</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00232">fat_check_mount_noopen()</a>, <a class="el" href="a00039.html#l00216">FS_ERR_IS_ROOT</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00039.html#l00086">FS_NAME_GET</a>, <a class="el" href="a00034.html#l00094">Is_unicode</a>, <a class="el" href="a00042.html#l01136">nav_dir_gotoparent()</a>, <a class="el" href="a00042.html#l00282">nav_drive_getname()</a>, <a class="el" href="a00042.html#l01619">nav_file_name()</a>, <a class="el" href="a00042.html#l01016">nav_getindex()</a>, <a class="el" href="a00042.html#l01045">nav_gotoindex()</a>, and <a class="el" href="a00033.html#l00351">u8_i</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01188"></a>01188 {
<a name="l01189"></a>01189    Bool status;
<a name="l01190"></a>01190    _MEM_TYPE_SLOW_   <a class="code" href="a00003.html">Fs_index</a> index;
<a name="l01191"></a>01191    U8 <a class="code" href="a00017.html#5985f32ca0a3714cb4b55abf404be10c">u8_i</a>, u8_character;
<a name="l01192"></a>01192 
<a name="l01193"></a>01193    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#e9d0f61d0e7b29a4e8e9e95347194f21">fat_check_mount_noopen</a>())
<a name="l01194"></a>01194       <span class="keywordflow">return</span> FALSE;
<a name="l01195"></a>01195 
<a name="l01196"></a>01196    index = <a class="code" href="a00026.html#47882923fca657fb23001d23b6b5369d">nav_getindex</a>();       <span class="comment">// Save current position</span>
<a name="l01197"></a>01197    <span class="keywordflow">if</span> ( <a class="code" href="a00026.html#b37aa8fc84aca800a020da78724d729e">nav_dir_gotoparent</a>() )   <span class="comment">// Go to parent directory and select the current directory</span>
<a name="l01198"></a>01198    {
<a name="l01199"></a>01199       status = <a class="code" href="a00026.html#10603c2fe89bd66a17cfe3bb49a3fa14">nav_file_name</a>( sz_path  , u8_size_max , <a class="code" href="a00023.html#a07ca9c4f511c7e1f326c27aeecb7178">FS_NAME_GET</a> , FALSE  );
<a name="l01200"></a>01200    }
<a name="l01201"></a>01201    <span class="keywordflow">else</span>
<a name="l01202"></a>01202    {
<a name="l01203"></a>01203       <span class="keywordflow">if</span> ( <a class="code" href="a00023.html#94e90e580e7ef16c72c2f2cb187af995">FS_ERR_IS_ROOT</a> == <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> )
<a name="l01204"></a>01204       {
<a name="l01205"></a>01205          <span class="comment">// Create a device name</span>
<a name="l01206"></a>01206          <span class="keywordflow">for</span>( u8_i = 0 ; u8_i&lt;3 ; u8_i++ )
<a name="l01207"></a>01207          {
<a name="l01208"></a>01208             <span class="keywordflow">switch</span>( u8_i )
<a name="l01209"></a>01209             {
<a name="l01210"></a>01210                <span class="keywordflow">case</span> 0:
<a name="l01211"></a>01211                u8_character = <a class="code" href="a00026.html#cf3be5c3ce9b724a135162437642e091">nav_drive_getname</a>();    <span class="comment">// Letter</span>
<a name="l01212"></a>01212                <span class="keywordflow">break</span>;
<a name="l01213"></a>01213                <span class="keywordflow">case</span> 1:
<a name="l01214"></a>01214                u8_character = <span class="charliteral">':'</span>;                      <span class="comment">// ":"</span>
<a name="l01215"></a>01215                <span class="keywordflow">break</span>;
<a name="l01216"></a>01216                <span class="keywordflow">case</span> 2:
<a name="l01217"></a>01217                u8_character = 0;                        <span class="comment">// end of string</span>
<a name="l01218"></a>01218                <span class="keywordflow">break</span>;
<a name="l01219"></a>01219             }
<a name="l01220"></a>01220             <span class="keywordflow">if</span>( <a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a> )
<a name="l01221"></a>01221             {
<a name="l01222"></a>01222                ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0] = u8_character;
<a name="l01223"></a>01223             }<span class="keywordflow">else</span>{
<a name="l01224"></a>01224                sz_path [0] = u8_character;
<a name="l01225"></a>01225             }
<a name="l01226"></a>01226             sz_path  += (<a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a>? 2 : 1 );
<a name="l01227"></a>01227          }
<a name="l01228"></a>01228          status = TRUE;
<a name="l01229"></a>01229       }
<a name="l01230"></a>01230       <span class="keywordflow">else</span>
<a name="l01231"></a>01231       {
<a name="l01232"></a>01232          status = FALSE;
<a name="l01233"></a>01233       }
<a name="l01234"></a>01234    }
<a name="l01235"></a>01235    <span class="comment">// Reinitialise the current position</span>
<a name="l01236"></a>01236    <a class="code" href="a00026.html#503f8d42be2b70cb554589ac7974ed78">nav_gotoindex</a>( &amp;index );
<a name="l01237"></a>01237    <span class="keywordflow">return</span> status;
<a name="l01238"></a>01238 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9447385c9c400b07b99c61ada1a6ea77"></a><!-- doxytag: member="navigation.c::nav_dir_root" ref="9447385c9c400b07b99c61ada1a6ea77" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_dir_root           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction init the file list on the root directory. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l01089">1089</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00042.html#l00373">nav_partition_mount()</a>.
<p>
Referenced by <a class="el" href="a00042.html#l00441">nav_partition_label()</a>, and <a class="el" href="a00042.html#l01452">nav_setcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l01090"></a>01090 {
<a name="l01091"></a>01091    <span class="keywordflow">return</span> <a class="code" href="a00026.html#aa10a2b4e4db0e4eb602b19b4f9ff9b9">nav_partition_mount</a>();
<a name="l01092"></a>01092 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c5cf99297c9a8a75ffdd28b33a07e958"></a><!-- doxytag: member="navigation.c::nav_drive_format" ref="c5cf99297c9a8a75ffdd28b33a07e958" args="(U8 u8_fat_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_drive_format           </td>
          <td>(</td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>u8_fat_type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction format the current drive (disk). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u8_fat_type</em>&nbsp;</td><td>Select the type of format <br>
 FS_FORMAT_DEFAULT, The file system module choose the better FAT format for the drive space <br>
 FS_FORMAT_FAT, The FAT12 or FAT16 is used to format the drive, if possible (disk space &lt;2GB) <br>
 FS_FORMAT_FAT32, The FAT32 is used to format the drive, if possible (disk space &gt;32MB) <br>
 FS_FORMAT_NOMBR_FLAG, if you don't want a MRB in disk then add this flag (e.g. FAT format on a CD support)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! This routine can't format a multi-partiton, if the disk containt as a multi-partition
//! then the multi-partition is erase and replace by a single partition on ALL disk space.
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00311">311</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l01838">fat_check_nav_access_disk()</a>, <a class="el" href="a00033.html#l00177">fat_check_noopen()</a>, <a class="el" href="a00036.html#l00335">fat_format()</a>, and <a class="el" href="a00036.html#l00106">fat_mount()</a>.<div class="fragment"><pre class="fragment"><a name="l00312"></a>00312 {
<a name="l00313"></a>00313    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#f6f4a9e2d8e7b6dd557871b6bc2c2ee0">fat_check_noopen</a>() )
<a name="l00314"></a>00314       <span class="keywordflow">return</span> FALSE;
<a name="l00315"></a>00315    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#3ebe58d94472a1818a38afaf09c19c35">fat_check_nav_access_disk</a>() )
<a name="l00316"></a>00316       <span class="keywordflow">return</span> FALSE;
<a name="l00317"></a>00317    <span class="keywordflow">if</span> ( !<a class="code" href="a00018.html#6099b0e8fafcc01b8c1769c94c827325">fat_format</a>( u8_fat_type ) )
<a name="l00318"></a>00318       <span class="keywordflow">return</span> FALSE;
<a name="l00319"></a>00319    <span class="keywordflow">return</span> <a class="code" href="a00018.html#c0108ea608b547e8d3a405c70644c1e9">fat_mount</a>(); <span class="comment">// mount the new FS</span>
<a name="l00320"></a>00320 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f6d804b75a8fc489e0e8051e585edef5"></a><!-- doxytag: member="navigation.c::nav_drive_get" ref="f6d804b75a8fc489e0e8051e585edef5" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U8 nav_drive_get           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the drive number selected in current navigator. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>0 to <a class="el" href="a00026.html#976f31ef59e11ac491ffaae703fa4578">nav_drive_nb()</a>-1 <p>
0xFF in case of no drive selected </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00265">265</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00259">Fs_management::u8_lun</a>, and <a class="el" href="a00034.html#l00261">Fs_management::u8_partition</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00266"></a>00266 {
<a name="l00267"></a>00267 <span class="preprocessor">#if (FS_MULTI_PARTITION  ==  ENABLED)</span>
<a name="l00268"></a>00268 <span class="preprocessor"></span>   <span class="keywordflow">if</span>(0xFF == <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a>)
<a name="l00269"></a>00269       <span class="keywordflow">return</span> 0xFF;
<a name="l00270"></a>00270    <span class="keywordflow">return</span> ((<a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a>*4) + <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#af482bc02a186c363c37c93e169fbbd4">u8_partition</a>); <span class="comment">// Maximum 4 partitions by device</span>
<a name="l00271"></a>00271 <span class="preprocessor">#else</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span>   <span class="keywordflow">return</span> (<a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a>);
<a name="l00273"></a>00273 <span class="preprocessor">#endif</span>
<a name="l00274"></a>00274 <span class="preprocessor"></span>}
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="cf3be5c3ce9b724a135162437642e091"></a><!-- doxytag: member="navigation.c::nav_drive_getname" ref="cf3be5c3ce9b724a135162437642e091" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U8 nav_drive_getname           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the drive letter selected in current navigator. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>'A','B',... <p>
'X', in case of no drive selected </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00282">282</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00259">Fs_management::u8_lun</a>, and <a class="el" href="a00034.html#l00261">Fs_management::u8_partition</a>.
<p>
Referenced by <a class="el" href="a00042.html#l01187">nav_dir_name()</a>, and <a class="el" href="a00042.html#l01301">nav_getcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l00283"></a>00283 {
<a name="l00284"></a>00284    <span class="keywordflow">if</span>(0xFF == <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a>)
<a name="l00285"></a>00285       <span class="keywordflow">return</span> <span class="charliteral">'X'</span>;
<a name="l00286"></a>00286 <span class="preprocessor">#if (FS_MULTI_PARTITION  ==  ENABLED)</span>
<a name="l00287"></a>00287 <span class="preprocessor"></span>   <span class="keywordflow">return</span> (<span class="charliteral">'A'</span> + (<a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a>*4) + <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#af482bc02a186c363c37c93e169fbbd4">u8_partition</a>); <span class="comment">// Maximum 4 partitions by device</span>
<a name="l00288"></a>00288 <span class="preprocessor">#else</span>
<a name="l00289"></a>00289 <span class="preprocessor"></span>   <span class="keywordflow">return</span> (<span class="charliteral">'A'</span> + <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a>);
<a name="l00290"></a>00290 <span class="preprocessor">#endif</span>
<a name="l00291"></a>00291 <span class="preprocessor"></span>}
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="976f31ef59e11ac491ffaae703fa4578"></a><!-- doxytag: member="navigation.c::nav_drive_nb" ref="976f31ef59e11ac491ffaae703fa4578" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U8 nav_drive_nb           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the number of device possible. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of device, 0 = NO DEVICE AVIABLE</dd></dl>
<div class="fragment"><pre class="fragment">
//! This value may be dynamic because it depends of memory drivers (e.g. in case of USB HOST)
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00223">223</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00031.html#l00252">get_nb_lun()</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00224"></a>00224 {
<a name="l00225"></a>00225    <span class="keywordflow">return</span> <a class="code" href="a00015.html#877a4f5ff11d5d9b96019ee2c2cee5cd">get_nb_lun</a>(); <span class="comment">// Number of device = Number of lun</span>
<a name="l00226"></a>00226 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="dd247ba4e5086c74c6f106a55617872a"></a><!-- doxytag: member="navigation.c::nav_drive_set" ref="dd247ba4e5086c74c6f106a55617872a" args="(U8 u8_number)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_drive_set           </td>
          <td>(</td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>u8_number</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction selects the drive in current navigator but don't mount the disk. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u8_number</em>&nbsp;</td><td>device number (0 to <a class="el" href="a00026.html#976f31ef59e11ac491ffaae703fa4578">nav_drive_nb()</a>-1 )</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00236">236</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00177">fat_check_noopen()</a>, <a class="el" href="a00039.html#l00197">FS_ERR_END_OF_DRIVE</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00034.html#l00338">FS_TYPE_FAT_UNM</a>, <a class="el" href="a00031.html#l00252">get_nb_lun()</a>, <a class="el" href="a00034.html#l00259">Fs_management::u8_lun</a>, <a class="el" href="a00034.html#l00261">Fs_management::u8_partition</a>, and <a class="el" href="a00034.html#l00278">Fs_management_fast::u8_type_fat</a>.
<p>
Referenced by <a class="el" href="a00040.html#l00384">fsaccess_IsDirPresent()</a>, <a class="el" href="a00035.html#l00571">main()</a>, <a class="el" href="a00042.html#l01045">nav_gotoindex()</a>, <a class="el" href="a00042.html#l01452">nav_setcwd()</a>, and <a class="el" href="a00040.html#l00104">open()</a>.<div class="fragment"><pre class="fragment"><a name="l00237"></a>00237 {
<a name="l00238"></a>00238    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#f6f4a9e2d8e7b6dd557871b6bc2c2ee0">fat_check_noopen</a>() )
<a name="l00239"></a>00239       <span class="keywordflow">return</span> FALSE;
<a name="l00240"></a>00240 
<a name="l00241"></a>00241    <span class="keywordflow">if</span> (u8_number &gt;= <a class="code" href="a00015.html#877a4f5ff11d5d9b96019ee2c2cee5cd">get_nb_lun</a>() )
<a name="l00242"></a>00242    {
<a name="l00243"></a>00243       <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#d701fa192fb2b5692bf1de16bd43254c">FS_ERR_END_OF_DRIVE</a>;   <span class="comment">// There are not other drivers</span>
<a name="l00244"></a>00244       <span class="keywordflow">return</span> FALSE;
<a name="l00245"></a>00245    }
<a name="l00246"></a>00246 
<a name="l00247"></a>00247    <span class="keywordflow">if</span> ( <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a> == u8_number)
<a name="l00248"></a>00248       <span class="keywordflow">return</span> TRUE;   <span class="comment">// It is the same</span>
<a name="l00249"></a>00249       
<a name="l00250"></a>00250    <span class="comment">// Go to device</span>
<a name="l00251"></a>00251    <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a> = u8_number;
<a name="l00252"></a>00252    <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#74121fb3c8d3a1d018c911650e2ec920">u8_type_fat</a> = <a class="code" href="a00018.html#429fbd0498704c3d5864877548040069">FS_TYPE_FAT_UNM</a>;
<a name="l00253"></a>00253 <span class="preprocessor">#if (FS_MULTI_PARTITION  ==  ENABLED)</span>
<a name="l00254"></a>00254 <span class="preprocessor"></span>   <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#af482bc02a186c363c37c93e169fbbd4">u8_partition</a>=0;   <span class="comment">// by default select the first partition</span>
<a name="l00255"></a>00255 <span class="preprocessor">#endif</span>
<a name="l00256"></a>00256 <span class="preprocessor"></span>   <span class="keywordflow">return</span> TRUE;
<a name="l00257"></a>00257 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="577b3a7ebdc2c85ee56cbba554af9b87"></a><!-- doxytag: member="navigation.c::nav_file_attributget" ref="577b3a7ebdc2c85ee56cbba554af9b87" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U8 nav_file_attributget           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the attribut of file selected. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>attribut of file selected, see file system masks "FS_ATTR_" in <a class="el" href="a00023.html">fs_com.h</a> file. </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01786">1786</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00371">fs_g_nav_entry</a>, and <a class="el" href="a00034.html#l00286">Fs_management_entry::u8_attr</a>.<div class="fragment"><pre class="fragment"><a name="l01787"></a>01787 {
<a name="l01788"></a>01788    <span class="keywordflow">return</span> <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#c4f33191c9fd60c7520012bbe6005267">u8_attr</a>;
<a name="l01789"></a>01789 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="2983932f3bf791ef93f633b5b786a04a"></a><!-- doxytag: member="navigation.c::nav_file_attributset" ref="2983932f3bf791ef93f633b5b786a04a" args="(U8 u8_attribut)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_attributset           </td>
          <td>(</td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>u8_attribut</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction change the attribut of file selected. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u8_attribut</em>&nbsp;</td><td>value to set at file selected, see file system masks "FS_ATTR_" in <a class="el" href="a00023.html">fs_com.h</a> file.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01827">1827</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l01810">fat_cache_flush()</a>, <a class="el" href="a00033.html#l00275">fat_check_mount_select()</a>, <a class="el" href="a00033.html#l01184">fat_read_dir()</a>, <a class="el" href="a00033.html#l01407">fat_write_entry_file()</a>, <a class="el" href="a00039.html#l00135">FS_ATTR_ARCHIVE</a>, <a class="el" href="a00039.html#l00131">FS_ATTR_HIDDEN</a>, <a class="el" href="a00039.html#l00130">FS_ATTR_READ_ONLY</a>, <a class="el" href="a00039.html#l00132">FS_ATTR_SYSTEM</a>, <a class="el" href="a00034.html#l00371">fs_g_nav_entry</a>, and <a class="el" href="a00034.html#l00286">Fs_management_entry::u8_attr</a>.<div class="fragment"><pre class="fragment"><a name="l01828"></a>01828 {
<a name="l01829"></a>01829    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#47e29fedbed4084c9f8ec6f27b51015d">fat_check_mount_select</a>())
<a name="l01830"></a>01830       <span class="keywordflow">return</span> FALSE;
<a name="l01831"></a>01831 
<a name="l01832"></a>01832    <span class="comment">// read directory</span>
<a name="l01833"></a>01833    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#1a35321a99150ba643f87cb6c79ec3e5">fat_read_dir</a>())
<a name="l01834"></a>01834       <span class="keywordflow">return</span> FALSE;
<a name="l01835"></a>01835 
<a name="l01836"></a>01836    <span class="comment">// save the new attribut with a filter attribut</span>
<a name="l01837"></a>01837    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#c4f33191c9fd60c7520012bbe6005267">u8_attr</a> &amp;= (~(<a class="code" href="a00023.html#1205ff33f705779959e1bc40f6d8374f">FS_ATTR_READ_ONLY</a>|<a class="code" href="a00023.html#df87e26693107dd4b2f6f31327c6d52c">FS_ATTR_HIDDEN</a>|<a class="code" href="a00023.html#568a047cd2a5eb946b9ebb1f561cfa71">FS_ATTR_SYSTEM</a>|<a class="code" href="a00023.html#6983c8dea538d1ad6e43f7737f4776a3">FS_ATTR_ARCHIVE</a>));
<a name="l01838"></a>01838    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#c4f33191c9fd60c7520012bbe6005267">u8_attr</a> |= u8_attribut &amp; (<a class="code" href="a00023.html#1205ff33f705779959e1bc40f6d8374f">FS_ATTR_READ_ONLY</a>|<a class="code" href="a00023.html#df87e26693107dd4b2f6f31327c6d52c">FS_ATTR_HIDDEN</a>|<a class="code" href="a00023.html#568a047cd2a5eb946b9ebb1f561cfa71">FS_ATTR_SYSTEM</a>|<a class="code" href="a00023.html#6983c8dea538d1ad6e43f7737f4776a3">FS_ATTR_ARCHIVE</a>);
<a name="l01839"></a>01839    <a class="code" href="a00017.html#40035dc41d435ed3281155cdf800cf02">fat_write_entry_file</a>();
<a name="l01840"></a>01840    <span class="keywordflow">return</span> <a class="code" href="a00017.html#578ab4800128cde17c0820a5027c1c06">fat_cache_flush</a>();  <span class="comment">// In case of error during writing data, flush the data before exit fonction</span>
<a name="l01841"></a>01841 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4a3e65b107c26de2f7ff4fb1d2a854e3"></a><!-- doxytag: member="navigation.c::nav_file_checkext" ref="4a3e65b107c26de2f7ff4fb1d2a854e3" args="(const FS_STRING sz_filterext)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_checkext           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_filterext</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction check the extension of file selected. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_filterext</em>&nbsp;</td><td>extension filter in ASCII format (e.g. "txt") (e.g. "txt,d*,wk" )</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE, the file extension corresponding at extension filter <p>
FALSE, in other case </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01742">1742</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00275">fat_check_mount_select()</a>, <a class="el" href="a00033.html#l01282">fat_entry_checkext()</a>, and <a class="el" href="a00033.html#l01184">fat_read_dir()</a>.<div class="fragment"><pre class="fragment"><a name="l01743"></a>01743 {
<a name="l01744"></a>01744    <span class="keywordflow">if</span> ( <a class="code" href="a00017.html#47e29fedbed4084c9f8ec6f27b51015d">fat_check_mount_select</a>() )
<a name="l01745"></a>01745    {
<a name="l01746"></a>01746       <span class="comment">// read directory</span>
<a name="l01747"></a>01747       <span class="keywordflow">if</span> ( <a class="code" href="a00017.html#1a35321a99150ba643f87cb6c79ec3e5">fat_read_dir</a>())
<a name="l01748"></a>01748       {
<a name="l01749"></a>01749          <span class="comment">// Check the entry with filter</span>
<a name="l01750"></a>01750          <span class="keywordflow">if</span> ( <a class="code" href="a00017.html#d690d22df98e6c1fa927c38b1d1a0fae">fat_entry_checkext</a>( (<a class="code" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>) sz_filterext ) )
<a name="l01751"></a>01751             <span class="keywordflow">return</span> TRUE;
<a name="l01752"></a>01752       }
<a name="l01753"></a>01753    }
<a name="l01754"></a>01754    <span class="keywordflow">return</span> FALSE;
<a name="l01755"></a>01755 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="13a6b054cd7e59bd3e916702f35f7dde"></a><!-- doxytag: member="navigation.c::nav_file_copy" ref="13a6b054cd7e59bd3e916702f35f7dde" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_copy           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction init the COPY navigator with the position of the current navigator. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! If you use the COPY navigator (see FS_NAV_ID_COPYFILE in conf_explorer.h) after this routine then the copy information is lost.
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l02030">2030</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00039.html#l00227">FS_ERR_COPY_DIR</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00030.html#l00105">FS_NAV_ID_COPYFILE</a>, <a class="el" href="a00042.html#l01729">nav_file_isdir()</a>, <a class="el" href="a00042.html#l00175">nav_get()</a>, <a class="el" href="a00042.html#l01016">nav_getindex()</a>, <a class="el" href="a00042.html#l01045">nav_gotoindex()</a>, and <a class="el" href="a00042.html#l00152">nav_select()</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l02031"></a>02031 {
<a name="l02032"></a>02032    _MEM_TYPE_SLOW_ <a class="code" href="a00003.html">Fs_index</a> index;
<a name="l02033"></a>02033    U8 nav_id_save;
<a name="l02034"></a>02034    Bool  status;
<a name="l02035"></a>02035 
<a name="l02036"></a>02036    <span class="keywordflow">if</span>( <a class="code" href="a00026.html#0e9d8d4d0a438b0803c57c775e6c3b9c">nav_file_isdir</a>() )
<a name="l02037"></a>02037    {
<a name="l02038"></a>02038       <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#0ecd8f596c1810209c4428aa28be0850">FS_ERR_COPY_DIR</a>; <span class="comment">// Impossible to copy a directory</span>
<a name="l02039"></a>02039       <span class="keywordflow">return</span> FALSE;
<a name="l02040"></a>02040    }
<a name="l02041"></a>02041    <span class="comment">// Get reference of copy file </span>
<a name="l02042"></a>02042    index = <a class="code" href="a00026.html#47882923fca657fb23001d23b6b5369d">nav_getindex</a>();
<a name="l02043"></a>02043 
<a name="l02044"></a>02044    <span class="comment">// In "copy file" navigator select the copy file</span>
<a name="l02045"></a>02045    nav_id_save = <a class="code" href="a00026.html#4a9efd8a5ff4c599be7994c009f0fb5f">nav_get</a>();      
<a name="l02046"></a>02046    <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>( <a class="code" href="a00014.html#c0610bdf5a370b9b7e17a892662ed502">FS_NAV_ID_COPYFILE</a> );
<a name="l02047"></a>02047    status = <a class="code" href="a00026.html#503f8d42be2b70cb554589ac7974ed78">nav_gotoindex</a>( &amp;index );
<a name="l02048"></a>02048    <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>( nav_id_save );
<a name="l02049"></a>02049 
<a name="l02050"></a>02050    <span class="keywordflow">return</span> status;
<a name="l02051"></a>02051 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="27b550ee0cf2326498755b429818b145"></a><!-- doxytag: member="navigation.c::nav_file_create" ref="27b550ee0cf2326498755b429818b145" args="(const FS_STRING sz_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_create           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction create a file with size 0 and file attribut 0. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_name</em>&nbsp;</td><td>buffer with the name (ASCII or UNICODE )</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! Use this routine to create a file and after call file_open() to open this new file
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l01994">1994</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00272">Fs_management::b_mode_nav</a>, <a class="el" href="a00033.html#l01810">fat_cache_flush()</a>, <a class="el" href="a00036.html#l01470">fat_create_entry_file_name()</a>, <a class="el" href="a00039.html#l00233">FS_ERR_FILE_EXIST</a>, <a class="el" href="a00039.html#l00117">FS_FILE</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00371">fs_g_nav_entry</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00042.html#l00793">nav_filelist_findname()</a>, <a class="el" href="a00042.html#l00563">nav_filelist_reset()</a>, <a class="el" href="a00034.html#l00271">Fs_management::u16_pos_sel_file</a>, <a class="el" href="a00034.html#l00287">Fs_management_entry::u32_cluster</a>, <a class="el" href="a00034.html#l00288">Fs_management_entry::u32_size</a>, and <a class="el" href="a00034.html#l00286">Fs_management_entry::u8_attr</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, <a class="el" href="a00042.html#l01253">nav_dir_make()</a>, <a class="el" href="a00042.html#l02065">nav_file_paste_start()</a>, <a class="el" href="a00042.html#l01933">nav_file_rename()</a>, and <a class="el" href="a00042.html#l01452">nav_setcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l01995"></a>01995 {
<a name="l01996"></a>01996 
<a name="l01997"></a>01997    <span class="comment">// Check if a setting file already exists</span>
<a name="l01998"></a>01998    <span class="keywordflow">if</span> (!<a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>())          <span class="comment">// Go to neginning of file list</span>
<a name="l01999"></a>01999       <span class="keywordflow">return</span> FALSE;
<a name="l02000"></a>02000    <span class="keywordflow">if</span> (<a class="code" href="a00026.html#017ce6b53af128e5064a06bc8fadec25">nav_filelist_findname</a>(sz_name , FALSE)) <span class="comment">// Search name in file list (no case sensitive)</span>
<a name="l02001"></a>02001    {
<a name="l02002"></a>02002       <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#620feae4af460b0f591356b6408e7b45">FS_ERR_FILE_EXIST</a>;
<a name="l02003"></a>02003       <span class="keywordflow">return</span> FALSE;  <span class="comment">// File exist -&gt; it is impossible to create this name</span>
<a name="l02004"></a>02004    }
<a name="l02005"></a>02005    <span class="comment">// FYC: here, the selection is at the end of the list</span>
<a name="l02006"></a>02006    <span class="comment">// Create entry file</span>
<a name="l02007"></a>02007    <span class="keywordflow">if</span> ( !<a class="code" href="a00018.html#da2110d711208b46e93eb269da40bdf1">fat_create_entry_file_name</a>( sz_name ))
<a name="l02008"></a>02008       <span class="keywordflow">return</span> FALSE; <span class="comment">// error</span>
<a name="l02009"></a>02009    <span class="comment">// By default the informations about the new file is egal to 0 (a free entry in a cluster is filled of 0) </span>
<a name="l02010"></a>02010    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#eaa27a06eca82fa0f65d848def8a4b87">u32_cluster</a> = 0;     <span class="comment">// No first cluster</span>
<a name="l02011"></a>02011    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#6ffedc3932826a337dfb3e656a09edcc">u32_size</a>    = 0;     <span class="comment">// The size is null</span>
<a name="l02012"></a>02012    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#c4f33191c9fd60c7520012bbe6005267">u8_attr</a>     = 0;     <span class="comment">// Attribut is a file</span>
<a name="l02013"></a>02013 
<a name="l02014"></a>02014    <span class="comment">// It is the last FILE of the list</span>
<a name="l02015"></a>02015    <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#b0213ed9fc205b282b4c1d92adfa7460">u16_pos_sel_file</a>++;
<a name="l02016"></a>02016    <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a> = <a class="code" href="a00023.html#20f0a7ade1270e3923abafeb33864c55">FS_FILE</a>;
<a name="l02017"></a>02017    <span class="keywordflow">return</span> <a class="code" href="a00017.html#578ab4800128cde17c0820a5027c1c06">fat_cache_flush</a>();
<a name="l02018"></a>02018 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f3db073297dcfda3195606a50f2607e0"></a><!-- doxytag: member="navigation.c::nav_file_dateget" ref="f3db073297dcfda3195606a50f2607e0" args="(FS_STRING sz_date, Bool type_date)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_dateget           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>type_date</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the date of file selected. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type_date</em>&nbsp;</td><td>FS_DATE_LAST_WRITE, to get the date of last write access <br>
 FS_DATE_CREATION, to get the date of creation </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sz_date</em>&nbsp;</td><td>ASCCI string buffer (&gt;17B) to store the information about date <br>
 "YYYYMMDDHHMMSSMS" = year, month, day, hour, minute, seconde, miliseconde</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01768">1768</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00275">fat_check_mount_select()</a>, <a class="el" href="a00036.html#l01194">fat_get_date()</a>, and <a class="el" href="a00033.html#l01184">fat_read_dir()</a>.<div class="fragment"><pre class="fragment"><a name="l01769"></a>01769 {
<a name="l01770"></a>01770    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#47e29fedbed4084c9f8ec6f27b51015d">fat_check_mount_select</a>())
<a name="l01771"></a>01771       <span class="keywordflow">return</span> FALSE;
<a name="l01772"></a>01772 
<a name="l01773"></a>01773    <span class="comment">// read directory</span>
<a name="l01774"></a>01774    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#1a35321a99150ba643f87cb6c79ec3e5">fat_read_dir</a>())
<a name="l01775"></a>01775       <span class="keywordflow">return</span> FALSE;
<a name="l01776"></a>01776    
<a name="l01777"></a>01777    <a class="code" href="a00018.html#51041500c2e36ab39aad19b54e93d504">fat_get_date</a>( sz_date , type_date );
<a name="l01778"></a>01778    <span class="keywordflow">return</span> TRUE;
<a name="l01779"></a>01779 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="2095f8c45dad704dfee904b360ebf45b"></a><!-- doxytag: member="navigation.c::nav_file_dateset" ref="2095f8c45dad704dfee904b360ebf45b" args="(const FS_STRING sz_date, Bool type_date)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_dateset           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_date</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>type_date</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction change the date of file selected. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>type_date</em>&nbsp;</td><td>FS_DATE_LAST_WRITE, to get the date of last write access <br>
 FS_DATE_CREATION, to get the date of creation </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sz_date</em>&nbsp;</td><td>ASCCI string buffer containt the informations about date to modify <br>
 "YYYYMMDDHHMMSSMS" = year, month, day, hour, minute, seconde, miliseconde</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01804">1804</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l01810">fat_cache_flush()</a>, <a class="el" href="a00033.html#l00275">fat_check_mount_select()</a>, <a class="el" href="a00033.html#l01184">fat_read_dir()</a>, and <a class="el" href="a00036.html#l01321">fat_set_date()</a>.<div class="fragment"><pre class="fragment"><a name="l01805"></a>01805 {
<a name="l01806"></a>01806    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#47e29fedbed4084c9f8ec6f27b51015d">fat_check_mount_select</a>())
<a name="l01807"></a>01807       <span class="keywordflow">return</span> TRUE;
<a name="l01808"></a>01808 
<a name="l01809"></a>01809    <span class="comment">// read directory</span>
<a name="l01810"></a>01810    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#1a35321a99150ba643f87cb6c79ec3e5">fat_read_dir</a>())
<a name="l01811"></a>01811       <span class="keywordflow">return</span> FALSE;
<a name="l01812"></a>01812       
<a name="l01813"></a>01813    <a class="code" href="a00018.html#838253d384d03898e6fcb2b3a7687e43">fat_set_date</a>( sz_date , type_date );
<a name="l01814"></a>01814    <span class="keywordflow">return</span> <a class="code" href="a00017.html#578ab4800128cde17c0820a5027c1c06">fat_cache_flush</a>();  <span class="comment">// In case of error during writing data, flush the data before exit fonction</span>
<a name="l01815"></a>01815 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="8cf46891df029a9f3b62503d2c3cc065"></a><!-- doxytag: member="navigation.c::nav_file_del" ref="8cf46891df029a9f3b62503d2c3cc065" args="(Bool b_only_empty)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_del           </td>
          <td>(</td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_only_empty</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction delete the file or folder tree selected in navigator. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b_only_empty</em>&nbsp;</td><td>TRUE, del directory selected only if empty <br>
 FALSE, del directorys and files include in directory selected <br>
 If the file selected is not a directory, then this param is ignored.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01855">1855</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l01810">fat_cache_flush()</a>, <a class="el" href="a00033.html#l00245">fat_check_mount_select_noopen()</a>, <a class="el" href="a00033.html#l01870">fat_check_nav_access_file()</a>, <a class="el" href="a00036.html#l01928">fat_delete_file()</a>, <a class="el" href="a00039.html#l00220">FS_ERR_DIR_NOT_EMPTY</a>, <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00042.html#l01106">nav_dir_cd()</a>, <a class="el" href="a00042.html#l01136">nav_dir_gotoparent()</a>, <a class="el" href="a00042.html#l01729">nav_file_isdir()</a>, <a class="el" href="a00042.html#l00563">nav_filelist_reset()</a>, and <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, and <a class="el" href="a00042.html#l02112">nav_file_paste_state()</a>.<div class="fragment"><pre class="fragment"><a name="l01856"></a>01856 {
<a name="l01857"></a>01857    U8 u8_folder_level = 0xFF;
<a name="l01858"></a>01858 
<a name="l01859"></a>01859    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#003f1c81dcb2c7a95f191c30b8a4f258">fat_check_mount_select_noopen</a>())
<a name="l01860"></a>01860       <span class="keywordflow">return</span> FALSE;
<a name="l01861"></a>01861 
<a name="l01862"></a>01862    <span class="keywordflow">goto</span> nav_file_del_test_dir_or_file;
<a name="l01863"></a>01863      
<a name="l01864"></a>01864    <span class="comment">// loop to scan and delete ALL folders and ALL files</span>
<a name="l01865"></a>01865    <span class="keywordflow">while</span>(1)
<a name="l01866"></a>01866    {
<a name="l01867"></a>01867       <span class="keywordflow">while</span>(1)
<a name="l01868"></a>01868       {
<a name="l01869"></a>01869          <span class="keywordflow">if</span>( <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( 0 , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> ) )
<a name="l01870"></a>01870          {
<a name="l01871"></a>01871             <span class="keywordflow">if</span>( b_only_empty )
<a name="l01872"></a>01872             {
<a name="l01873"></a>01873                <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#4bd395871fad334222e972d4c62bf206">FS_ERR_DIR_NOT_EMPTY</a>;      <span class="comment">// Erase only the empty directory</span>
<a name="l01874"></a>01874                <span class="keywordflow">return</span> FALSE;
<a name="l01875"></a>01875             }
<a name="l01876"></a>01876             <span class="keywordflow">break</span>; <span class="comment">// a next file and directory is found in current directory</span>
<a name="l01877"></a>01877          }
<a name="l01878"></a>01878          
<a name="l01879"></a>01879          <span class="comment">// No dir in current dir then go to parent dir</span>
<a name="l01880"></a>01880          <span class="comment">// Remark, nav_dir_gotoparent() routine go to in parent dir and select the children dir in list</span>
<a name="l01881"></a>01881          <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#b37aa8fc84aca800a020da78724d729e">nav_dir_gotoparent</a>() )
<a name="l01882"></a>01882             <span class="keywordflow">return</span> FALSE;
<a name="l01883"></a>01883          
<a name="l01884"></a>01884          <span class="comment">// delete folder entry name and cluster list</span>
<a name="l01885"></a>01885          <span class="keywordflow">if</span> ( !<a class="code" href="a00018.html#797fc629a4a513e6a5f2951720da5d47">fat_delete_file</a>( TRUE ))
<a name="l01886"></a>01886             <span class="keywordflow">return</span> FALSE;
<a name="l01887"></a>01887 
<a name="l01888"></a>01888          <span class="keywordflow">if</span>( 0 == u8_folder_level )
<a name="l01889"></a>01889          {
<a name="l01890"></a>01890             <span class="comment">// end of del folder</span>
<a name="l01891"></a>01891             <span class="keywordflow">return</span> TRUE; <span class="comment">//********* END OF DEL TREE **************</span>
<a name="l01892"></a>01892          }
<a name="l01893"></a>01893          u8_folder_level--;
<a name="l01894"></a>01894 
<a name="l01895"></a>01895       } <span class="comment">// end of second while (1)</span>
<a name="l01896"></a>01896       
<a name="l01897"></a>01897 nav_file_del_test_dir_or_file:
<a name="l01898"></a>01898       <span class="keywordflow">if</span>( <a class="code" href="a00026.html#0e9d8d4d0a438b0803c57c775e6c3b9c">nav_file_isdir</a>())
<a name="l01899"></a>01899       {
<a name="l01900"></a>01900          <span class="comment">// here, a new directory is found and is selected</span>
<a name="l01901"></a>01901          <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#dca006b356e65cb05459f7bd7917a1ed">nav_dir_cd</a>())
<a name="l01902"></a>01902             <span class="keywordflow">return</span> FALSE;
<a name="l01903"></a>01903          u8_folder_level++;
<a name="l01904"></a>01904       }
<a name="l01905"></a>01905       <span class="keywordflow">else</span>
<a name="l01906"></a>01906       {
<a name="l01907"></a>01907          <span class="comment">// here, a new file is found and is selected</span>
<a name="l01908"></a>01908          <span class="keywordflow">if</span>( !<a class="code" href="a00017.html#07f36d38eda0af16ef7ef899129d7e7b">fat_check_nav_access_file</a>( TRUE ) )
<a name="l01909"></a>01909             <span class="keywordflow">return</span> FALSE;
<a name="l01910"></a>01910          <span class="comment">// delete file entry name and cluster list</span>
<a name="l01911"></a>01911          <span class="keywordflow">if</span> ( !<a class="code" href="a00018.html#797fc629a4a513e6a5f2951720da5d47">fat_delete_file</a>( TRUE ))
<a name="l01912"></a>01912             <span class="keywordflow">return</span> FALSE;
<a name="l01913"></a>01913          <span class="keywordflow">if</span>( 0xFF == u8_folder_level )
<a name="l01914"></a>01914             <span class="keywordflow">break</span>;   <span class="comment">// only one file to del</span>
<a name="l01915"></a>01915       } <span class="comment">// if dir OR file</span>
<a name="l01916"></a>01916    } <span class="comment">// end of first while(1)</span>
<a name="l01917"></a>01917    
<a name="l01918"></a>01918    <span class="comment">// Reset selection</span>
<a name="l01919"></a>01919    <a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>();
<a name="l01920"></a>01920    <span class="keywordflow">return</span> <a class="code" href="a00017.html#578ab4800128cde17c0820a5027c1c06">fat_cache_flush</a>();  <span class="comment">// In case of error during writing data, flush the data before exit fonction</span>
<a name="l01921"></a>01921 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="0e9d8d4d0a438b0803c57c775e6c3b9c"></a><!-- doxytag: member="navigation.c::nav_file_isdir" ref="0e9d8d4d0a438b0803c57c775e6c3b9c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_isdir           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the type of file selected. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE, it is a directory <p>
FALSE, in other case </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01729">1729</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l01373">fat_entry_is_dir()</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, <a class="el" href="a00042.html#l02030">nav_file_copy()</a>, and <a class="el" href="a00042.html#l01855">nav_file_del()</a>.<div class="fragment"><pre class="fragment"><a name="l01730"></a>01730 {
<a name="l01731"></a>01731    <span class="keywordflow">return</span> <a class="code" href="a00017.html#e0caae1c6e4a737af4ad0aa5d4171e79">fat_entry_is_dir</a>();
<a name="l01732"></a>01732 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="414f55acdda5d91d87d0959155c4e615"></a><!-- doxytag: member="navigation.c::nav_file_isreadonly" ref="414f55acdda5d91d87d0959155c4e615" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_isreadonly           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction check the disk write protection and attribut "read only" of file selected. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE, it is possible to modify the file selected <p>
TRUE, in other case </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01714">1714</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00275">fat_check_mount_select()</a>, <a class="el" href="a00039.html#l00130">FS_ATTR_READ_ONLY</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00371">fs_g_nav_entry</a>, <a class="el" href="a00031.html#l00314">mem_wr_protect()</a>, <a class="el" href="a00034.html#l00286">Fs_management_entry::u8_attr</a>, and <a class="el" href="a00034.html#l00259">Fs_management::u8_lun</a>.<div class="fragment"><pre class="fragment"><a name="l01715"></a>01715 {
<a name="l01716"></a>01716    <span class="keywordflow">if</span>( !<a class="code" href="a00017.html#47e29fedbed4084c9f8ec6f27b51015d">fat_check_mount_select</a>() )
<a name="l01717"></a>01717       <span class="keywordflow">return</span> TRUE;   <span class="comment">// No file selected</span>
<a name="l01718"></a>01718    <span class="keywordflow">if</span>( <a class="code" href="a00015.html#f4b64acad5f46d01e082d7a7301078df">mem_wr_protect</a>( <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a> ) )
<a name="l01719"></a>01719       <span class="keywordflow">return</span> TRUE;   <span class="comment">// Disk protected</span>
<a name="l01720"></a>01720    <span class="keywordflow">return</span> (0!=(<a class="code" href="a00023.html#1205ff33f705779959e1bc40f6d8374f">FS_ATTR_READ_ONLY</a> &amp; <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#c4f33191c9fd60c7520012bbe6005267">u8_attr</a>));
<a name="l01721"></a>01721 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c3989dc4a26fbbdf0726fafae6fe4648"></a><!-- doxytag: member="navigation.c::nav_file_lgt" ref="c3989dc4a26fbbdf0726fafae6fe4648" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U32 nav_file_lgt           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the size of the file selected. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Size of file selected (unit byte) </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01693">1693</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00371">fs_g_nav_entry</a>, and <a class="el" href="a00034.html#l00288">Fs_management_entry::u32_size</a>.
<p>
Referenced by <a class="el" href="a00040.html#l00185">fsaccess_file_get_size()</a>, <a class="el" href="a00035.html#l00571">main()</a>, and <a class="el" href="a00042.html#l02112">nav_file_paste_state()</a>.<div class="fragment"><pre class="fragment"><a name="l01694"></a>01694 {
<a name="l01695"></a>01695    <span class="keywordflow">return</span> <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#6ffedc3932826a337dfb3e656a09edcc">u32_size</a>;
<a name="l01696"></a>01696 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="88385884567371f5d139c8f2b4b03a50"></a><!-- doxytag: member="navigation.c::nav_file_lgtsector" ref="88385884567371f5d139c8f2b4b03a50" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U16 nav_file_lgtsector           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return sector size of the file selected. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Size of file selected (unit sector) </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01703">1703</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00371">fs_g_nav_entry</a>, <a class="el" href="a00034.html#l00208">FS_SHIFT_B_TO_SECTOR</a>, and <a class="el" href="a00034.html#l00288">Fs_management_entry::u32_size</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01704"></a>01704 {
<a name="l01705"></a>01705    <span class="keywordflow">return</span> (<a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#6ffedc3932826a337dfb3e656a09edcc">u32_size</a> &gt;&gt; <a class="code" href="a00018.html#90491f94e13d340a9d3f98e57a66e9d3">FS_SHIFT_B_TO_SECTOR</a>);
<a name="l01706"></a>01706 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="10603c2fe89bd66a17cfe3bb49a3fa14"></a><!-- doxytag: member="navigation.c::nav_file_name" ref="10603c2fe89bd66a17cfe3bb49a3fa14" args="(FS_STRING sz_name, U8 u8_size_max, Bool b_mode, Bool b_match_case)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_name           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>u8_size_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_match_case</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return name of file selected or check the name of file selected. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b_mode</em>&nbsp;</td><td>action mode: <br>
 FS_NAME_GET to get the name of file selected <br>
 FS_NAME_CHECK to check the name of file selected <br>
 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sz_name</em>&nbsp;</td><td>if FS_NAME_GET then buffer to store the name file (ASCII or UNICODE ) <br>
 if FS_NAME_CHECK then buffer containt the filter name (ASCII or UNICODE), it must be terminate by NULL or '*' value <br>
 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b_match_case</em>&nbsp;</td><td>FALSE, ignore the case (only used in "FS_NAME_CHECK" action mode)</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>u8_size_max</em>&nbsp;</td><td>buffer size (unit ASCII or UNICODE ), only used in "FS_NAME_GET" action mode</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Check if the buffer name is no null 
<p>
Definition at line <a class="el" href="a00042.html#l01619">1619</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00275">fat_check_mount_select()</a>, <a class="el" href="a00033.html#l01581">fat_entry_longname()</a>, <a class="el" href="a00033.html#l01461">fat_entry_shortname()</a>, <a class="el" href="a00033.html#l01184">fat_read_dir()</a>, <a class="el" href="a00039.html#l00202">FS_ERR_ENTRY_BAD</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00039.html#l00086">FS_NAME_GET</a>, <a class="el" href="a00039.html#l00207">FS_NO_LAST_LFN_ENTRY</a>, <a class="el" href="a00034.html#l00196">FS_SIZE_LFN_ENTRY</a>, <a class="el" href="a00034.html#l00094">Is_unicode</a>, and <a class="el" href="a00034.html#l00279">Fs_management_fast::u16_entry_pos_sel_file</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, <a class="el" href="a00042.html#l01187">nav_dir_name()</a>, <a class="el" href="a00042.html#l00793">nav_filelist_findname()</a>, and <a class="el" href="a00042.html#l01301">nav_getcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l01620"></a>01620 {
<a name="l01621"></a>01621    U16  u16_ptr_save_entry;
<a name="l01622"></a>01622    Bool  b_readshortname = FALSE;
<a name="l01623"></a>01623 
<a name="l01624"></a>01624    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#47e29fedbed4084c9f8ec6f27b51015d">fat_check_mount_select</a>())
<a name="l01625"></a>01625       <span class="keywordflow">return</span> FALSE;
<a name="l01626"></a>01626 
<a name="l01628"></a>01628    <span class="keywordflow">if</span>( (<a class="code" href="a00023.html#a07ca9c4f511c7e1f326c27aeecb7178">FS_NAME_GET</a> == b_mode)
<a name="l01629"></a>01629    &amp;&amp;  (0 == u8_size_max) )
<a name="l01630"></a>01630    {
<a name="l01631"></a>01631       <span class="keywordflow">return</span> TRUE;
<a name="l01632"></a>01632    }
<a name="l01633"></a>01633 
<a name="l01634"></a>01634    <span class="comment">// save the current file entry</span>
<a name="l01635"></a>01635    u16_ptr_save_entry = <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a>;
<a name="l01636"></a>01636    <span class="comment">// if it is the beginning of the directory</span>
<a name="l01637"></a>01637    <span class="keywordflow">if</span> ( 0 == <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> )
<a name="l01638"></a>01638    {
<a name="l01639"></a>01639       b_readshortname = TRUE;   <span class="comment">// It isn't possibled to have a long name</span>
<a name="l01640"></a>01640    }
<a name="l01641"></a>01641    <span class="keywordflow">else</span>
<a name="l01642"></a>01642    {
<a name="l01643"></a>01643       <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a>--; <span class="comment">// Go to eventualy first long name entry</span>
<a name="l01644"></a>01644    }
<a name="l01645"></a>01645 
<a name="l01646"></a>01646    <span class="comment">// loop in directory entry</span>
<a name="l01647"></a>01647    <span class="keywordflow">while</span>( 1 )
<a name="l01648"></a>01648    {
<a name="l01649"></a>01649       <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#1a35321a99150ba643f87cb6c79ec3e5">fat_read_dir</a>())
<a name="l01650"></a>01650          <span class="keywordflow">break</span>; <span class="comment">// error</span>
<a name="l01651"></a>01651 
<a name="l01652"></a>01652       <span class="keywordflow">if</span> ( b_readshortname )
<a name="l01653"></a>01653       { 
<a name="l01654"></a>01654          <span class="comment">// It is necessary to read short name</span>
<a name="l01655"></a>01655          <span class="keywordflow">return</span> <a class="code" href="a00017.html#6bc798e9f4eac3457cc61e9cd9ba70b9">fat_entry_shortname</a>( sz_name , u8_size_max , b_mode  );
<a name="l01656"></a>01656       }
<a name="l01657"></a>01657 
<a name="l01658"></a>01658       <span class="comment">// Check or read the long file name of this entry</span>
<a name="l01659"></a>01659       <span class="keywordflow">if</span> ( <a class="code" href="a00017.html#c0bdbd911ecf04b3fcebbc2e4ae33166">fat_entry_longname</a>( sz_name , u8_size_max , b_mode , b_match_case  ))
<a name="l01660"></a>01660       {
<a name="l01661"></a>01661          <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> = u16_ptr_save_entry;
<a name="l01662"></a>01662          <span class="keywordflow">return</span> TRUE;
<a name="l01663"></a>01663       }
<a name="l01664"></a>01664       
<a name="l01665"></a>01665       <span class="keywordflow">if</span> ( <a class="code" href="a00023.html#2dad540bd4ed9c78eff34ba269371d8d">FS_NO_LAST_LFN_ENTRY</a> != <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> )
<a name="l01666"></a>01666       {
<a name="l01667"></a>01667          <span class="comment">// Go to the main (short name) entry file</span>
<a name="l01668"></a>01668          <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> = u16_ptr_save_entry;
<a name="l01669"></a>01669 
<a name="l01670"></a>01670          <span class="keywordflow">if</span> ( <a class="code" href="a00023.html#934f48a8e1cb558d75ec00bbd242030d">FS_ERR_ENTRY_BAD</a> == <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> )   <span class="comment">// It isn't a long name entry</span>
<a name="l01671"></a>01671          {  <span class="comment">// There aren't long file name</span>
<a name="l01672"></a>01672             b_readshortname = TRUE;   <span class="comment">// It is mandatory to use the short name</span>
<a name="l01673"></a>01673             <span class="keywordflow">continue</span>;                 <span class="comment">// restart the loop</span>
<a name="l01674"></a>01674          }
<a name="l01675"></a>01675          <span class="comment">// here, the status is error system or file name diffferent of name checked</span>
<a name="l01676"></a>01676          <span class="keywordflow">break</span>;
<a name="l01677"></a>01677       }
<a name="l01678"></a>01678       <span class="comment">// Increment the buffer to store the next name with the continuation</span>
<a name="l01679"></a>01679       sz_name += <a class="code" href="a00018.html#bbdca2b90701f373bf6c865c88c99697">FS_SIZE_LFN_ENTRY</a> * (<a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a>? 2 : 1 );
<a name="l01680"></a>01680       u8_size_max -= <a class="code" href="a00018.html#bbdca2b90701f373bf6c865c88c99697">FS_SIZE_LFN_ENTRY</a>;
<a name="l01681"></a>01681 
<a name="l01682"></a>01682       <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a>--;   <span class="comment">// go to previous long file name entry</span>
<a name="l01683"></a>01683 
<a name="l01684"></a>01684    }  <span class="comment">// end of loop while(1)</span>
<a name="l01685"></a>01685    <span class="keywordflow">return</span> FALSE;
<a name="l01686"></a>01686 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="b55eb40d89b96055f71e71533380fdd0"></a><!-- doxytag: member="navigation.c::nav_file_paste_start" ref="b55eb40d89b96055f71e71533380fdd0" args="(const FS_STRING sz_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_paste_start           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction paste the file selected in COPY navigator in the file list of the current navigator. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_name</em>&nbsp;</td><td>buffer with the name (ASCII or UNICODE )</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! After this routine, you shall call nav_file_paste_state() to run and way the copy
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l02065">2065</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00037.html#l00883">file_close()</a>, <a class="el" href="a00037.html#l00114">file_open()</a>, <a class="el" href="a00039.html#l00146">FOPEN_MODE_R</a>, <a class="el" href="a00039.html#l00149">FOPEN_MODE_W_PLUS</a>, <a class="el" href="a00039.html#l00228">FS_ERR_COPY_RUNNING</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00030.html#l00105">FS_NAV_ID_COPYFILE</a>, <a class="el" href="a00042.html#l00058">g_id_trans_memtomem</a>, <a class="el" href="a00032.html#l00317">ID_STREAM_ERR</a>, <a class="el" href="a00042.html#l01994">nav_file_create()</a>, <a class="el" href="a00042.html#l00175">nav_get()</a>, and <a class="el" href="a00042.html#l00152">nav_select()</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l02066"></a>02066 {
<a name="l02067"></a>02067    U8 nav_id_save;
<a name="l02068"></a>02068    Bool status;
<a name="l02069"></a>02069 
<a name="l02070"></a>02070    <span class="keywordflow">if</span>( <a class="code" href="a00016.html#3d068dfd6cc43279a8f57456a9898754">ID_STREAM_ERR</a> != <a class="code" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> )
<a name="l02071"></a>02071    {
<a name="l02072"></a>02072      
<a name="l02073"></a>02073       <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#d5768fc011554b78b4c9fa11ede3b1b9">FS_ERR_COPY_RUNNING</a>;  <span class="comment">// A copy action is always running</span>
<a name="l02074"></a>02074       <span class="keywordflow">return</span> FALSE;
<a name="l02075"></a>02075    }
<a name="l02076"></a>02076 
<a name="l02077"></a>02077    <span class="comment">// Create file to paste</span>
<a name="l02078"></a>02078    <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#27b550ee0cf2326498755b429818b145">nav_file_create</a>( sz_name  ) )
<a name="l02079"></a>02079       <span class="keywordflow">return</span> FALSE;
<a name="l02080"></a>02080    <span class="comment">// Open file in write mode with size 0</span>
<a name="l02081"></a>02081    <span class="keywordflow">if</span>( !<a class="code" href="a00021.html#310a118fba8ffb01c998e5087f32d815">file_open</a>( <a class="code" href="a00023.html#ff44d5e228757d47e44edb5e58282579">FOPEN_MODE_W_PLUS</a> ))
<a name="l02082"></a>02082       <span class="keywordflow">return</span> FALSE;
<a name="l02083"></a>02083 
<a name="l02084"></a>02084    <span class="comment">// Open file to copy</span>
<a name="l02085"></a>02085    nav_id_save = <a class="code" href="a00026.html#4a9efd8a5ff4c599be7994c009f0fb5f">nav_get</a>();      
<a name="l02086"></a>02086    <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>( <a class="code" href="a00014.html#c0610bdf5a370b9b7e17a892662ed502">FS_NAV_ID_COPYFILE</a> );
<a name="l02087"></a>02087    status = <a class="code" href="a00021.html#310a118fba8ffb01c998e5087f32d815">file_open</a>(<a class="code" href="a00023.html#438cf836f3fb6b9064a6215b8d1d6b91">FOPEN_MODE_R</a>);
<a name="l02088"></a>02088    <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>( nav_id_save );
<a name="l02089"></a>02089 
<a name="l02090"></a>02090    <span class="comment">// If error then close "paste file"</span>
<a name="l02091"></a>02091    <span class="keywordflow">if</span>( !status )
<a name="l02092"></a>02092    {
<a name="l02093"></a>02093       <a class="code" href="a00021.html#7f4f3b65455595cb5be0f7cd7d12e02d">file_close</a>();
<a name="l02094"></a>02094       <span class="keywordflow">return</span> FALSE;
<a name="l02095"></a>02095    }<span class="keywordflow">else</span>{
<a name="l02096"></a>02096       <span class="comment">// Signal start copy</span>
<a name="l02097"></a>02097       <a class="code" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> = <a class="code" href="a00016.html#3d068dfd6cc43279a8f57456a9898754">ID_STREAM_ERR</a>-1;
<a name="l02098"></a>02098       <span class="keywordflow">return</span> TRUE;
<a name="l02099"></a>02099    }
<a name="l02100"></a>02100 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c3bfe1b329ff30efaaad183cffa49f03"></a><!-- doxytag: member="navigation.c::nav_file_paste_state" ref="c3bfe1b329ff30efaaad183cffa49f03" args="(Bool b_stop)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U8 nav_file_paste_state           </td>
          <td>(</td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_stop</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction execute the copy file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b_stop</em>&nbsp;</td><td>set TRUE to stop copy action</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>copy status <br>
 COPY_BUSY, copy running COPY_FAIL, copy fail COPY_FINISH, copy finish </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l02112">2112</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00039.html#l00104">COPY_BUSY</a>, <a class="el" href="a00039.html#l00105">COPY_FAIL</a>, <a class="el" href="a00039.html#l00106">COPY_FINISH</a>, <a class="el" href="a00032.html#l00067">CTRL_BUSY</a>, <a class="el" href="a00016.html#910a0fdf1e7a70b08981dce14e86e29187a15d70a7619b7e4aa918f7a0d953ea">CTRL_FAIL</a>, <a class="el" href="a00016.html#910a0fdf1e7a70b08981dce14e86e2918cc674c935507be438bb2d9b6e70d6b8">CTRL_GOOD</a>, <a class="el" href="a00037.html#l00883">file_close()</a>, <a class="el" href="a00037.html#l00872">file_eof()</a>, <a class="el" href="a00037.html#l00194">file_read()</a>, <a class="el" href="a00037.html#l00799">file_seek()</a>, <a class="el" href="a00037.html#l00577">file_set_eof()</a>, <a class="el" href="a00037.html#l00532">file_write()</a>, <a class="el" href="a00030.html#l00105">FS_NAV_ID_COPYFILE</a>, <a class="el" href="a00038.html#l00057">FS_SEEK_CUR_RE</a>, <a class="el" href="a00038.html#l00055">FS_SEEK_SET</a>, <a class="el" href="a00034.html#l00206">FS_SIZE_OF_SECTOR</a>, <a class="el" href="a00042.html#l00058">g_id_trans_memtomem</a>, <a class="el" href="a00032.html#l00317">ID_STREAM_ERR</a>, <a class="el" href="a00042.html#l01855">nav_file_del()</a>, <a class="el" href="a00042.html#l01693">nav_file_lgt()</a>, <a class="el" href="a00042.html#l00175">nav_get()</a>, <a class="el" href="a00042.html#l00152">nav_select()</a>, <a class="el" href="a00031.html#l00477">stream_mem_to_mem()</a>, <a class="el" href="a00031.html#l00494">stream_state()</a>, and <a class="el" href="a00031.html#l00500">stream_stop()</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l02113"></a>02113 {
<a name="l02114"></a>02114    _MEM_TYPE_SLOW_ <a class="code" href="a00002.html">Fs_file_segment</a> segment_src;
<a name="l02115"></a>02115    _MEM_TYPE_SLOW_ <a class="code" href="a00002.html">Fs_file_segment</a> segment_dest;
<a name="l02116"></a>02116 
<a name="l02117"></a>02117    <a class="code" href="a00016.html#910a0fdf1e7a70b08981dce14e86e291">Ctrl_status</a> status_stream;
<a name="l02118"></a>02118    U8 status_copy;
<a name="l02119"></a>02119    U8 nav_id_save;
<a name="l02120"></a>02120 
<a name="l02121"></a>02121    nav_id_save = <a class="code" href="a00026.html#4a9efd8a5ff4c599be7994c009f0fb5f">nav_get</a>();   <span class="comment">// Get current navigator</span>
<a name="l02122"></a>02122 
<a name="l02123"></a>02123    <span class="comment">// Check, if copy is running</span>
<a name="l02124"></a>02124    <span class="keywordflow">if</span>( <a class="code" href="a00016.html#3d068dfd6cc43279a8f57456a9898754">ID_STREAM_ERR</a> == <a class="code" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> )
<a name="l02125"></a>02125       <span class="keywordflow">return</span> <a class="code" href="a00023.html#fd3d634f2538bd115434b5c9ac6147b1">COPY_FAIL</a>;
<a name="l02126"></a>02126 
<a name="l02127"></a>02127    <span class="keywordflow">if</span>( b_stop )
<a name="l02128"></a>02128    {
<a name="l02129"></a>02129       status_copy = <a class="code" href="a00023.html#fd3d634f2538bd115434b5c9ac6147b1">COPY_FAIL</a>;
<a name="l02130"></a>02130    }
<a name="l02131"></a>02131    <span class="keywordflow">else</span>
<a name="l02132"></a>02132    {
<a name="l02133"></a>02133       <span class="keywordflow">if</span>( (<a class="code" href="a00016.html#3d068dfd6cc43279a8f57456a9898754">ID_STREAM_ERR</a>-1) != <a class="code" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> )
<a name="l02134"></a>02134       {
<a name="l02135"></a>02135          <span class="comment">// it isn't the beginning of copy action, then check current stream</span>
<a name="l02136"></a>02136          status_stream = <a class="code" href="a00015.html#bc5895af9a6e16c6e0f90cdce48bdb3a">stream_state</a>( <a class="code" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> );
<a name="l02137"></a>02137          <span class="keywordflow">switch</span>( status_stream )  
<a name="l02138"></a>02138          {
<a name="l02139"></a>02139          <span class="keywordflow">case</span> <a class="code" href="a00016.html#910a0fdf1e7a70b08981dce14e86e291a647d0a662ac6400be3b843dfae52c65">CTRL_BUSY</a>:
<a name="l02140"></a>02140             status_copy = <a class="code" href="a00023.html#a2e2285edc2ee3ef3a4ba10af70524ef">COPY_BUSY</a>;
<a name="l02141"></a>02141             <span class="keywordflow">break</span>;
<a name="l02142"></a>02142          <span class="keywordflow">case</span> <a class="code" href="a00016.html#910a0fdf1e7a70b08981dce14e86e2918cc674c935507be438bb2d9b6e70d6b8">CTRL_GOOD</a>:
<a name="l02143"></a>02143             status_copy = <a class="code" href="a00023.html#49311dbf1b3e2f5d778938655895b17a">COPY_FINISH</a>;
<a name="l02144"></a>02144             <span class="keywordflow">break</span>;
<a name="l02145"></a>02145          <span class="keywordflow">case</span> <a class="code" href="a00016.html#910a0fdf1e7a70b08981dce14e86e29187a15d70a7619b7e4aa918f7a0d953ea">CTRL_FAIL</a>:
<a name="l02146"></a>02146          <span class="keywordflow">default</span>:
<a name="l02147"></a>02147             status_copy = <a class="code" href="a00023.html#fd3d634f2538bd115434b5c9ac6147b1">COPY_FAIL</a>;
<a name="l02148"></a>02148             <span class="keywordflow">break</span>;
<a name="l02149"></a>02149          }
<a name="l02150"></a>02150       }<span class="keywordflow">else</span>{
<a name="l02151"></a>02151          status_copy = <a class="code" href="a00023.html#49311dbf1b3e2f5d778938655895b17a">COPY_FINISH</a>;
<a name="l02152"></a>02152       }
<a name="l02153"></a>02153    
<a name="l02154"></a>02154       <span class="comment">// Compute a new stream</span>
<a name="l02155"></a>02155       <span class="keywordflow">if</span>( <a class="code" href="a00023.html#49311dbf1b3e2f5d778938655895b17a">COPY_FINISH</a> == status_copy )
<a name="l02156"></a>02156       {
<a name="l02157"></a>02157          <a class="code" href="a00015.html#21c3bfd3da12736296fe092d97cc7acc">stream_stop</a>( <a class="code" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> );
<a name="l02158"></a>02158 
<a name="l02159"></a>02159          <span class="comment">// check eof source file</span>
<a name="l02160"></a>02160          <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>( <a class="code" href="a00014.html#c0610bdf5a370b9b7e17a892662ed502">FS_NAV_ID_COPYFILE</a> );
<a name="l02161"></a>02161          <span class="keywordflow">if</span>( 0 == <a class="code" href="a00021.html#bed52ba7230c6eecf100a3709b9ed74e">file_eof</a>() )
<a name="l02162"></a>02162          {
<a name="l02163"></a>02163             status_copy = <a class="code" href="a00023.html#a2e2285edc2ee3ef3a4ba10af70524ef">COPY_BUSY</a>;
<a name="l02164"></a>02164             segment_src.u32_size_or_pos = 0xFFFF; <span class="comment">// Get the maximum segment supported by navigation (U16)</span>
<a name="l02165"></a>02165             <span class="keywordflow">if</span>( !<a class="code" href="a00021.html#d0fc50dbdd1849e9fe0e81b215ce9335">file_read</a>( &amp;segment_src ))
<a name="l02166"></a>02166             {
<a name="l02167"></a>02167                status_copy = <a class="code" href="a00023.html#fd3d634f2538bd115434b5c9ac6147b1">COPY_FAIL</a>;
<a name="l02168"></a>02168             }
<a name="l02169"></a>02169          }
<a name="l02170"></a>02170          <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>( nav_id_save );
<a name="l02171"></a>02171    
<a name="l02172"></a>02172          <span class="comment">// check destination file</span>
<a name="l02173"></a>02173          <span class="keywordflow">if</span>( <a class="code" href="a00023.html#a2e2285edc2ee3ef3a4ba10af70524ef">COPY_BUSY</a> == status_copy )
<a name="l02174"></a>02174          {
<a name="l02175"></a>02175             segment_dest.u32_size_or_pos = segment_src.u32_size_or_pos; <span class="comment">// Ask the segment no more larger than source segment</span>
<a name="l02176"></a>02176             <span class="keywordflow">if</span>( !<a class="code" href="a00021.html#1b5c29ddedddd73a1279b9920ea1642f">file_write</a>( &amp;segment_dest ))
<a name="l02177"></a>02177             {
<a name="l02178"></a>02178                status_copy = <a class="code" href="a00023.html#fd3d634f2538bd115434b5c9ac6147b1">COPY_FAIL</a>;
<a name="l02179"></a>02179             }
<a name="l02180"></a>02180          }
<a name="l02181"></a>02181 
<a name="l02182"></a>02182          <span class="comment">// Start new stream</span>
<a name="l02183"></a>02183          <span class="keywordflow">if</span>( <a class="code" href="a00023.html#a2e2285edc2ee3ef3a4ba10af70524ef">COPY_BUSY</a> == status_copy )
<a name="l02184"></a>02184          {
<a name="l02185"></a>02185             <span class="comment">// Compute a minimal segment</span>
<a name="l02186"></a>02186             <span class="keywordflow">if</span>( segment_src.u32_size_or_pos &gt; segment_dest.u32_size_or_pos )
<a name="l02187"></a>02187             {
<a name="l02188"></a>02188                <span class="comment">// reposition source file</span>
<a name="l02189"></a>02189                <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>( <a class="code" href="a00014.html#c0610bdf5a370b9b7e17a892662ed502">FS_NAV_ID_COPYFILE</a> );
<a name="l02190"></a>02190                <span class="keywordflow">if</span>( !<a class="code" href="a00021.html#2599f935c7e1b69f2650e0943091ddca">file_seek</a>( (U32)(segment_src.u32_size_or_pos - segment_dest.u32_size_or_pos)*<a class="code" href="a00018.html#3d8dbd6dd4c5150d859e8926f69e88b9">FS_SIZE_OF_SECTOR</a> , <a class="code" href="a00022.html#f546c33414158e18f0a25b795f402ccf">FS_SEEK_CUR_RE</a> ))
<a name="l02191"></a>02191                {
<a name="l02192"></a>02192                   status_copy = <a class="code" href="a00023.html#fd3d634f2538bd115434b5c9ac6147b1">COPY_FAIL</a>;
<a name="l02193"></a>02193                }
<a name="l02194"></a>02194                <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>( nav_id_save );
<a name="l02195"></a>02195                segment_src.u32_size_or_pos = segment_dest.u32_size_or_pos; <span class="comment">// Update source to start a correct transfer</span>
<a name="l02196"></a>02196             }
<a name="l02197"></a>02197          }
<a name="l02198"></a>02198          <span class="keywordflow">if</span>( <a class="code" href="a00023.html#a2e2285edc2ee3ef3a4ba10af70524ef">COPY_BUSY</a> == status_copy )
<a name="l02199"></a>02199          {
<a name="l02200"></a>02200             <a class="code" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> = <a class="code" href="a00015.html#0cd4af35ac08482fa4eca9afdd511345">stream_mem_to_mem</a>( segment_src.u8_lun , segment_src.u32_addr , segment_dest.u8_lun , segment_dest.u32_addr , segment_src.u32_size_or_pos );               
<a name="l02201"></a>02201             <span class="keywordflow">if</span>( <a class="code" href="a00016.html#3d068dfd6cc43279a8f57456a9898754">ID_STREAM_ERR</a> == <a class="code" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> )
<a name="l02202"></a>02202                   status_copy = <a class="code" href="a00023.html#fd3d634f2538bd115434b5c9ac6147b1">COPY_FAIL</a>;
<a name="l02203"></a>02203          }
<a name="l02204"></a>02204       }
<a name="l02205"></a>02205    }
<a name="l02206"></a>02206 
<a name="l02207"></a>02207    <span class="comment">// Check end of copy</span>
<a name="l02208"></a>02208    <span class="keywordflow">if</span>( <a class="code" href="a00023.html#a2e2285edc2ee3ef3a4ba10af70524ef">COPY_BUSY</a> != status_copy )
<a name="l02209"></a>02209    {
<a name="l02210"></a>02210       U32 u32_size_exact;
<a name="l02211"></a>02211 
<a name="l02212"></a>02212       <span class="comment">// Stop copy</span>
<a name="l02213"></a>02213       <a class="code" href="a00015.html#21c3bfd3da12736296fe092d97cc7acc">stream_stop</a>( <a class="code" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> );
<a name="l02214"></a>02214       <a class="code" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> = <a class="code" href="a00016.html#3d068dfd6cc43279a8f57456a9898754">ID_STREAM_ERR</a>;
<a name="l02215"></a>02215 
<a name="l02216"></a>02216       <span class="comment">// Get exact size and close the source file</span>
<a name="l02217"></a>02217       <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>( <a class="code" href="a00014.html#c0610bdf5a370b9b7e17a892662ed502">FS_NAV_ID_COPYFILE</a> );
<a name="l02218"></a>02218       u32_size_exact = <a class="code" href="a00026.html#c3989dc4a26fbbdf0726fafae6fe4648">nav_file_lgt</a>();
<a name="l02219"></a>02219       <a class="code" href="a00021.html#7f4f3b65455595cb5be0f7cd7d12e02d">file_close</a>();
<a name="l02220"></a>02220       <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>( nav_id_save );
<a name="l02221"></a>02221 
<a name="l02222"></a>02222       <span class="comment">// If no error then set the exact size on the destination file</span>
<a name="l02223"></a>02223       <span class="keywordflow">if</span>( <a class="code" href="a00023.html#49311dbf1b3e2f5d778938655895b17a">COPY_FINISH</a> == status_copy )
<a name="l02224"></a>02224       {
<a name="l02225"></a>02225          <span class="keywordflow">if</span>( !<a class="code" href="a00021.html#2599f935c7e1b69f2650e0943091ddca">file_seek</a>( u32_size_exact , <a class="code" href="a00022.html#5b33d405a458db1db212d345b21454f8">FS_SEEK_SET</a> ))
<a name="l02226"></a>02226          {
<a name="l02227"></a>02227             status_copy = <a class="code" href="a00023.html#fd3d634f2538bd115434b5c9ac6147b1">COPY_FAIL</a>;
<a name="l02228"></a>02228          }<span class="keywordflow">else</span>{
<a name="l02229"></a>02229             <span class="keywordflow">if</span>( !<a class="code" href="a00021.html#07a8faa41a278961fccc5c0793b01ab1">file_set_eof</a>() )
<a name="l02230"></a>02230             {
<a name="l02231"></a>02231                status_copy = <a class="code" href="a00023.html#fd3d634f2538bd115434b5c9ac6147b1">COPY_FAIL</a>;
<a name="l02232"></a>02232             }
<a name="l02233"></a>02233          }
<a name="l02234"></a>02234       }
<a name="l02235"></a>02235       <a class="code" href="a00021.html#7f4f3b65455595cb5be0f7cd7d12e02d">file_close</a>();
<a name="l02236"></a>02236       <span class="comment">// If error then delete the destination file</span>
<a name="l02237"></a>02237       <span class="keywordflow">if</span>( <a class="code" href="a00023.html#fd3d634f2538bd115434b5c9ac6147b1">COPY_FAIL</a> == status_copy )
<a name="l02238"></a>02238       {
<a name="l02239"></a>02239          <a class="code" href="a00026.html#8cf46891df029a9f3b62503d2c3cc065">nav_file_del</a>( TRUE );
<a name="l02240"></a>02240       }
<a name="l02241"></a>02241    }
<a name="l02242"></a>02242    <span class="keywordflow">return</span> status_copy;
<a name="l02243"></a>02243 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="db4a11790eddec97933f80ea44dbefa8"></a><!-- doxytag: member="navigation.c::nav_file_rename" ref="db4a11790eddec97933f80ea44dbefa8" args="(const FS_STRING sz_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_file_rename           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_name</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction rename the directory or file selected. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_name</em>&nbsp;</td><td>buffer with the name (ASCII or UNICODE )</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l01933">1933</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00272">Fs_management::b_mode_nav</a>, <a class="el" href="a00033.html#l01810">fat_cache_flush()</a>, <a class="el" href="a00033.html#l00245">fat_check_mount_select_noopen()</a>, <a class="el" href="a00033.html#l01870">fat_check_nav_access_file()</a>, <a class="el" href="a00036.html#l01928">fat_delete_file()</a>, <a class="el" href="a00033.html#l01184">fat_read_dir()</a>, <a class="el" href="a00033.html#l01407">fat_write_entry_file()</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00371">fs_g_nav_entry</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00042.html#l01994">nav_file_create()</a>, <a class="el" href="a00042.html#l00978">nav_filelist_last()</a>, <a class="el" href="a00034.html#l00279">Fs_management_fast::u16_entry_pos_sel_file</a>, <a class="el" href="a00034.html#l00287">Fs_management_entry::u32_cluster</a>, <a class="el" href="a00034.html#l00288">Fs_management_entry::u32_size</a>, and <a class="el" href="a00034.html#l00286">Fs_management_entry::u8_attr</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l01934"></a>01934 {
<a name="l01935"></a>01935    U16 u16_save_entry_pos;
<a name="l01936"></a>01936    Bool b_save_entry_type;
<a name="l01937"></a>01937    U8 u8_attr;
<a name="l01938"></a>01938    U32 u32_cluster;
<a name="l01939"></a>01939    U32 u32_size;
<a name="l01940"></a>01940 
<a name="l01941"></a>01941    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#003f1c81dcb2c7a95f191c30b8a4f258">fat_check_mount_select_noopen</a>())
<a name="l01942"></a>01942       <span class="keywordflow">return</span> FALSE;
<a name="l01943"></a>01943 
<a name="l01944"></a>01944    <span class="keywordflow">if</span>( !<a class="code" href="a00017.html#07f36d38eda0af16ef7ef899129d7e7b">fat_check_nav_access_file</a>( TRUE ) )
<a name="l01945"></a>01945       <span class="keywordflow">return</span> FALSE;
<a name="l01946"></a>01946 
<a name="l01947"></a>01947    <span class="comment">// save information for create new name before delete the current name in case of error in creation</span>
<a name="l01948"></a>01948    u16_save_entry_pos = <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a>;
<a name="l01949"></a>01949    b_save_entry_type  = <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a>;
<a name="l01950"></a>01950    <span class="comment">// Get file attributs</span>
<a name="l01951"></a>01951    u8_attr = <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#c4f33191c9fd60c7520012bbe6005267">u8_attr</a>;
<a name="l01952"></a>01952    u32_cluster = <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#eaa27a06eca82fa0f65d848def8a4b87">u32_cluster</a>;
<a name="l01953"></a>01953    u32_size = <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#6ffedc3932826a337dfb3e656a09edcc">u32_size</a>;
<a name="l01954"></a>01954       
<a name="l01955"></a>01955    <span class="comment">// Create entry file</span>
<a name="l01956"></a>01956    <span class="keywordflow">if</span> ( !<a class="code" href="a00026.html#27b550ee0cf2326498755b429818b145">nav_file_create</a>( sz_name  ))
<a name="l01957"></a>01957       <span class="keywordflow">return</span> FALSE; <span class="comment">// error</span>
<a name="l01958"></a>01958    <span class="comment">// Modify current file</span>
<a name="l01959"></a>01959    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#1a35321a99150ba643f87cb6c79ec3e5">fat_read_dir</a>())
<a name="l01960"></a>01960       <span class="keywordflow">return</span> FALSE;
<a name="l01961"></a>01961    
<a name="l01962"></a>01962    <span class="comment">// Set file attributs</span>
<a name="l01963"></a>01963    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#c4f33191c9fd60c7520012bbe6005267">u8_attr</a> = u8_attr;
<a name="l01964"></a>01964    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#eaa27a06eca82fa0f65d848def8a4b87">u32_cluster</a> = u32_cluster;
<a name="l01965"></a>01965    <a class="code" href="a00018.html#fcc9a3eb6084fd54807483346dfc5d09">fs_g_nav_entry</a>.<a class="code" href="a00005.html#6ffedc3932826a337dfb3e656a09edcc">u32_size</a> = u32_size;
<a name="l01966"></a>01966    <a class="code" href="a00017.html#40035dc41d435ed3281155cdf800cf02">fat_write_entry_file</a>();
<a name="l01967"></a>01967    
<a name="l01968"></a>01968    <span class="comment">// delete entry file name</span>
<a name="l01969"></a>01969    <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> = u16_save_entry_pos; <span class="comment">// go to previous entry name</span>
<a name="l01970"></a>01970    <span class="keywordflow">if</span> ( !<a class="code" href="a00018.html#797fc629a4a513e6a5f2951720da5d47">fat_delete_file</a>(FALSE) )
<a name="l01971"></a>01971       <span class="keywordflow">return</span> FALSE; <span class="comment">// error</span>
<a name="l01972"></a>01972    
<a name="l01973"></a>01973    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#578ab4800128cde17c0820a5027c1c06">fat_cache_flush</a>() )
<a name="l01974"></a>01974       <span class="keywordflow">return</span> FALSE; <span class="comment">// error</span>
<a name="l01975"></a>01975 
<a name="l01976"></a>01976    <span class="comment">// Go to position of new entry (it is the last file or directory )</span>
<a name="l01977"></a>01977    <span class="keywordflow">return</span> <a class="code" href="a00026.html#d7dbd335c9b54a9ebefddf5308df0409">nav_filelist_last</a>( b_save_entry_type );
<a name="l01978"></a>01978 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c7da45cc8084fef48a1944772c146ff7"></a><!-- doxytag: member="navigation.c::nav_filelist_bol" ref="c7da45cc8084fef48a1944772c146ff7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_bol           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction check the beginning of file list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE, NO begining of file list <p>
TRUE, in case of the file selected is the first file, or in case of error</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00843">843</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00043.html#l00053">FS_FIND_PREV</a>, and <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>.<div class="fragment"><pre class="fragment"><a name="l00844"></a>00844 {
<a name="l00845"></a>00845    <span class="keywordflow">if</span>( FALSE == <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( 0 , <a class="code" href="a00027.html#bc7fd11102a5b83b18fefaba9e846c10">FS_FIND_PREV</a> ) )
<a name="l00846"></a>00846       <span class="keywordflow">return</span> TRUE;   <span class="comment">// end of list or error (remark: the position haven't changed)</span>
<a name="l00847"></a>00847    <span class="comment">// Go to previous position</span>
<a name="l00848"></a>00848    <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( 0 , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> );
<a name="l00849"></a>00849    <span class="keywordflow">return</span> FALSE;
<a name="l00850"></a>00850 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4f3b7e6c2f7670c02973654dbc1d550e"></a><!-- doxytag: member="navigation.c::nav_filelist_eol" ref="4f3b7e6c2f7670c02973654dbc1d550e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_eol           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction check the end of file list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE, NO end of file list <p>
TRUE, in case of end of list or error</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00814">814</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00272">Fs_management::b_mode_nav</a>, <a class="el" href="a00039.html#l00118">FS_DIR</a>, <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00043.html#l00053">FS_FIND_PREV</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00034.html#l00347">FS_NO_SEL</a>, <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>, <a class="el" href="a00034.html#l00279">Fs_management_fast::u16_entry_pos_sel_file</a>, and <a class="el" href="a00034.html#l00271">Fs_management::u16_pos_sel_file</a>.<div class="fragment"><pre class="fragment"><a name="l00815"></a>00815 {
<a name="l00816"></a>00816    <span class="keywordflow">if</span>( FALSE == <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( 0 , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> ) )
<a name="l00817"></a>00817       <span class="keywordflow">return</span> TRUE;   <span class="comment">// end of list or error (remark: the position haven't changed)</span>
<a name="l00818"></a>00818    
<a name="l00819"></a>00819    <span class="comment">// the next file is the first of the list ?</span>
<a name="l00820"></a>00820    <span class="keywordflow">if</span>( 0 != <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#b0213ed9fc205b282b4c1d92adfa7460">u16_pos_sel_file</a> )
<a name="l00821"></a>00821    {
<a name="l00822"></a>00822       <span class="comment">// Go to previous position</span>
<a name="l00823"></a>00823       <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( 0 , <a class="code" href="a00027.html#bc7fd11102a5b83b18fefaba9e846c10">FS_FIND_PREV</a> );
<a name="l00824"></a>00824    }<span class="keywordflow">else</span>{
<a name="l00825"></a>00825       <span class="comment">// No select file before eol fnct</span>
<a name="l00826"></a>00826       <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a>= <a class="code" href="a00018.html#2e16c6cfcb3174f7ad19ad3996a69ae7">FS_NO_SEL</a>;
<a name="l00827"></a>00827       <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#b0213ed9fc205b282b4c1d92adfa7460">u16_pos_sel_file</a>           = <a class="code" href="a00018.html#2e16c6cfcb3174f7ad19ad3996a69ae7">FS_NO_SEL</a>;
<a name="l00828"></a>00828       <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a>                 = <a class="code" href="a00023.html#d043d9359eeca08e8c5ea4d9136eb15b">FS_DIR</a>;
<a name="l00829"></a>00829    }
<a name="l00830"></a>00830    <span class="keywordflow">return</span> FALSE;
<a name="l00831"></a>00831 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d2c6198a0ef77a90abdc9c289f7a2218"></a><!-- doxytag: member="navigation.c::nav_filelist_exist" ref="d2c6198a0ef77a90abdc9c289f7a2218" args="(Bool b_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_exist           </td>
          <td>(</td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction check the presence of files or directorys in file list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b_type</em>&nbsp;</td><td>FS_DIR to check the directory presence <br>
 FS_FILE to check the file presence <br>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE, in case of a file or a directory exist <p>
FALSE, in case of no file or no directory exist, or error</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00865">865</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00347">FS_NO_SEL</a>, <a class="el" href="a00042.html#l00947">nav_filelist_first()</a>, <a class="el" href="a00042.html#l00563">nav_filelist_reset()</a>, <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>, and <a class="el" href="a00034.html#l00271">Fs_management::u16_pos_sel_file</a>.<div class="fragment"><pre class="fragment"><a name="l00866"></a>00866 {
<a name="l00867"></a>00867    Bool status;
<a name="l00868"></a>00868    U16   u16_save_position;
<a name="l00869"></a>00869    
<a name="l00870"></a>00870    <span class="comment">// save current position</span>
<a name="l00871"></a>00871    u16_save_position = <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#b0213ed9fc205b282b4c1d92adfa7460">u16_pos_sel_file</a>;
<a name="l00872"></a>00872    status = <a class="code" href="a00026.html#6f711a14b01a8796caf8d6117d61ab09">nav_filelist_first</a>( b_type );
<a name="l00873"></a>00873 
<a name="l00874"></a>00874    <span class="comment">// reselect previous position</span>
<a name="l00875"></a>00875    <a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>();
<a name="l00876"></a>00876    <span class="keywordflow">if</span> ( u16_save_position != <a class="code" href="a00018.html#2e16c6cfcb3174f7ad19ad3996a69ae7">FS_NO_SEL</a> )
<a name="l00877"></a>00877    {  <span class="comment">// After operation, there are a file selected</span>
<a name="l00878"></a>00878       <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( u16_save_position , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> );
<a name="l00879"></a>00879    }
<a name="l00880"></a>00880    <span class="keywordflow">return</span> status;   
<a name="l00881"></a>00881 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1d6570347e090b2473510798840a729f"></a><!-- doxytag: member="navigation.c::nav_filelist_fileisnotopen" ref="1d6570347e090b2473510798840a729f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_fileisnotopen           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction check if no file is open. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if no file is open <p>
FALSE if a file is open </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00590">590</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00177">fat_check_noopen()</a>.<div class="fragment"><pre class="fragment"><a name="l00591"></a>00591 {
<a name="l00592"></a>00592    <span class="keywordflow">return</span> <a class="code" href="a00017.html#f6f4a9e2d8e7b6dd557871b6bc2c2ee0">fat_check_noopen</a>();
<a name="l00593"></a>00593 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="017ce6b53af128e5064a06bc8fadec25"></a><!-- doxytag: member="navigation.c::nav_filelist_findname" ref="017ce6b53af128e5064a06bc8fadec25" args="(const FS_STRING sz_name, Bool b_match_case)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_findname           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_match_case</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction search a file name in file list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_name</em>&nbsp;</td><td>name to search (UNICODE or ASCII) <br>
 It must be terminate by NULL or '*' value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b_match_case</em>&nbsp;</td><td>FALSE to ignore the case</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! This fonction start a search at the current position the file name in file list 
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00793">793</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00039.html#l00087">FS_NAME_CHECK</a>, <a class="el" href="a00042.html#l01619">nav_file_name()</a>, and <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>.
<p>
Referenced by <a class="el" href="a00042.html#l01994">nav_file_create()</a>, and <a class="el" href="a00042.html#l01452">nav_setcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l00794"></a>00794 {
<a name="l00795"></a>00795    <span class="keywordflow">while</span>( 1 )
<a name="l00796"></a>00796    {
<a name="l00797"></a>00797       <span class="keywordflow">if</span> ( !<a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( 0, <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> ))
<a name="l00798"></a>00798          <span class="keywordflow">return</span> FALSE;
<a name="l00799"></a>00799       <span class="keywordflow">if</span> ( <a class="code" href="a00026.html#10603c2fe89bd66a17cfe3bb49a3fa14">nav_file_name</a>( sz_name , 0 , <a class="code" href="a00023.html#5f61af4710e43b370997c162777f08b3">FS_NAME_CHECK</a> , b_match_case ))
<a name="l00800"></a>00800          <span class="keywordflow">return</span> TRUE;
<a name="l00801"></a>00801    }
<a name="l00802"></a>00802 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6f711a14b01a8796caf8d6117d61ab09"></a><!-- doxytag: member="navigation.c::nav_filelist_first" ref="6f711a14b01a8796caf8d6117d61ab09" args="(Bool b_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_first           </td>
          <td>(</td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction go to at the first file or directory in file list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b_type</em>&nbsp;</td><td>FS_DIR to go at the first directory <br>
 FS_FILE to go at the first file <br>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00947">947</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00272">Fs_management::b_mode_nav</a>, <a class="el" href="a00039.html#l00200">FS_ERR_NO_FIND</a>, <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00042.html#l00563">nav_filelist_reset()</a>, and <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, <a class="el" href="a00042.html#l00865">nav_filelist_exist()</a>, and <a class="el" href="a00042.html#l00978">nav_filelist_last()</a>.<div class="fragment"><pre class="fragment"><a name="l00948"></a>00948 {
<a name="l00949"></a>00949    <span class="comment">// Reset position</span>
<a name="l00950"></a>00950    <span class="keywordflow">if</span> ( !<a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>())
<a name="l00951"></a>00951       <span class="keywordflow">return</span> FALSE;
<a name="l00952"></a>00952    
<a name="l00953"></a>00953    <span class="comment">// Find the first file corresponding of type</span>
<a name="l00954"></a>00954    <span class="keywordflow">while</span>( <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( 0 , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> ) )
<a name="l00955"></a>00955    {
<a name="l00956"></a>00956       <span class="comment">// Check if file</span>
<a name="l00957"></a>00957       <span class="keywordflow">if</span>( b_type == <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a> )
<a name="l00958"></a>00958          <span class="keywordflow">return</span> TRUE;
<a name="l00959"></a>00959    }
<a name="l00960"></a>00960    
<a name="l00961"></a>00961    <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#1227e9d3b3f7f0c656cfbb9a0b7915f8">FS_ERR_NO_FIND</a>;
<a name="l00962"></a>00962    <span class="keywordflow">return</span> FALSE;  <span class="comment">// NO FILE FOUND</span>
<a name="l00963"></a>00963 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6b1c198eaa70bcb1babce7ad46a865ed"></a><!-- doxytag: member="navigation.c::nav_filelist_get" ref="6b1c198eaa70bcb1babce7ad46a865ed" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U16 nav_filelist_get           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the position of selected file in file list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>position of selected file in current directory, 0 is the first position <p>
FS_NO_SEL, in case of no file selected</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00739">739</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00369">fs_g_nav</a>, and <a class="el" href="a00034.html#l00271">Fs_management::u16_pos_sel_file</a>.
<p>
Referenced by <a class="el" href="a00042.html#l00756">nav_filelist_goto()</a>.<div class="fragment"><pre class="fragment"><a name="l00740"></a>00740 {
<a name="l00741"></a>00741    <span class="keywordflow">return</span> <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#b0213ed9fc205b282b4c1d92adfa7460">u16_pos_sel_file</a>;
<a name="l00742"></a>00742 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="e725a52dd932465bd1c3ebe61af033c5"></a><!-- doxytag: member="navigation.c::nav_filelist_goto" ref="e725a52dd932465bd1c3ebe61af033c5" args="(U16 u16_newpos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_goto           </td>
          <td>(</td>
          <td class="paramtype">U16&nbsp;</td>
          <td class="paramname"> <em>u16_newpos</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction go to a position in file list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u16_newpos</em>&nbsp;</td><td>new position to select in file list, 0 is the first position</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00756">756</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00043.html#l00053">FS_FIND_PREV</a>, <a class="el" href="a00034.html#l00347">FS_NO_SEL</a>, <a class="el" href="a00042.html#l00739">nav_filelist_get()</a>, and <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>.<div class="fragment"><pre class="fragment"><a name="l00757"></a>00757 {
<a name="l00758"></a>00758    U16 u16_current_pos;
<a name="l00759"></a>00759    u16_current_pos = <a class="code" href="a00026.html#6b1c198eaa70bcb1babce7ad46a865ed">nav_filelist_get</a>();
<a name="l00760"></a>00760    <span class="keywordflow">if</span> (<a class="code" href="a00018.html#2e16c6cfcb3174f7ad19ad3996a69ae7">FS_NO_SEL</a> == u16_current_pos)
<a name="l00761"></a>00761    {
<a name="l00762"></a>00762       <span class="keywordflow">return</span> <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( u16_newpos, <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> );
<a name="l00763"></a>00763    }
<a name="l00764"></a>00764    <span class="keywordflow">else</span>
<a name="l00765"></a>00765    {
<a name="l00766"></a>00766       <span class="keywordflow">if</span> (u16_newpos &lt; u16_current_pos)
<a name="l00767"></a>00767       {
<a name="l00768"></a>00768          <span class="keywordflow">return</span> <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( u16_current_pos -u16_newpos -1 , <a class="code" href="a00027.html#bc7fd11102a5b83b18fefaba9e846c10">FS_FIND_PREV</a> );
<a name="l00769"></a>00769       }
<a name="l00770"></a>00770       <span class="keywordflow">if</span> (u16_newpos &gt; u16_current_pos)
<a name="l00771"></a>00771       {
<a name="l00772"></a>00772          <span class="keywordflow">return</span> <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( u16_newpos -u16_current_pos - 1 , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> );
<a name="l00773"></a>00773       }
<a name="l00774"></a>00774    }
<a name="l00775"></a>00775    <span class="keywordflow">return</span> TRUE;
<a name="l00776"></a>00776 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="d7dbd335c9b54a9ebefddf5308df0409"></a><!-- doxytag: member="navigation.c::nav_filelist_last" ref="d7dbd335c9b54a9ebefddf5308df0409" args="(Bool b_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_last           </td>
          <td>(</td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction go to at the last file or directory in file list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b_type</em>&nbsp;</td><td>FS_DIR to go at the last directory <br>
 FS_FILE to go at the last file <br>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00978">978</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00039.html#l00200">FS_ERR_NO_FIND</a>, <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00042.html#l00947">nav_filelist_first()</a>, <a class="el" href="a00042.html#l00895">nav_filelist_nb()</a>, and <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>.
<p>
Referenced by <a class="el" href="a00042.html#l01253">nav_dir_make()</a>, and <a class="el" href="a00042.html#l01933">nav_file_rename()</a>.<div class="fragment"><pre class="fragment"><a name="l00979"></a>00979 {
<a name="l00980"></a>00980    U16 u16_nb;
<a name="l00981"></a>00981 
<a name="l00982"></a>00982    <span class="comment">// Get nb file of good type</span>
<a name="l00983"></a>00983    u16_nb = <a class="code" href="a00026.html#a3116b803ef078138f0d32ac2a92a8cf">nav_filelist_nb</a>( b_type  );
<a name="l00984"></a>00984    <span class="keywordflow">if</span>( 0 == u16_nb )
<a name="l00985"></a>00985    {
<a name="l00986"></a>00986       <span class="comment">// No file with a good type</span>
<a name="l00987"></a>00987       <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#1227e9d3b3f7f0c656cfbb9a0b7915f8">FS_ERR_NO_FIND</a>;
<a name="l00988"></a>00988       <span class="keywordflow">return</span> FALSE;  <span class="comment">// NO FILE FOUND</span>
<a name="l00989"></a>00989    }
<a name="l00990"></a>00990 
<a name="l00991"></a>00991    <span class="comment">// Go to the first file</span>
<a name="l00992"></a>00992    <span class="keywordflow">if</span> ( !<a class="code" href="a00026.html#6f711a14b01a8796caf8d6117d61ab09">nav_filelist_first</a>( b_type ))
<a name="l00993"></a>00993       <span class="keywordflow">return</span> FALSE;
<a name="l00994"></a>00994       
<a name="l00995"></a>00995    <span class="comment">// If there are more one file, then go to last of list</span>
<a name="l00996"></a>00996    <span class="keywordflow">if</span>( 1 == u16_nb )
<a name="l00997"></a>00997       <span class="keywordflow">return</span> TRUE;
<a name="l00998"></a>00998    u16_nb -= 2;
<a name="l00999"></a>00999    <span class="keywordflow">return</span> <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( u16_nb , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> );
<a name="l01000"></a>01000 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a3116b803ef078138f0d32ac2a92a8cf"></a><!-- doxytag: member="navigation.c::nav_filelist_nb" ref="a3116b803ef078138f0d32ac2a92a8cf" args="(Bool b_type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U16 nav_filelist_nb           </td>
          <td>(</td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_type</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction compute the number of files or directorys in file list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b_type</em>&nbsp;</td><td>FS_DIR to compute the directory presence <br>
 FS_FILE to compute the file presence <br>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of file or directory present in file list</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00895">895</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00272">Fs_management::b_mode_nav</a>, <a class="el" href="a00039.html#l00117">FS_FILE</a>, <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00347">FS_NO_SEL</a>, <a class="el" href="a00042.html#l00563">nav_filelist_reset()</a>, <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>, and <a class="el" href="a00034.html#l00271">Fs_management::u16_pos_sel_file</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, and <a class="el" href="a00042.html#l00978">nav_filelist_last()</a>.<div class="fragment"><pre class="fragment"><a name="l00896"></a>00896 {
<a name="l00897"></a>00897    U16   u16_save_position;
<a name="l00898"></a>00898    U16   u16_save_number_dir;
<a name="l00899"></a>00899    U16   u16_save_number_file;
<a name="l00900"></a>00900    
<a name="l00901"></a>00901    <span class="comment">// save current position</span>
<a name="l00902"></a>00902    u16_save_position = <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#b0213ed9fc205b282b4c1d92adfa7460">u16_pos_sel_file</a>;
<a name="l00903"></a>00903 
<a name="l00904"></a>00904    <span class="comment">// Reset position</span>
<a name="l00905"></a>00905    <span class="keywordflow">if</span> ( !<a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>())
<a name="l00906"></a>00906       <span class="keywordflow">return</span> 0;
<a name="l00907"></a>00907 
<a name="l00908"></a>00908    <span class="comment">// Scan all directory</span>
<a name="l00909"></a>00909    u16_save_number_dir  = 0;
<a name="l00910"></a>00910    u16_save_number_file = 0;
<a name="l00911"></a>00911    <span class="keywordflow">while</span>( <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( 0 , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> ) )
<a name="l00912"></a>00912    {
<a name="l00913"></a>00913       <span class="comment">// Check if file or dir</span>
<a name="l00914"></a>00914       <span class="keywordflow">if</span>( <a class="code" href="a00023.html#20f0a7ade1270e3923abafeb33864c55">FS_FILE</a> == <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a> )
<a name="l00915"></a>00915          u16_save_number_file++;    <span class="comment">// It is a file</span>
<a name="l00916"></a>00916       <span class="keywordflow">else</span>
<a name="l00917"></a>00917          u16_save_number_dir++;     <span class="comment">// It is a directory</span>
<a name="l00918"></a>00918    }
<a name="l00919"></a>00919    
<a name="l00920"></a>00920    <span class="comment">// reselect previous position</span>
<a name="l00921"></a>00921    <a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>();
<a name="l00922"></a>00922    <span class="keywordflow">if</span> ( u16_save_position != <a class="code" href="a00018.html#2e16c6cfcb3174f7ad19ad3996a69ae7">FS_NO_SEL</a> )
<a name="l00923"></a>00923    {  <span class="comment">// After operation, there are a file selected</span>
<a name="l00924"></a>00924       <a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( u16_save_position , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> );
<a name="l00925"></a>00925    }
<a name="l00926"></a>00926    
<a name="l00927"></a>00927    <span class="comment">// Return the value asked</span>
<a name="l00928"></a>00928    <span class="keywordflow">if</span>( <a class="code" href="a00023.html#20f0a7ade1270e3923abafeb33864c55">FS_FILE</a> == b_type )
<a name="l00929"></a>00929       <span class="keywordflow">return</span> u16_save_number_file;
<a name="l00930"></a>00930    <span class="keywordflow">else</span>
<a name="l00931"></a>00931       <span class="keywordflow">return</span> u16_save_number_dir;
<a name="l00932"></a>00932 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7ad0aa092d133a156651abe5d871b8eb"></a><!-- doxytag: member="navigation.c::nav_filelist_reset" ref="7ad0aa092d133a156651abe5d871b8eb" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_reset           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction reset the pointer of selection, so "no file selected" in file list. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00563">563</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00232">fat_check_mount_noopen()</a>, and <a class="el" href="a00033.html#l01382">fat_clear_entry_info_and_ptr()</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, <a class="el" href="a00042.html#l01106">nav_dir_cd()</a>, <a class="el" href="a00042.html#l01136">nav_dir_gotoparent()</a>, <a class="el" href="a00042.html#l01994">nav_file_create()</a>, <a class="el" href="a00042.html#l01855">nav_file_del()</a>, <a class="el" href="a00042.html#l00865">nav_filelist_exist()</a>, <a class="el" href="a00042.html#l00947">nav_filelist_first()</a>, <a class="el" href="a00042.html#l00895">nav_filelist_nb()</a>, <a class="el" href="a00042.html#l01045">nav_gotoindex()</a>, and <a class="el" href="a00042.html#l01452">nav_setcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l00564"></a>00564 {
<a name="l00565"></a>00565    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#e9d0f61d0e7b29a4e8e9e95347194f21">fat_check_mount_noopen</a>())
<a name="l00566"></a>00566       <span class="keywordflow">return</span> FALSE;
<a name="l00567"></a>00567 
<a name="l00568"></a>00568    <span class="comment">// No file selected and reset navigation</span>
<a name="l00569"></a>00569    <a class="code" href="a00017.html#56d9a210bc2d4b0b5c46cb24a2e9f690">fat_clear_entry_info_and_ptr</a>();
<a name="l00570"></a>00570    <span class="keywordflow">return</span> TRUE;
<a name="l00571"></a>00571 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="066eaff61613f07dc5fb1f3313747aef"></a><!-- doxytag: member="navigation.c::nav_filelist_set" ref="066eaff61613f07dc5fb1f3313747aef" args="(U16 u16_nb, Bool b_direction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_set           </td>
          <td>(</td>
          <td class="paramtype">U16&nbsp;</td>
          <td class="paramname"> <em>u16_nb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_direction</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction move the pointer of selection in file list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u16_nb</em>&nbsp;</td><td>numbers file to jump before stopping action <br>
 0, stop at the first file found <br>
 1, stop at the second file found <br>
</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b_direction</em>&nbsp;</td><td>search direction <br>
 FS_FIND_NEXT, move to next file or directory FS_FIND_PREV, move to previous file or directory</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! Note: if no file is selected then nav_filelist_set( 0 , FS_NEXT ) go to first file of the File list.
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00614">614</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00272">Fs_management::b_mode_nav</a>, <a class="el" href="a00033.html#l00232">fat_check_mount_noopen()</a>, <a class="el" href="a00033.html#l01231">fat_entry_check()</a>, <a class="el" href="a00033.html#l01341">fat_get_entry_info()</a>, <a class="el" href="a00033.html#l01184">fat_read_dir()</a>, <a class="el" href="a00039.html#l00118">FS_DIR</a>, <a class="el" href="a00034.html#l00348">FS_END_FIND</a>, <a class="el" href="a00039.html#l00201">FS_ERR_ENTRY_EMPTY</a>, <a class="el" href="a00039.html#l00199">FS_ERR_FS</a>, <a class="el" href="a00039.html#l00200">FS_ERR_NO_FIND</a>, <a class="el" href="a00039.html#l00217">FS_ERR_OUT_LIST</a>, <a class="el" href="a00039.html#l00117">FS_FILE</a>, <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00034.html#l00347">FS_NO_SEL</a>, <a class="el" href="a00034.html#l00279">Fs_management_fast::u16_entry_pos_sel_file</a>, and <a class="el" href="a00034.html#l00271">Fs_management::u16_pos_sel_file</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, <a class="el" href="a00042.html#l01136">nav_dir_gotoparent()</a>, <a class="el" href="a00042.html#l01855">nav_file_del()</a>, <a class="el" href="a00042.html#l00843">nav_filelist_bol()</a>, <a class="el" href="a00042.html#l00814">nav_filelist_eol()</a>, <a class="el" href="a00042.html#l00865">nav_filelist_exist()</a>, <a class="el" href="a00042.html#l00793">nav_filelist_findname()</a>, <a class="el" href="a00042.html#l00947">nav_filelist_first()</a>, <a class="el" href="a00042.html#l00756">nav_filelist_goto()</a>, <a class="el" href="a00042.html#l00978">nav_filelist_last()</a>, <a class="el" href="a00042.html#l00895">nav_filelist_nb()</a>, and <a class="el" href="a00042.html#l01045">nav_gotoindex()</a>.<div class="fragment"><pre class="fragment"><a name="l00615"></a>00615 {
<a name="l00616"></a>00616    U16   u16_ptr_save_entry;
<a name="l00617"></a>00617    U16   u16_save_pos_sel_file;
<a name="l00618"></a>00618    Bool  b_save_entry_type;
<a name="l00619"></a>00619    Bool  b_find_last_entry = FALSE;
<a name="l00620"></a>00620 
<a name="l00621"></a>00621    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#e9d0f61d0e7b29a4e8e9e95347194f21">fat_check_mount_noopen</a>())
<a name="l00622"></a>00622       <span class="keywordflow">return</span> FALSE;
<a name="l00623"></a>00623       
<a name="l00624"></a>00624    <span class="comment">// save the current file entry</span>
<a name="l00625"></a>00625    u16_ptr_save_entry      = <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a>;
<a name="l00626"></a>00626    u16_save_pos_sel_file   = <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#b0213ed9fc205b282b4c1d92adfa7460">u16_pos_sel_file</a>;
<a name="l00627"></a>00627    b_save_entry_type       = <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a>;
<a name="l00628"></a>00628 
<a name="l00629"></a>00629    <span class="comment">// loop in directory entry</span>
<a name="l00630"></a>00630    <span class="keywordflow">while</span>( 1 )
<a name="l00631"></a>00631    {
<a name="l00632"></a>00632       <span class="keywordflow">if</span>(( <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> == b_direction )
<a name="l00633"></a>00633       || ( b_find_last_entry ) )
<a name="l00634"></a>00634       {
<a name="l00635"></a>00635          <span class="comment">// if the directory have more 0xFFFE entry file</span>
<a name="l00636"></a>00636          <span class="keywordflow">if</span> ( <a class="code" href="a00018.html#fe6257cc919ba9fad5fad6c1e499f6d6">FS_END_FIND</a> == <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> )
<a name="l00637"></a>00637          {
<a name="l00638"></a>00638             <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#89613ba21711697c707a3199bf93b9cf">FS_ERR_FS</a>; <span class="comment">// entry file number no supported by this file system</span>
<a name="l00639"></a>00639             <span class="keywordflow">break</span>;
<a name="l00640"></a>00640          }
<a name="l00641"></a>00641          <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a>++;   <span class="comment">// go to next entry file</span>
<a name="l00642"></a>00642       }
<a name="l00643"></a>00643       <span class="keywordflow">else</span>
<a name="l00644"></a>00644       {
<a name="l00645"></a>00645          <span class="keywordflow">if</span> ( <a class="code" href="a00018.html#2e16c6cfcb3174f7ad19ad3996a69ae7">FS_NO_SEL</a> == <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> )
<a name="l00646"></a>00646          {
<a name="l00647"></a>00647             <span class="comment">// No file selected</span>
<a name="l00648"></a>00648             <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#1227e9d3b3f7f0c656cfbb9a0b7915f8">FS_ERR_NO_FIND</a>;
<a name="l00649"></a>00649             <span class="keywordflow">break</span>;
<a name="l00650"></a>00650          }
<a name="l00651"></a>00651          <span class="comment">// if it is the beginning of the directory</span>
<a name="l00652"></a>00652          <span class="keywordflow">if</span> ( 0 == <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> )
<a name="l00653"></a>00653          {
<a name="l00654"></a>00654             <span class="comment">// beginning of directory</span>
<a name="l00655"></a>00655             <span class="keywordflow">if</span> ( <a class="code" href="a00023.html#d043d9359eeca08e8c5ea4d9136eb15b">FS_DIR</a> == <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a> )
<a name="l00656"></a>00656             {
<a name="l00657"></a>00657                <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#1227e9d3b3f7f0c656cfbb9a0b7915f8">FS_ERR_NO_FIND</a>;
<a name="l00658"></a>00658                <span class="keywordflow">break</span>;
<a name="l00659"></a>00659             }
<a name="l00660"></a>00660             <span class="comment">// end of scan file, find last entry in directory to find last directory entry</span>
<a name="l00661"></a>00661             b_find_last_entry = TRUE;
<a name="l00662"></a>00662          }<span class="keywordflow">else</span>{
<a name="l00663"></a>00663             <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a>--;   <span class="comment">// go to previous entry file</span>
<a name="l00664"></a>00664          }
<a name="l00665"></a>00665       }
<a name="l00666"></a>00666 
<a name="l00667"></a>00667       <span class="keywordflow">if</span>( !<a class="code" href="a00017.html#1a35321a99150ba643f87cb6c79ec3e5">fat_read_dir</a>())
<a name="l00668"></a>00668       {
<a name="l00669"></a>00669          <span class="keywordflow">if</span>( <a class="code" href="a00023.html#e8798a89bfc4f49da50fc55b14a5b07f">FS_ERR_OUT_LIST</a> != <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> )
<a name="l00670"></a>00670             <span class="keywordflow">break</span>; <span class="comment">// Error</span>
<a name="l00671"></a>00671       }<span class="keywordflow">else</span>{
<a name="l00672"></a>00672          <span class="comment">// Check the new entry</span>
<a name="l00673"></a>00673          <span class="keywordflow">if</span> ( <a class="code" href="a00017.html#ef13c743905d7e0381b3a461da2ebd7a">fat_entry_check</a>( <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a> ) )
<a name="l00674"></a>00674          {
<a name="l00675"></a>00675            <span class="comment">// a file with good type is found</span>
<a name="l00676"></a>00676 
<a name="l00677"></a>00677            <span class="keywordflow">if</span>( b_find_last_entry )
<a name="l00678"></a>00678              <span class="keywordflow">continue</span>; <span class="comment">// In case of search end of dir, jump good entry</span>
<a name="l00679"></a>00679    
<a name="l00680"></a>00680            <span class="comment">// Update the index position to navigation module</span>
<a name="l00681"></a>00681            <span class="keywordflow">if</span> ( <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> == b_direction )
<a name="l00682"></a>00682               <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#b0213ed9fc205b282b4c1d92adfa7460">u16_pos_sel_file</a>++;
<a name="l00683"></a>00683            <span class="keywordflow">else</span>
<a name="l00684"></a>00684               <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#b0213ed9fc205b282b4c1d92adfa7460">u16_pos_sel_file</a>--;
<a name="l00685"></a>00685    
<a name="l00686"></a>00686            <span class="keywordflow">if</span> (0 == u16_nb)
<a name="l00687"></a>00687            {
<a name="l00688"></a>00688               <span class="comment">// it is the last good file</span>
<a name="l00689"></a>00689               <a class="code" href="a00017.html#56b68ed36f194500ce88c22252e3c317">fat_get_entry_info</a>();
<a name="l00690"></a>00690               <span class="keywordflow">return</span> TRUE;         <span class="comment">// NB FILE FIND</span>
<a name="l00691"></a>00691            }
<a name="l00692"></a>00692            u16_nb--;
<a name="l00693"></a>00693            <span class="keywordflow">continue</span>;
<a name="l00694"></a>00694          }
<a name="l00695"></a>00695       }
<a name="l00696"></a>00696 
<a name="l00697"></a>00697       <span class="comment">// Here error, check if end of directory</span>
<a name="l00698"></a>00698       <span class="keywordflow">if</span>(( <a class="code" href="a00023.html#33817136df196a5f0146574b4e1775b6">FS_ERR_ENTRY_EMPTY</a> == <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> )
<a name="l00699"></a>00699       || ( <a class="code" href="a00023.html#e8798a89bfc4f49da50fc55b14a5b07f">FS_ERR_OUT_LIST</a>    == <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> ) )
<a name="l00700"></a>00700       {
<a name="l00701"></a>00701          <span class="comment">// end of directory</span>
<a name="l00702"></a>00702          <span class="keywordflow">if</span>( b_find_last_entry )
<a name="l00703"></a>00703          {
<a name="l00704"></a>00704             <span class="comment">// end of directory found, then start find last directory</span>
<a name="l00705"></a>00705             b_find_last_entry = FALSE;
<a name="l00706"></a>00706             <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a> = <a class="code" href="a00023.html#d043d9359eeca08e8c5ea4d9136eb15b">FS_DIR</a>;
<a name="l00707"></a>00707             <span class="keywordflow">continue</span>;
<a name="l00708"></a>00708          }
<a name="l00709"></a>00709          <span class="comment">// Here, we are in mode next</span>
<a name="l00710"></a>00710          <span class="keywordflow">if</span> ( <a class="code" href="a00023.html#20f0a7ade1270e3923abafeb33864c55">FS_FILE</a> == <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a> )
<a name="l00711"></a>00711          {
<a name="l00712"></a>00712             <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#1227e9d3b3f7f0c656cfbb9a0b7915f8">FS_ERR_NO_FIND</a>;  <span class="comment">// No file found</span>
<a name="l00713"></a>00713             <span class="keywordflow">break</span>;   <span class="comment">// end of scan</span>
<a name="l00714"></a>00714          }<span class="keywordflow">else</span>{
<a name="l00715"></a>00715             <span class="comment">// End of find dir</span>
<a name="l00716"></a>00716             <span class="comment">// Restart at the beginning of directory to find file</span>
<a name="l00717"></a>00717             <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> = 0xFFFF;
<a name="l00718"></a>00718             <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a> = <a class="code" href="a00023.html#20f0a7ade1270e3923abafeb33864c55">FS_FILE</a>;
<a name="l00719"></a>00719          }
<a name="l00720"></a>00720       }
<a name="l00721"></a>00721    }  <span class="comment">// end of loop while(1)</span>
<a name="l00722"></a>00722 
<a name="l00723"></a>00723    <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#f36b5e65540c67c04d0ca489e2f52332">b_mode_nav</a>                    = b_save_entry_type;
<a name="l00724"></a>00724    <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a>   = u16_ptr_save_entry;
<a name="l00725"></a>00725    <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#b0213ed9fc205b282b4c1d92adfa7460">u16_pos_sel_file</a>              = u16_save_pos_sel_file;
<a name="l00726"></a>00726    <span class="keywordflow">return</span> FALSE;
<a name="l00727"></a>00727 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="dd6435ba1a2f0a8ddc072883c05a1a64"></a><!-- doxytag: member="navigation.c::nav_filelist_validpos" ref="dd6435ba1a2f0a8ddc072883c05a1a64" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_filelist_validpos           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction check if a file is selected. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE if a file is selected <p>
FALSE if no file is selected </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00579">579</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00245">fat_check_mount_select_noopen()</a>.<div class="fragment"><pre class="fragment"><a name="l00580"></a>00580 {
<a name="l00581"></a>00581    <span class="keywordflow">return</span> <a class="code" href="a00017.html#003f1c81dcb2c7a95f191c30b8a4f258">fat_check_mount_select_noopen</a>();
<a name="l00582"></a>00582 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4a9efd8a5ff4c599be7994c009f0fb5f"></a><!-- doxytag: member="navigation.c::nav_get" ref="4a9efd8a5ff4c599be7994c009f0fb5f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U8 nav_get           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the current navigation used. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>u8_idnav Id navigator selected </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00175">175</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00042.html#l00063">fs_g_u8_nav_selected</a>.
<p>
Referenced by <a class="el" href="a00042.html#l02030">nav_file_copy()</a>, <a class="el" href="a00042.html#l02065">nav_file_paste_start()</a>, and <a class="el" href="a00042.html#l02112">nav_file_paste_state()</a>.<div class="fragment"><pre class="fragment"><a name="l00176"></a>00176 {
<a name="l00177"></a>00177 <span class="preprocessor">#if (FS_NB_NAVIGATOR &gt; 1)</span>
<a name="l00178"></a>00178 <span class="preprocessor"></span>   <span class="keywordflow">return</span> <a class="code" href="a00026.html#b84a05017e426fd46d9eb3698642f133">fs_g_u8_nav_selected</a>;
<a name="l00179"></a>00179 <span class="preprocessor">#else</span>
<a name="l00180"></a>00180 <span class="preprocessor"></span>   <span class="keywordflow">return</span> 0;
<a name="l00181"></a>00181 <span class="preprocessor">#endif</span>
<a name="l00182"></a>00182 <span class="preprocessor"></span>}
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="661d4a0464a9da163de1e07aa9196f0d"></a><!-- doxytag: member="navigation.c::nav_getcwd" ref="661d4a0464a9da163de1e07aa9196f0d" args="(FS_STRING sz_path, U8 u8_size_path, Bool b_view_file_select)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_getcwd           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>u8_size_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_view_file_select</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the path of the current file list. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_path</em>&nbsp;</td><td>buffer to store path (ASCII or UNICODE ) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>u8_size_path</em>&nbsp;</td><td>buffer size (unit ASCII or UNICODE ) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b_view_file_select</em>&nbsp;</td><td>TRUE, include in path the name of file selected</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! "File list" is a list of files and directorys present in current directory
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l01301">1301</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00232">fat_check_mount_noopen()</a>, <a class="el" href="a00033.html#l00215">fat_check_select()</a>, <a class="el" href="a00039.html#l00226">FS_ERR_BUFFER_FULL</a>, <a class="el" href="a00039.html#l00216">FS_ERR_IS_ROOT</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00039.html#l00086">FS_NAME_GET</a>, <a class="el" href="a00034.html#l00094">Is_unicode</a>, <a class="el" href="a00042.html#l01136">nav_dir_gotoparent()</a>, <a class="el" href="a00042.html#l00282">nav_drive_getname()</a>, <a class="el" href="a00042.html#l01619">nav_file_name()</a>, <a class="el" href="a00042.html#l01016">nav_getindex()</a>, <a class="el" href="a00042.html#l01045">nav_gotoindex()</a>, and <a class="el" href="a00033.html#l00351">u8_i</a>.<div class="fragment"><pre class="fragment"><a name="l01302"></a>01302 {
<a name="l01303"></a>01303    Bool status;
<a name="l01304"></a>01304    _MEM_TYPE_SLOW_   <a class="code" href="a00003.html">Fs_index</a> index;
<a name="l01305"></a>01305    U8 u8_save_size_path, <a class="code" href="a00017.html#5985f32ca0a3714cb4b55abf404be10c">u8_i</a>;
<a name="l01306"></a>01306 
<a name="l01307"></a>01307 
<a name="l01308"></a>01308    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#e9d0f61d0e7b29a4e8e9e95347194f21">fat_check_mount_noopen</a>())
<a name="l01309"></a>01309       <span class="keywordflow">return</span> FALSE;
<a name="l01310"></a>01310 
<a name="l01311"></a>01311    <span class="comment">// Save current position</span>
<a name="l01312"></a>01312    index = <a class="code" href="a00026.html#47882923fca657fb23001d23b6b5369d">nav_getindex</a>();
<a name="l01313"></a>01313 
<a name="l01314"></a>01314 
<a name="l01315"></a>01315    <span class="comment">// Set flag end of path</span>
<a name="l01316"></a>01316    u8_save_size_path = u8_size_path;
<a name="l01317"></a>01317    u8_size_path--;
<a name="l01318"></a>01318    <span class="keywordflow">if</span>( <a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a> )
<a name="l01319"></a>01319    {
<a name="l01320"></a>01320       ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[u8_size_path] = 0;
<a name="l01321"></a>01321    }<span class="keywordflow">else</span>{
<a name="l01322"></a>01322       sz_path [u8_size_path]   = 0;
<a name="l01323"></a>01323    }
<a name="l01324"></a>01324 
<a name="l01325"></a>01325    <span class="comment">// Loop for read each dir name of path</span>
<a name="l01326"></a>01326    <span class="keywordflow">while</span>( 1 )    <span class="comment">// Go to parent directory and select the current directory</span>
<a name="l01327"></a>01327    {
<a name="l01328"></a>01328       <span class="keywordflow">if</span>( b_view_file_select )
<a name="l01329"></a>01329       {
<a name="l01330"></a>01330          b_view_file_select = FALSE;
<a name="l01331"></a>01331          <span class="comment">// File selected ?</span>
<a name="l01332"></a>01332          <span class="keywordflow">if</span>( !<a class="code" href="a00017.html#909da9e84afbebf8ed5838cbe5002f60">fat_check_select</a>() )
<a name="l01333"></a>01333             <span class="keywordflow">continue</span>;   <span class="comment">// No file selected, then restart loop to read first directory</span>
<a name="l01334"></a>01334       }
<a name="l01335"></a>01335       <span class="keywordflow">else</span>
<a name="l01336"></a>01336       {
<a name="l01337"></a>01337          <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#b37aa8fc84aca800a020da78724d729e">nav_dir_gotoparent</a>() )    <span class="comment">// Go to parent directory and select the current directory</span>
<a name="l01338"></a>01338             <span class="keywordflow">break</span>;
<a name="l01339"></a>01339       }
<a name="l01340"></a>01340    
<a name="l01341"></a>01341       <span class="comment">// Read name</span>
<a name="l01342"></a>01342       <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#10603c2fe89bd66a17cfe3bb49a3fa14">nav_file_name</a>( sz_path  , u8_size_path , <a class="code" href="a00023.html#a07ca9c4f511c7e1f326c27aeecb7178">FS_NAME_GET</a>, FALSE  ))
<a name="l01343"></a>01343          <span class="keywordflow">break</span>;
<a name="l01344"></a>01344 
<a name="l01345"></a>01345       <span class="comment">// Compute the size of name</span>
<a name="l01346"></a>01346       u8_i = 0;
<a name="l01347"></a>01347       <span class="keywordflow">while</span>( 1 )
<a name="l01348"></a>01348       {
<a name="l01349"></a>01349          <span class="keywordflow">if</span>( <a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a> )
<a name="l01350"></a>01350          {
<a name="l01351"></a>01351             <span class="keywordflow">if</span>( 0 == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[u8_i])
<a name="l01352"></a>01352                <span class="keywordflow">break</span>;
<a name="l01353"></a>01353          }<span class="keywordflow">else</span>{
<a name="l01354"></a>01354             <span class="keywordflow">if</span>( 0 == sz_path [u8_i])
<a name="l01355"></a>01355                <span class="keywordflow">break</span>;
<a name="l01356"></a>01356          }
<a name="l01357"></a>01357          u8_i++;
<a name="l01358"></a>01358       }
<a name="l01359"></a>01359       
<a name="l01360"></a>01360       <span class="comment">// check size buffer</span>
<a name="l01361"></a>01361       <span class="keywordflow">if</span>( (u8_i+1) == u8_size_path )
<a name="l01362"></a>01362       {
<a name="l01363"></a>01363          <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#51829972f3c3b325c18cdddec0962d77">FS_ERR_BUFFER_FULL</a>;   <span class="comment">// The buffer of path name is full</span>
<a name="l01364"></a>01364          <span class="keywordflow">break</span>;
<a name="l01365"></a>01365       }
<a name="l01366"></a>01366       
<a name="l01367"></a>01367       <span class="comment">// Move the name at the end of path</span>
<a name="l01368"></a>01368       <span class="keywordflow">while</span>( 0 != u8_i )
<a name="l01369"></a>01369       {
<a name="l01370"></a>01370          u8_i--;
<a name="l01371"></a>01371          u8_size_path--;
<a name="l01372"></a>01372          <span class="keywordflow">if</span>( <a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a> )
<a name="l01373"></a>01373          {
<a name="l01374"></a>01374             ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[u8_size_path] = ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[u8_i];
<a name="l01375"></a>01375          }<span class="keywordflow">else</span>{
<a name="l01376"></a>01376             sz_path [u8_size_path]   = sz_path [u8_i];
<a name="l01377"></a>01377          }
<a name="l01378"></a>01378       }
<a name="l01379"></a>01379       <span class="comment">// Set '\' caracter before name</span>
<a name="l01380"></a>01380       u8_size_path--;
<a name="l01381"></a>01381       <span class="keywordflow">if</span>( <a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a> )
<a name="l01382"></a>01382       {
<a name="l01383"></a>01383          ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[u8_size_path] = <span class="charliteral">'\\'</span>;
<a name="l01384"></a>01384       }<span class="keywordflow">else</span>{
<a name="l01385"></a>01385          sz_path [u8_size_path]   = <span class="charliteral">'\\'</span>;
<a name="l01386"></a>01386       }
<a name="l01387"></a>01387    }
<a name="l01388"></a>01388 
<a name="l01389"></a>01389    <span class="keywordflow">if</span> ( <a class="code" href="a00023.html#94e90e580e7ef16c72c2f2cb187af995">FS_ERR_IS_ROOT</a> == <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> )
<a name="l01390"></a>01390    {
<a name="l01391"></a>01391       <span class="comment">// End of path -&gt; add device name</span>
<a name="l01392"></a>01392       <span class="keywordflow">if</span>( 2 &gt; u8_size_path )
<a name="l01393"></a>01393       {
<a name="l01394"></a>01394          <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#51829972f3c3b325c18cdddec0962d77">FS_ERR_BUFFER_FULL</a>;   <span class="comment">// The buffer of path name is full</span>
<a name="l01395"></a>01395          status = FALSE;
<a name="l01396"></a>01396       }
<a name="l01397"></a>01397       <span class="keywordflow">else</span>
<a name="l01398"></a>01398       {
<a name="l01399"></a>01399          <span class="comment">// Create a device name</span>
<a name="l01400"></a>01400          <span class="keywordflow">if</span>( <a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a> )
<a name="l01401"></a>01401          {
<a name="l01402"></a>01402             ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0] = <a class="code" href="a00026.html#cf3be5c3ce9b724a135162437642e091">nav_drive_getname</a>();    <span class="comment">// Letter</span>
<a name="l01403"></a>01403             ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[1] = <span class="charliteral">':'</span>;                    <span class="comment">// ":"</span>
<a name="l01404"></a>01404          }<span class="keywordflow">else</span>{
<a name="l01405"></a>01405             sz_path [0] = <a class="code" href="a00026.html#cf3be5c3ce9b724a135162437642e091">nav_drive_getname</a>();  <span class="comment">// Letter</span>
<a name="l01406"></a>01406             sz_path [1] = <span class="charliteral">':'</span>;                     <span class="comment">// ":"</span>
<a name="l01407"></a>01407          }
<a name="l01408"></a>01408 
<a name="l01409"></a>01409          <span class="comment">// Move all path at the beginning of buffer</span>
<a name="l01410"></a>01410          u8_i = 2;
<a name="l01411"></a>01411          <span class="keywordflow">while</span>( u8_save_size_path != u8_size_path )
<a name="l01412"></a>01412          {
<a name="l01413"></a>01413             <span class="keywordflow">if</span>( <a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a> )
<a name="l01414"></a>01414             {
<a name="l01415"></a>01415                ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[u8_i] = ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[u8_size_path];
<a name="l01416"></a>01416             }<span class="keywordflow">else</span>{
<a name="l01417"></a>01417                sz_path [u8_i] = sz_path [u8_size_path];
<a name="l01418"></a>01418             }
<a name="l01419"></a>01419             u8_i++;
<a name="l01420"></a>01420             u8_size_path++;
<a name="l01421"></a>01421          }
<a name="l01422"></a>01422          status = TRUE;
<a name="l01423"></a>01423       }
<a name="l01424"></a>01424    }
<a name="l01425"></a>01425    <span class="keywordflow">else</span>
<a name="l01426"></a>01426    {  <span class="comment">// Error system</span>
<a name="l01427"></a>01427       status = FALSE;
<a name="l01428"></a>01428    }
<a name="l01429"></a>01429 
<a name="l01430"></a>01430    <span class="comment">// Reinitialise the current position</span>
<a name="l01431"></a>01431    <a class="code" href="a00026.html#503f8d42be2b70cb554589ac7974ed78">nav_gotoindex</a>( &amp;index );
<a name="l01432"></a>01432    <span class="keywordflow">return</span> status;
<a name="l01433"></a>01433 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="47882923fca657fb23001d23b6b5369d"></a><!-- doxytag: member="navigation.c::nav_getindex" ref="47882923fca657fb23001d23b6b5369d" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00003.html">Fs_index</a> nav_getindex           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return a small pointer on the current file system position (disk, partition, dir, file/dir selected ). 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>It is a small index structure with the informations on file system position (disk, partition, dir, file/dir selected )</dd></dl>
<div class="fragment"><pre class="fragment">
//! This routine is interresting to save a file pointer in small variable.
//! This pointer permit to reinit a navigator quickly with nav_gotoindex() routine.
//! </pre></div> 
<p>
&lt; number of logical driver<p>
&lt; number of first cluster of directory selected (0 for the root directory)<p>
&lt; entry offset of file selected in directory selected (unit = FS_SIZE_FILE_ENTRY) 
<p>
Definition at line <a class="el" href="a00042.html#l01016">1016</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00039.html#l00179">Fs_index::u8_lun</a>, <a class="el" href="a00034.html#l00259">Fs_management::u8_lun</a>, <a class="el" href="a00039.html#l00181">Fs_index::u8_partition</a>, and <a class="el" href="a00034.html#l00261">Fs_management::u8_partition</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, <a class="el" href="a00042.html#l01187">nav_dir_name()</a>, <a class="el" href="a00042.html#l02030">nav_file_copy()</a>, <a class="el" href="a00042.html#l01301">nav_getcwd()</a>, <a class="el" href="a00042.html#l00441">nav_partition_label()</a>, and <a class="el" href="a00042.html#l01452">nav_setcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l01017"></a>01017 {
<a name="l01018"></a>01018    <a class="code" href="a00003.html">Fs_index</a> index;
<a name="l01019"></a>01019 
<a name="l01021"></a>01021    index.<a class="code" href="a00003.html#899865da18622a376013236b67e60589">u8_lun</a> = <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a>;
<a name="l01022"></a>01022 <span class="preprocessor">#if (FS_MULTI_PARTITION  ==  ENABLED)</span>
<a name="l01023"></a>01023 <span class="preprocessor"></span>   index.<a class="code" href="a00003.html#b22d052cbc61c0a53fa3b69d66b5c554">u8_partition</a> = <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#af482bc02a186c363c37c93e169fbbd4">u8_partition</a>;
<a name="l01024"></a>01024 <span class="preprocessor">#endif</span>
<a name="l01026"></a>01026 <span class="preprocessor">   index.u32_cluster_sel_dir = fs_g_nav.u32_cluster_sel_dir;</span>
<a name="l01028"></a>01028 <span class="preprocessor">   index.u16_entry_pos_sel_file = fs_g_nav_fast.u16_entry_pos_sel_file;</span>
<a name="l01029"></a>01029 <span class="preprocessor"></span>   <span class="keywordflow">return</span> index;
<a name="l01030"></a>01030 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="503f8d42be2b70cb554589ac7974ed78"></a><!-- doxytag: member="navigation.c::nav_gotoindex" ref="503f8d42be2b70cb554589ac7974ed78" args="(const Fs_index _MEM_TYPE_SLOW_ *index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_gotoindex           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00003.html">Fs_index</a> _MEM_TYPE_SLOW_ *&nbsp;</td>
          <td class="paramname"> <em>index</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction reinit a navigator via a file pointer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>index</em>&nbsp;</td><td>It is a structure with the informations on file system position (disk, partition, dir, file/dir selected )</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! This routine permit to reinit a navigator quickly via file pointer (disk, partition, dir, file/dir selected )
//! To get a file pointer use the routine nav_getindex()
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l01045">1045</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00043.html#l00052">FS_FIND_NEXT</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00042.html#l00236">nav_drive_set()</a>, <a class="el" href="a00042.html#l00563">nav_filelist_reset()</a>, <a class="el" href="a00042.html#l00614">nav_filelist_set()</a>, <a class="el" href="a00042.html#l00373">nav_partition_mount()</a>, <a class="el" href="a00042.html#l00346">nav_partition_set()</a>, <a class="el" href="a00034.html#l00279">Fs_management_fast::u16_entry_pos_sel_file</a>, and <a class="el" href="a00034.html#l00270">Fs_management::u32_cluster_sel_dir</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>, <a class="el" href="a00042.html#l01187">nav_dir_name()</a>, <a class="el" href="a00042.html#l02030">nav_file_copy()</a>, <a class="el" href="a00042.html#l01301">nav_getcwd()</a>, <a class="el" href="a00042.html#l00441">nav_partition_label()</a>, and <a class="el" href="a00042.html#l01452">nav_setcwd()</a>.<div class="fragment"><pre class="fragment"><a name="l01046"></a>01046 {
<a name="l01047"></a>01047    <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#dd247ba4e5086c74c6f106a55617872a">nav_drive_set</a>( index-&gt;u8_lun ))
<a name="l01048"></a>01048       <span class="keywordflow">return</span> FALSE;
<a name="l01049"></a>01049 <span class="preprocessor">#if (FS_MULTI_PARTITION  ==  ENABLED)</span>
<a name="l01050"></a>01050 <span class="preprocessor"></span>   <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#43873b28f4ebbd1f092e7f702ee14c61">nav_partition_set</a>(index-&gt;u8_partition))
<a name="l01051"></a>01051       <span class="keywordflow">return</span> FALSE;
<a name="l01052"></a>01052 <span class="preprocessor">#endif</span>
<a name="l01053"></a>01053 <span class="preprocessor"></span>   <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#aa10a2b4e4db0e4eb602b19b4f9ff9b9">nav_partition_mount</a>())
<a name="l01054"></a>01054       <span class="keywordflow">return</span> FALSE;
<a name="l01055"></a>01055 
<a name="l01056"></a>01056     <span class="comment">// Initialisation of the current entry file with index informations</span>
<a name="l01057"></a>01057    <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#ed8faad36e96ff2f422ddadd3740713f">u32_cluster_sel_dir</a>   = index-&gt;u32_cluster_sel_dir;
<a name="l01058"></a>01058 
<a name="l01059"></a>01059    <span class="comment">// Reset position</span>
<a name="l01060"></a>01060    <span class="keywordflow">if</span> ( !<a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>())
<a name="l01061"></a>01061       <span class="keywordflow">return</span> FALSE;
<a name="l01062"></a>01062 
<a name="l01063"></a>01063    <span class="comment">// Research the index in directory</span>
<a name="l01064"></a>01064    <span class="keywordflow">while</span>( <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> != index-&gt;u16_entry_pos_sel_file )
<a name="l01065"></a>01065    {
<a name="l01066"></a>01066       <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#066eaff61613f07dc5fb1f3313747aef">nav_filelist_set</a>( 0 , <a class="code" href="a00027.html#793c4ce9436637d68ab25dc859abc35a">FS_FIND_NEXT</a> ) )
<a name="l01067"></a>01067       {
<a name="l01068"></a>01068          <a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>();
<a name="l01069"></a>01069          <span class="keywordflow">return</span> FALSE;
<a name="l01070"></a>01070       }
<a name="l01071"></a>01071    }
<a name="l01072"></a>01072    <span class="keywordflow">return</span> TRUE;
<a name="l01073"></a>01073 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="44e5b70be51e852438e086225846cea3"></a><!-- doxytag: member="navigation.c::nav_partition_freespace" ref="44e5b70be51e852438e086225846cea3" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U32 nav_partition_freespace           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the free space of the current partition. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of free sector <p>
0 in case of error or full partition</dd></dl>
<div class="fragment"><pre class="fragment">
//! You shall mount the partition before call this routine
//! </pre></div> 
<p>
Check list before navigation in file 
<p>
Definition at line <a class="el" href="a00042.html#l00519">519</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00099">fat_check_device()</a>, <a class="el" href="a00036.html#l01986">fat_getfreespace()</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00034.html#l00338">FS_TYPE_FAT_UNM</a>, and <a class="el" href="a00034.html#l00278">Fs_management_fast::u8_type_fat</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00520"></a>00520 {
<a name="l00521"></a>00521    <a class="code" href="a00017.html#eeec0bd6755a6be4c4dda2b4669eb0ae">fat_check_device</a>();
<a name="l00522"></a>00522 
<a name="l00524"></a>00524    <span class="keywordflow">if</span> (<a class="code" href="a00018.html#429fbd0498704c3d5864877548040069">FS_TYPE_FAT_UNM</a> == <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#74121fb3c8d3a1d018c911650e2ec920">u8_type_fat</a>)
<a name="l00525"></a>00525       <span class="keywordflow">return</span> 0;
<a name="l00526"></a>00526    <span class="keywordflow">return</span> <a class="code" href="a00018.html#e23270781477be5e6c89b90531c01651">fat_getfreespace</a>();
<a name="l00527"></a>00527 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9e8934635c66157baff2e6bb066ea373"></a><!-- doxytag: member="navigation.c::nav_partition_freespace_percent" ref="9e8934635c66157baff2e6bb066ea373" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U8 nav_partition_freespace_percent           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the space free in percent of the current partition. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>percent of free space (0% to 100%) <p>
0% in case of error or full partition</dd></dl>
<div class="fragment"><pre class="fragment">
//! To speed up the compute, the resultat have a error delta of 1%
//! </pre></div> 
<p>
Check list before navigation in file 
<p>
Definition at line <a class="el" href="a00042.html#l00539">539</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00099">fat_check_device()</a>, <a class="el" href="a00036.html#l02049">fat_getfreespace_percent()</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00034.html#l00338">FS_TYPE_FAT_UNM</a>, and <a class="el" href="a00034.html#l00278">Fs_management_fast::u8_type_fat</a>.<div class="fragment"><pre class="fragment"><a name="l00540"></a>00540 {
<a name="l00541"></a>00541    <a class="code" href="a00017.html#eeec0bd6755a6be4c4dda2b4669eb0ae">fat_check_device</a>();
<a name="l00542"></a>00542 
<a name="l00544"></a>00544    <span class="keywordflow">if</span> (<a class="code" href="a00018.html#429fbd0498704c3d5864877548040069">FS_TYPE_FAT_UNM</a> == <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#74121fb3c8d3a1d018c911650e2ec920">u8_type_fat</a>)
<a name="l00545"></a>00545       <span class="keywordflow">return</span> 0;
<a name="l00546"></a>00546    <span class="keywordflow">return</span> <a class="code" href="a00018.html#14426d5552b72b88ea0d61828c57d6c6">fat_getfreespace_percent</a>();
<a name="l00547"></a>00547 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c2ac7612e00c937c8d83433d2143a4f0"></a><!-- doxytag: member="navigation.c::nav_partition_label" ref="c2ac7612e00c937c8d83433d2143a4f0" args="(Bool b_action, FS_STRING sz_label)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_partition_label           </td>
          <td>(</td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_label</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction read or write the label of current partition selected. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b_action</em>&nbsp;</td><td>to select the action <br>
 FS_LABEL_READ to read label <br>
 FS_LABEL_WRITE to write label <br>
 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sz_label</em>&nbsp;</td><td>pointer on a string ASCII of 11 characters + NULL terminator (=12 bytes) <br>
 if FS_LABEL_READ, then use to store label <br>
 if FS_LABEL_WRITE, then use to pass the new label <br>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00441">441</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00036.html#l01061">fat_entry_label()</a>, <a class="el" href="a00033.html#l01184">fat_read_dir()</a>, <a class="el" href="a00039.html#l00201">FS_ERR_ENTRY_EMPTY</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00039.html#l00098">FS_LABEL_READ</a>, <a class="el" href="a00039.html#l00099">FS_LABEL_WRITE</a>, <a class="el" href="a00042.html#l01089">nav_dir_root()</a>, <a class="el" href="a00042.html#l01016">nav_getindex()</a>, <a class="el" href="a00042.html#l01045">nav_gotoindex()</a>, and <a class="el" href="a00034.html#l00279">Fs_management_fast::u16_entry_pos_sel_file</a>.<div class="fragment"><pre class="fragment"><a name="l00442"></a>00442 {
<a name="l00443"></a>00443    _MEM_TYPE_SLOW_   <a class="code" href="a00003.html">Fs_index</a> index;
<a name="l00444"></a>00444    Bool status = TRUE;
<a name="l00445"></a>00445          
<a name="l00446"></a>00446    <span class="comment">// Save index</span>
<a name="l00447"></a>00447    index = <a class="code" href="a00026.html#47882923fca657fb23001d23b6b5369d">nav_getindex</a>();       <span class="comment">// Save current position</span>
<a name="l00448"></a>00448 
<a name="l00449"></a>00449    <span class="comment">// Go to root dir</span>
<a name="l00450"></a>00450    <span class="keywordflow">if</span>( <a class="code" href="a00026.html#9447385c9c400b07b99c61ada1a6ea77">nav_dir_root</a>())
<a name="l00451"></a>00451    {
<a name="l00452"></a>00452       <span class="comment">// find field label</span>
<a name="l00453"></a>00453       <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a> = 0; <span class="comment">// Go to first entry</span>
<a name="l00454"></a>00454       <span class="keywordflow">while</span>( 1 )
<a name="l00455"></a>00455       {
<a name="l00456"></a>00456          <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#1a35321a99150ba643f87cb6c79ec3e5">fat_read_dir</a>())
<a name="l00457"></a>00457          {
<a name="l00458"></a>00458             status = FALSE;
<a name="l00459"></a>00459             <span class="keywordflow">break</span>; <span class="comment">// error</span>
<a name="l00460"></a>00460          } 
<a name="l00461"></a>00461          
<a name="l00462"></a>00462          <span class="keywordflow">if</span>( <a class="code" href="a00018.html#a03d2728f28964e1eb4d78c2bb831718">fat_entry_label</a>( <a class="code" href="a00023.html#c1570dd392605e8ff8f7d4cb16487830">FS_LABEL_READ</a> , NULL ) )
<a name="l00463"></a>00463             <span class="keywordflow">break</span>;
<a name="l00464"></a>00464          <span class="keywordflow">if</span>( <a class="code" href="a00023.html#33817136df196a5f0146574b4e1775b6">FS_ERR_ENTRY_EMPTY</a> == <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> )
<a name="l00465"></a>00465             <span class="keywordflow">break</span>;
<a name="l00466"></a>00466          <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#9f50297ed427918e54da99b8c4fbaf04">u16_entry_pos_sel_file</a>++;
<a name="l00467"></a>00467       }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469       <span class="keywordflow">if</span>( TRUE == status )
<a name="l00470"></a>00470       {
<a name="l00471"></a>00471          <span class="comment">// Find OK</span>
<a name="l00472"></a>00472          <span class="keywordflow">if</span>( <a class="code" href="a00023.html#c1570dd392605e8ff8f7d4cb16487830">FS_LABEL_READ</a> == b_action )
<a name="l00473"></a>00473          {
<a name="l00474"></a>00474             <span class="comment">// change field label</span>
<a name="l00475"></a>00475             <span class="keywordflow">if</span>( !<a class="code" href="a00018.html#a03d2728f28964e1eb4d78c2bb831718">fat_entry_label</a>( <a class="code" href="a00023.html#c1570dd392605e8ff8f7d4cb16487830">FS_LABEL_READ</a> , sz_label ) )
<a name="l00476"></a>00476                sz_label[0]=0; <span class="comment">// empty name</span>
<a name="l00477"></a>00477          }<span class="keywordflow">else</span>{
<a name="l00478"></a>00478             <span class="comment">// change field label</span>
<a name="l00479"></a>00479             status = <a class="code" href="a00018.html#a03d2728f28964e1eb4d78c2bb831718">fat_entry_label</a>( <a class="code" href="a00023.html#c5e191f04380ef238255929695f8efcb">FS_LABEL_WRITE</a> , sz_label );
<a name="l00480"></a>00480          }
<a name="l00481"></a>00481       }  
<a name="l00482"></a>00482    }
<a name="l00483"></a>00483    <span class="comment">// Restore index</span>
<a name="l00484"></a>00484    <a class="code" href="a00026.html#503f8d42be2b70cb554589ac7974ed78">nav_gotoindex</a>( &amp;index );
<a name="l00485"></a>00485    <span class="keywordflow">return</span> status;
<a name="l00486"></a>00486 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="aa10a2b4e4db0e4eb602b19b4f9ff9b9"></a><!-- doxytag: member="navigation.c::nav_partition_mount" ref="aa10a2b4e4db0e4eb602b19b4f9ff9b9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_partition_mount           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction mount the current partition selected. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! If the option FS_MULTI_PARTITION is disable
//! then the mount routine select the first partition supported by file system. &lt;br&gt;
//! After mount, the file list corresponding at the files and directorys present in ROOT directory 
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00373">373</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00177">fat_check_noopen()</a>, <a class="el" href="a00033.html#l01382">fat_clear_entry_info_and_ptr()</a>, <a class="el" href="a00036.html#l00106">fat_mount()</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00034.html#l00338">FS_TYPE_FAT_UNM</a>, <a class="el" href="a00034.html#l00270">Fs_management::u32_cluster_sel_dir</a>, and <a class="el" href="a00034.html#l00278">Fs_management_fast::u8_type_fat</a>.
<p>
Referenced by <a class="el" href="a00040.html#l00384">fsaccess_IsDirPresent()</a>, <a class="el" href="a00035.html#l00571">main()</a>, <a class="el" href="a00042.html#l01089">nav_dir_root()</a>, <a class="el" href="a00042.html#l01045">nav_gotoindex()</a>, <a class="el" href="a00042.html#l00397">nav_partition_type()</a>, <a class="el" href="a00042.html#l01452">nav_setcwd()</a>, and <a class="el" href="a00040.html#l00104">open()</a>.<div class="fragment"><pre class="fragment"><a name="l00374"></a>00374 {
<a name="l00375"></a>00375    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#f6f4a9e2d8e7b6dd557871b6bc2c2ee0">fat_check_noopen</a>() )
<a name="l00376"></a>00376       <span class="keywordflow">return</span> FALSE;
<a name="l00377"></a>00377 
<a name="l00378"></a>00378    <span class="keywordflow">if</span>( <a class="code" href="a00018.html#429fbd0498704c3d5864877548040069">FS_TYPE_FAT_UNM</a> != <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#74121fb3c8d3a1d018c911650e2ec920">u8_type_fat</a>)
<a name="l00379"></a>00379    {
<a name="l00380"></a>00380       <span class="comment">// Already mount</span>
<a name="l00381"></a>00381       <span class="comment">// Go to root directory</span>
<a name="l00382"></a>00382       <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#ed8faad36e96ff2f422ddadd3740713f">u32_cluster_sel_dir</a>   = 0;
<a name="l00383"></a>00383       <span class="comment">// No file is selected</span>
<a name="l00384"></a>00384       <a class="code" href="a00017.html#56d9a210bc2d4b0b5c46cb24a2e9f690">fat_clear_entry_info_and_ptr</a>();
<a name="l00385"></a>00385       <span class="keywordflow">return</span> TRUE;
<a name="l00386"></a>00386    }
<a name="l00387"></a>00387 
<a name="l00388"></a>00388    <span class="keywordflow">return</span> <a class="code" href="a00018.html#c0108ea608b547e8d3a405c70644c1e9">fat_mount</a>(); <span class="comment">// mount the current partition and device</span>
<a name="l00389"></a>00389 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a50a8525f7c598dcfebcbe63aa2dfc23"></a><!-- doxytag: member="navigation.c::nav_partition_nb" ref="a50a8525f7c598dcfebcbe63aa2dfc23" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U8 nav_partition_nb           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the number of partition present on current drive selected. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>u8_number number of partition </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00333">333</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00304">fat_get_nbpartition()</a>.<div class="fragment"><pre class="fragment"><a name="l00334"></a>00334 {
<a name="l00335"></a>00335    <span class="keywordflow">return</span> <a class="code" href="a00017.html#920798e6366e8c3c408601c58fed4bb3">fat_get_nbpartition</a>();
<a name="l00336"></a>00336 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="14cf001b6b84590bd3da1f3809844f03"></a><!-- doxytag: member="navigation.c::nav_partition_serialnumber" ref="14cf001b6b84590bd3da1f3809844f03" args="(Bool b_action, U8 _MEM_TYPE_SLOW_ *a_u8_sn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_partition_serialnumber           </td>
          <td>(</td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">U8 _MEM_TYPE_SLOW_ *&nbsp;</td>
          <td class="paramname"> <em>a_u8_sn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction read or write the serial number of current partition selected. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b_action</em>&nbsp;</td><td>to select the action <br>
 FS_SN_READ to read serial number <br>
 FS_SN_WRITE to write serial number <br>
 </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>a_u8_sn</em>&nbsp;</td><td>pointer on a array of 4 bytes <br>
 if FS_SN_READ, then use to store serial number <br>
 if FS_SN_WRITE, then use to pass the new serial number <br>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00420">420</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00157">fat_check_mount()</a>, and <a class="el" href="a00036.html#l01017">fat_serialnumber()</a>.<div class="fragment"><pre class="fragment"><a name="l00421"></a>00421 {
<a name="l00422"></a>00422    <span class="keywordflow">if</span>( !<a class="code" href="a00017.html#8ee865aa4c51519c0d141f1f4559c72a">fat_check_mount</a>())
<a name="l00423"></a>00423       <span class="keywordflow">return</span> FALSE;
<a name="l00424"></a>00424       
<a name="l00425"></a>00425    <span class="keywordflow">return</span> <a class="code" href="a00018.html#2ff43f97db7a5d76f46f4fb1b683d192">fat_serialnumber</a>( b_action , a_u8_sn );
<a name="l00426"></a>00426 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="43873b28f4ebbd1f092e7f702ee14c61"></a><!-- doxytag: member="navigation.c::nav_partition_set" ref="43873b28f4ebbd1f092e7f702ee14c61" args="(U8 partition_number)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_partition_set           </td>
          <td>(</td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>partition_number</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction select a partition available on current drive. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>partition_number</em>&nbsp;</td><td>partition number (0 to 3)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00346">346</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00177">fat_check_noopen()</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00034.html#l00338">FS_TYPE_FAT_UNM</a>, <a class="el" href="a00034.html#l00261">Fs_management::u8_partition</a>, and <a class="el" href="a00034.html#l00278">Fs_management_fast::u8_type_fat</a>.
<p>
Referenced by <a class="el" href="a00042.html#l01045">nav_gotoindex()</a>.<div class="fragment"><pre class="fragment"><a name="l00347"></a>00347 {
<a name="l00348"></a>00348    <span class="keywordflow">if</span> ( <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#af482bc02a186c363c37c93e169fbbd4">u8_partition</a> == partition_number)
<a name="l00349"></a>00349       <span class="keywordflow">return</span> TRUE;   <span class="comment">// It is the same</span>
<a name="l00350"></a>00350       
<a name="l00351"></a>00351    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#f6f4a9e2d8e7b6dd557871b6bc2c2ee0">fat_check_noopen</a>() )
<a name="l00352"></a>00352       <span class="keywordflow">return</span> FALSE;
<a name="l00353"></a>00353 
<a name="l00354"></a>00354    <span class="comment">// Go to partition</span>
<a name="l00355"></a>00355    <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#af482bc02a186c363c37c93e169fbbd4">u8_partition</a> = partition_number;
<a name="l00356"></a>00356    <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#74121fb3c8d3a1d018c911650e2ec920">u8_type_fat</a> = <a class="code" href="a00018.html#429fbd0498704c3d5864877548040069">FS_TYPE_FAT_UNM</a>;
<a name="l00357"></a>00357    <span class="keywordflow">return</span> TRUE;
<a name="l00358"></a>00358 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="24053c9202d6999e9e56e96b3b89703e"></a><!-- doxytag: member="navigation.c::nav_partition_space" ref="24053c9202d6999e9e56e96b3b89703e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U32 nav_partition_space           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction return the total space of the current partition. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>number of sector <p>
0, in case of error</dd></dl>
<div class="fragment"><pre class="fragment">
//! You shall mount the partition before call this routine
//! </pre></div> 
<p>
Check list before navigation in file 
<p>
Definition at line <a class="el" href="a00042.html#l00498">498</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00099">fat_check_device()</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00034.html#l00338">FS_TYPE_FAT_UNM</a>, <a class="el" href="a00034.html#l00266">Fs_management::u32_CountofCluster</a>, <a class="el" href="a00034.html#l00263">Fs_management::u8_BPB_SecPerClus</a>, and <a class="el" href="a00034.html#l00278">Fs_management_fast::u8_type_fat</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00499"></a>00499 {
<a name="l00500"></a>00500    <a class="code" href="a00017.html#eeec0bd6755a6be4c4dda2b4669eb0ae">fat_check_device</a>();
<a name="l00501"></a>00501 
<a name="l00503"></a>00503    <span class="keywordflow">if</span> (<a class="code" href="a00018.html#429fbd0498704c3d5864877548040069">FS_TYPE_FAT_UNM</a> == <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#74121fb3c8d3a1d018c911650e2ec920">u8_type_fat</a>)
<a name="l00504"></a>00504       <span class="keywordflow">return</span> 0;
<a name="l00505"></a>00505       
<a name="l00506"></a>00506    <span class="keywordflow">return</span> (<a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#2f9e0c9af661ea927729c08280e1105e">u32_CountofCluster</a> * <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#cddebea9972567fdcb5b87327b48125e">u8_BPB_SecPerClus</a>);
<a name="l00507"></a>00507 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="366957a6691432a94f9ec5d82039eebc"></a><!-- doxytag: member="navigation.c::nav_partition_type" ref="366957a6691432a94f9ec5d82039eebc" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">U8 nav_partition_type           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction give the partition type. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>partition type : FS_TYPE_FAT_12, FS_TYPE_FAT_16, FS_TYPE_FAT_32 <p>
FS_TYPE_FAT_UNM, in case error or unknow format </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00397">397</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00099">fat_check_device()</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00034.html#l00338">FS_TYPE_FAT_UNM</a>, <a class="el" href="a00042.html#l00373">nav_partition_mount()</a>, and <a class="el" href="a00034.html#l00278">Fs_management_fast::u8_type_fat</a>.
<p>
Referenced by <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00398"></a>00398 {
<a name="l00399"></a>00399    <a class="code" href="a00017.html#eeec0bd6755a6be4c4dda2b4669eb0ae">fat_check_device</a>();
<a name="l00400"></a>00400    <span class="keywordflow">if</span>( <a class="code" href="a00018.html#429fbd0498704c3d5864877548040069">FS_TYPE_FAT_UNM</a> == <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#74121fb3c8d3a1d018c911650e2ec920">u8_type_fat</a>)
<a name="l00401"></a>00401    {
<a name="l00402"></a>00402       <a class="code" href="a00026.html#aa10a2b4e4db0e4eb602b19b4f9ff9b9">nav_partition_mount</a>();
<a name="l00403"></a>00403    }
<a name="l00404"></a>00404    <span class="keywordflow">return</span> <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#74121fb3c8d3a1d018c911650e2ec920">u8_type_fat</a>;
<a name="l00405"></a>00405 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="605dfecfa334f8ced2cebfa5162a931b"></a><!-- doxytag: member="navigation.c::nav_reset" ref="605dfecfa334f8ced2cebfa5162a931b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nav_reset           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction reset ALL navigations to init file sytem module. 
<p>
<div class="fragment"><pre class="fragment">
//! Call this one at the startup of program
//! or after a other program have change the disk (write disk access)
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00108">108</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00897">fat_cache_clusterlist_reset()</a>, <a class="el" href="a00033.html#l01778">fat_cache_reset()</a>, <a class="el" href="a00034.html#l00356">Fat_file_close</a>, <a class="el" href="a00034.html#l00369">fs_g_nav</a>, <a class="el" href="a00034.html#l00370">fs_g_nav_fast</a>, <a class="el" href="a00042.html#l00063">fs_g_u8_nav_selected</a>, <a class="el" href="a00030.html#l00086">FS_NB_NAVIGATOR</a>, <a class="el" href="a00034.html#l00338">FS_TYPE_FAT_UNM</a>, <a class="el" href="a00034.html#l00365">g_b_unicode</a>, <a class="el" href="a00042.html#l00152">nav_select()</a>, <a class="el" href="a00034.html#l00259">Fs_management::u8_lun</a>, <a class="el" href="a00034.html#l00261">Fs_management::u8_partition</a>, and <a class="el" href="a00034.html#l00278">Fs_management_fast::u8_type_fat</a>.
<p>
Referenced by <a class="el" href="a00040.html#l00337">b_fsaccess_init()</a>, and <a class="el" href="a00035.html#l00571">main()</a>.<div class="fragment"><pre class="fragment"><a name="l00109"></a>00109 {
<a name="l00110"></a>00110 <span class="preprocessor">#if ( (FS_ASCII   == ENABLED) &amp;&amp; (FS_UNICODE == ENABLED))</span>
<a name="l00111"></a>00111 <span class="preprocessor"></span>   <a class="code" href="a00018.html#fdc963fda511dd9e790c81b6a6b33d34">g_b_unicode</a> = TRUE;
<a name="l00112"></a>00112 <span class="preprocessor">#endif</span>
<a name="l00113"></a>00113 <span class="preprocessor"></span>
<a name="l00114"></a>00114    <a class="code" href="a00017.html#961692919a93b6cb714ec2a3d57c0141">fat_cache_reset</a>();
<a name="l00115"></a>00115    <a class="code" href="a00017.html#ecb0d4c200bed41b8bdcf671aa931a2a">fat_cache_clusterlist_reset</a>();
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 <span class="preprocessor">#if (FS_NB_NAVIGATOR &gt; 1)</span>
<a name="l00118"></a>00118 <span class="preprocessor"></span>   {
<a name="l00119"></a>00119    U8 i;
<a name="l00120"></a>00120    <span class="comment">// Reset variable of all navigators</span>
<a name="l00121"></a>00121    <span class="keywordflow">for</span>( i=0 ; i!=<a class="code" href="a00014.html#8ab6bd77e49639be7dc419bcf66bd73f">FS_NB_NAVIGATOR</a> ; i++ )
<a name="l00122"></a>00122    {
<a name="l00123"></a>00123       <a class="code" href="a00026.html#7fac26539a62daf547b5eb159f6a43d4">nav_select</a>(i);
<a name="l00124"></a>00124       <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#74121fb3c8d3a1d018c911650e2ec920">u8_type_fat</a> = <a class="code" href="a00018.html#429fbd0498704c3d5864877548040069">FS_TYPE_FAT_UNM</a>; <span class="comment">// By default the fat isn't mounted</span>
<a name="l00125"></a>00125       <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a> = 0xFF;                      <span class="comment">// By default select drive 0</span>
<a name="l00126"></a>00126 <span class="preprocessor">#if (FS_MULTI_PARTITION  ==  ENABLED)</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span>      <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#af482bc02a186c363c37c93e169fbbd4">u8_partition</a>=0;                     <span class="comment">// By default select the first partition</span>
<a name="l00128"></a>00128 <span class="preprocessor">#endif</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span>      <a class="code" href="a00018.html#8e3b3ddad0e2b4f1747507a2665b0901">Fat_file_close</a>;                              <span class="comment">// By default the file is not open</span>
<a name="l00130"></a>00130    }
<a name="l00131"></a>00131    <span class="comment">// Reset variable of default navigator</span>
<a name="l00132"></a>00132    <a class="code" href="a00026.html#b84a05017e426fd46d9eb3698642f133">fs_g_u8_nav_selected</a> = 0;
<a name="l00133"></a>00133    }
<a name="l00134"></a>00134 <span class="preprocessor">#else</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>   <a class="code" href="a00018.html#14ab00294275fb02f822b22d7dcc6b13">fs_g_nav_fast</a>.<a class="code" href="a00006.html#74121fb3c8d3a1d018c911650e2ec920">u8_type_fat</a> = <a class="code" href="a00018.html#429fbd0498704c3d5864877548040069">FS_TYPE_FAT_UNM</a>; <span class="comment">// By default the fat isn't mounted</span>
<a name="l00136"></a>00136    <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#43065262a1a7560b143e0b48cbf5ccbd">u8_lun</a> = 0xFF;                      <span class="comment">// By default select drive 0</span>
<a name="l00137"></a>00137 <span class="preprocessor">#  if (FS_MULTI_PARTITION  ==  ENABLED)</span>
<a name="l00138"></a>00138 <span class="preprocessor"></span>   <a class="code" href="a00018.html#5c5e563664aa146853ff976ce0b412ec">fs_g_nav</a>.<a class="code" href="a00004.html#af482bc02a186c363c37c93e169fbbd4">u8_partition</a>=0;                     <span class="comment">// By default select the first partition</span>
<a name="l00139"></a>00139 <span class="preprocessor">#  endif</span>
<a name="l00140"></a>00140 <span class="preprocessor"></span>   <a class="code" href="a00018.html#8e3b3ddad0e2b4f1747507a2665b0901">Fat_file_close</a>;                              <span class="comment">// By default the file is not open</span>
<a name="l00141"></a>00141 <span class="preprocessor">#endif // (FS_NB_NAVIGATOR &gt; 1)</span>
<a name="l00142"></a>00142 <span class="preprocessor"></span>}
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7fac26539a62daf547b5eb159f6a43d4"></a><!-- doxytag: member="navigation.c::nav_select" ref="7fac26539a62daf547b5eb159f6a43d4" args="(U8 u8_idnav)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_select           </td>
          <td>(</td>
          <td class="paramtype">U8&nbsp;</td>
          <td class="paramname"> <em>u8_idnav</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction select the current navigation to use. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u8_idnav</em>&nbsp;</td><td>Id navigator to select (0 to FS_NB_NAVIGATOR-1)</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE if ID navigator don't exist <p>
TRUE otherwise </dd></dl>

<p>
Definition at line <a class="el" href="a00042.html#l00152">152</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l01918">fat_invert_nav()</a>, <a class="el" href="a00039.html#l00230">FS_ERR_BAD_NAV</a>, <a class="el" href="a00039.html#l00257">fs_g_status</a>, <a class="el" href="a00042.html#l00063">fs_g_u8_nav_selected</a>, and <a class="el" href="a00030.html#l00086">FS_NB_NAVIGATOR</a>.
<p>
Referenced by <a class="el" href="a00040.html#l00277">close()</a>, <a class="el" href="a00040.html#l00185">fsaccess_file_get_size()</a>, <a class="el" href="a00040.html#l00384">fsaccess_IsDirPresent()</a>, <a class="el" href="a00042.html#l02030">nav_file_copy()</a>, <a class="el" href="a00042.html#l02065">nav_file_paste_start()</a>, <a class="el" href="a00042.html#l02112">nav_file_paste_state()</a>, <a class="el" href="a00042.html#l00108">nav_reset()</a>, <a class="el" href="a00040.html#l00104">open()</a>, <a class="el" href="a00040.html#l00213">read()</a>, and <a class="el" href="a00040.html#l00250">write()</a>.<div class="fragment"><pre class="fragment"><a name="l00153"></a>00153 {
<a name="l00154"></a>00154    <span class="keywordflow">if</span>( <a class="code" href="a00014.html#8ab6bd77e49639be7dc419bcf66bd73f">FS_NB_NAVIGATOR</a> &lt;= u8_idnav )
<a name="l00155"></a>00155    {
<a name="l00156"></a>00156       <a class="code" href="a00023.html#3eebd84ddd08a3d4163af24e2722de3c">fs_g_status</a> = <a class="code" href="a00023.html#6557aec2700008a7501b91d368116ae2">FS_ERR_BAD_NAV</a>; <span class="comment">// The navigator doesn't exist</span>
<a name="l00157"></a>00157       <span class="keywordflow">return</span> FALSE;
<a name="l00158"></a>00158    }
<a name="l00159"></a>00159 <span class="preprocessor">#if (FS_NB_NAVIGATOR &gt; 1)</span>
<a name="l00160"></a>00160 <span class="preprocessor"></span>   <span class="keywordflow">if</span>( <a class="code" href="a00026.html#b84a05017e426fd46d9eb3698642f133">fs_g_u8_nav_selected</a> != u8_idnav )
<a name="l00161"></a>00161    {
<a name="l00162"></a>00162       <a class="code" href="a00017.html#65cfc6e07b1a1bc3a12d564148daca37">fat_invert_nav</a>( <a class="code" href="a00026.html#b84a05017e426fd46d9eb3698642f133">fs_g_u8_nav_selected</a> );   <span class="comment">// Deselect previous navigator = Select default navigator</span>
<a name="l00163"></a>00163       <a class="code" href="a00017.html#65cfc6e07b1a1bc3a12d564148daca37">fat_invert_nav</a>( u8_idnav );               <span class="comment">// Select new navigator</span>
<a name="l00164"></a>00164       <a class="code" href="a00026.html#b84a05017e426fd46d9eb3698642f133">fs_g_u8_nav_selected</a> = u8_idnav;
<a name="l00165"></a>00165    }
<a name="l00166"></a>00166 <span class="preprocessor">#endif</span>
<a name="l00167"></a>00167 <span class="preprocessor"></span>   <span class="keywordflow">return</span> TRUE;
<a name="l00168"></a>00168 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="3d3f2ed17daf26a7aedc2a561cee2558"></a><!-- doxytag: member="navigation.c::nav_setcwd" ref="3d3f2ed17daf26a7aedc2a561cee2558" args="(FS_STRING sz_path, Bool b_match_case, Bool b_create)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Bool nav_setcwd           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a>&nbsp;</td>
          <td class="paramname"> <em>sz_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_match_case</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Bool&nbsp;</td>
          <td class="paramname"> <em>b_create</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction init navigator position via a path. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sz_path</em>&nbsp;</td><td>buffer with the path (ASCII or UNICODE ) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b_match_case</em>&nbsp;</td><td>FALSE to ignore the case </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>b_create</em>&nbsp;</td><td>TRUE, if path no exist then create it <br>
 FALSE, no create path <br>
</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>FALSE in case of error, see global value "fs_g_status" for more detail <p>
TRUE otherwise</dd></dl>
<div class="fragment"><pre class="fragment">
//! The syntact "./../../file_name" is supported.
//! With syntact "./dir_parent/directory_name"  the file list corresponding at "dir_parent" and "directory_name" is selected.
//! With syntact "./dir_parent/directory_name/" the file list corresponding at "directory_name" and no file is selected.
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l01452">1452</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00033.html#l00177">fat_check_noopen()</a>, <a class="el" href="a00033.html#l01373">fat_entry_is_dir()</a>, <a class="el" href="a00034.html#l00094">Is_unicode</a>, <a class="el" href="a00042.html#l01106">nav_dir_cd()</a>, <a class="el" href="a00042.html#l01136">nav_dir_gotoparent()</a>, <a class="el" href="a00042.html#l01253">nav_dir_make()</a>, <a class="el" href="a00042.html#l01089">nav_dir_root()</a>, <a class="el" href="a00042.html#l00236">nav_drive_set()</a>, <a class="el" href="a00042.html#l01994">nav_file_create()</a>, <a class="el" href="a00042.html#l00793">nav_filelist_findname()</a>, <a class="el" href="a00042.html#l00563">nav_filelist_reset()</a>, <a class="el" href="a00042.html#l01016">nav_getindex()</a>, <a class="el" href="a00042.html#l01045">nav_gotoindex()</a>, and <a class="el" href="a00042.html#l00373">nav_partition_mount()</a>.
<p>
Referenced by <a class="el" href="a00040.html#l00384">fsaccess_IsDirPresent()</a>, <a class="el" href="a00035.html#l00571">main()</a>, and <a class="el" href="a00040.html#l00104">open()</a>.<div class="fragment"><pre class="fragment"><a name="l01453"></a>01453 {
<a name="l01454"></a>01454    _MEM_TYPE_SLOW_   <a class="code" href="a00003.html">Fs_index</a> index;
<a name="l01455"></a>01455    <a class="code" href="a00023.html#80aede4102ec34e739482902f716915a">FS_STRING</a> sz_save_path = 0;
<a name="l01456"></a>01456    Bool b_create_name = FALSE;
<a name="l01457"></a>01457 
<a name="l01458"></a>01458    <span class="keywordflow">if</span> ( !<a class="code" href="a00017.html#f6f4a9e2d8e7b6dd557871b6bc2c2ee0">fat_check_noopen</a>())
<a name="l01459"></a>01459       <span class="keywordflow">return</span> FALSE;
<a name="l01460"></a>01460 
<a name="l01461"></a>01461    <span class="comment">// Save current position</span>
<a name="l01462"></a>01462    index = <a class="code" href="a00026.html#47882923fca657fb23001d23b6b5369d">nav_getindex</a>();
<a name="l01463"></a>01463 
<a name="l01464"></a>01464    <span class="comment">// Check syntact "\path..."</span>
<a name="l01465"></a>01465    <span class="keywordflow">if</span>( (( <a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a>) &amp;&amp; ((<span class="charliteral">'\\'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0]) || (<span class="charliteral">'/'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0])) )
<a name="l01466"></a>01466    ||  ((!<a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a>) &amp;&amp; ((<span class="charliteral">'\\'</span>  == sz_path [0]) || (<span class="charliteral">'/'</span>  == sz_path [0])) ) )
<a name="l01467"></a>01467    {
<a name="l01468"></a>01468       <span class="comment">// Go to root dir of current drive</span>
<a name="l01469"></a>01469       <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#9447385c9c400b07b99c61ada1a6ea77">nav_dir_root</a>())
<a name="l01470"></a>01470          <span class="keywordflow">goto</span> nav_setcwd_fail;
<a name="l01471"></a>01471       sz_path  += (<a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a>? 2 : 1 );
<a name="l01472"></a>01472    }<span class="keywordflow">else</span>
<a name="l01473"></a>01473    
<a name="l01474"></a>01474    <span class="comment">// Check syntact "x:\path..."</span>
<a name="l01475"></a>01475    <span class="keywordflow">if</span>( (( <a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a>) &amp;&amp; (( <span class="charliteral">':'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[1] ) &amp;&amp; ((<span class="charliteral">'\\'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[2] ) || (<span class="charliteral">'/'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[2]))) )
<a name="l01476"></a>01476    ||  ((!<a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a>) &amp;&amp; (( <span class="charliteral">':'</span>  == sz_path [1] ) &amp;&amp; ((<span class="charliteral">'\\'</span>  == sz_path [2] ) || (<span class="charliteral">'/'</span>  == sz_path [2]))) ) )
<a name="l01477"></a>01477    {
<a name="l01478"></a>01478       <span class="comment">// Go to drive</span>
<a name="l01479"></a>01479       <span class="keywordflow">if</span>( <a class="code" href="a00018.html#4ad00946d48b5c25c6734344ecf974c1">Is_unicode</a> )
<a name="l01480"></a>01480       {
<a name="l01481"></a>01481          <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#dd247ba4e5086c74c6f106a55617872a">nav_drive_set</a>( ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0]-<span class="charliteral">'A'</span> ) )
<a name="l01482"></a>01482             <span class="keywordflow">goto</span> nav_setcwd_fail;
<a name="l01483"></a>01483       }<span class="keywordflow">else</span>{
<a name="l01484"></a>01484          <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#dd247ba4e5086c74c6f106a55617872a">nav_drive_set</a>( sz_path [0]-<span class="charliteral">'A'</span> ) )
<a name="l01485"></a>01485             <span class="keywordflow">goto</span> nav_setcwd_fail;
<a name="l01486"></a>01486       }
<a name="l01487"></a>01487       <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#aa10a2b4e4db0e4eb602b19b4f9ff9b9">nav_partition_mount</a>())
<a name="l01488"></a>01488          <span class="keywordflow">goto</span> nav_setcwd_fail;
<a name="l01489"></a>01489       sz_path  += 3*(Is_unicode? 2 : 1 );
<a name="l01490"></a>01490    }<span class="keywordflow">else</span>
<a name="l01491"></a>01491 
<a name="l01492"></a>01492    <span class="comment">// Check syntact ".\path..."</span>
<a name="l01493"></a>01493    <span class="keywordflow">if</span>( (( Is_unicode) &amp;&amp; (( <span class="charliteral">'.'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0] ) &amp;&amp; ((<span class="charliteral">'\\'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[1] ) || (<span class="charliteral">'/'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[1] ))) )
<a name="l01494"></a>01494    ||  ((!Is_unicode) &amp;&amp; (( <span class="charliteral">'.'</span>  == sz_path [0] ) &amp;&amp; ((<span class="charliteral">'\\'</span>  == sz_path [1] ) || (<span class="charliteral">'/'</span>  == sz_path [1] ))) ) )
<a name="l01495"></a>01495    {
<a name="l01496"></a>01496       <span class="comment">// Search in current directory</span>
<a name="l01497"></a>01497       sz_path  += 2*(Is_unicode? 2 : 1 );
<a name="l01498"></a>01498    }<span class="keywordflow">else</span>
<a name="l01499"></a>01499    
<a name="l01500"></a>01500    {
<a name="l01501"></a>01501       <span class="comment">// Check syntact "..\..\path..."</span>
<a name="l01502"></a>01502       <span class="keywordflow">if</span>( Is_unicode )
<a name="l01503"></a>01503       {
<a name="l01504"></a>01504          <span class="keywordflow">while</span>(( <span class="charliteral">'.'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0] )
<a name="l01505"></a>01505          &amp;&amp;    ( <span class="charliteral">'.'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[1] )
<a name="l01506"></a>01506          &amp;&amp;    ((<span class="charliteral">'\\'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[2]) || (<span class="charliteral">'/'</span>  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[2]) || (0  == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[2])) )
<a name="l01507"></a>01507          {
<a name="l01508"></a>01508             <span class="comment">// Go to parent directory</span>
<a name="l01509"></a>01509             <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#b37aa8fc84aca800a020da78724d729e">nav_dir_gotoparent</a>() )
<a name="l01510"></a>01510                <span class="keywordflow">goto</span> nav_setcwd_fail;
<a name="l01511"></a>01511             sz_path  += (2*2); <span class="comment">// jump ".."</span>
<a name="l01512"></a>01512             <span class="keywordflow">if</span>( 0 != ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0])
<a name="l01513"></a>01513                sz_path  += (2*1); <span class="comment">// jump "/"</span>
<a name="l01514"></a>01514          }
<a name="l01515"></a>01515       }<span class="keywordflow">else</span>{
<a name="l01516"></a>01516          <span class="keywordflow">while</span>(( <span class="charliteral">'.'</span>  == sz_path [0] )
<a name="l01517"></a>01517          &amp;&amp;    ( <span class="charliteral">'.'</span>  == sz_path [1] )
<a name="l01518"></a>01518          &amp;&amp;    ((<span class="charliteral">'\\'</span>  == sz_path [2]) || (<span class="charliteral">'/'</span>  == sz_path [2]) || (0  == sz_path [2])) )
<a name="l01519"></a>01519          {
<a name="l01520"></a>01520          <span class="comment">// Go to parent directory</span>
<a name="l01521"></a>01521          <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#b37aa8fc84aca800a020da78724d729e">nav_dir_gotoparent</a>() )
<a name="l01522"></a>01522             <span class="keywordflow">goto</span> nav_setcwd_fail;
<a name="l01523"></a>01523             sz_path  += 2; <span class="comment">// jump ".."</span>
<a name="l01524"></a>01524             <span class="keywordflow">if</span>( 0 != sz_path [0])
<a name="l01525"></a>01525                sz_path  +=1; <span class="comment">// jump "/"</span>
<a name="l01526"></a>01526          }
<a name="l01527"></a>01527       }
<a name="l01528"></a>01528    }
<a name="l01529"></a>01529 
<a name="l01530"></a>01530    <span class="comment">// Reset list to start the search at the beginning</span>
<a name="l01531"></a>01531    <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#7ad0aa092d133a156651abe5d871b8eb">nav_filelist_reset</a>())
<a name="l01532"></a>01532       <span class="keywordflow">goto</span> nav_setcwd_fail;
<a name="l01533"></a>01533 
<a name="l01534"></a>01534    <span class="keywordflow">while</span>( 1 )
<a name="l01535"></a>01535    {
<a name="l01536"></a>01536       <span class="keywordflow">if</span>( (( Is_unicode) &amp;&amp; ( 0 == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0] ) )
<a name="l01537"></a>01537       ||  ((!Is_unicode) &amp;&amp; ( 0 == sz_path [0] ) ) )
<a name="l01538"></a>01538       {
<a name="l01539"></a>01539          <span class="keywordflow">return</span> TRUE;   <span class="comment">// path (without file) is find or create</span>
<a name="l01540"></a>01540       }
<a name="l01541"></a>01541       <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#017ce6b53af128e5064a06bc8fadec25">nav_filelist_findname</a>( sz_path  , b_match_case  ))
<a name="l01542"></a>01542       {
<a name="l01543"></a>01543          <span class="comment">// Fileor folder not found</span>
<a name="l01544"></a>01544          <span class="keywordflow">if</span>( !b_create )
<a name="l01545"></a>01545             <span class="keywordflow">goto</span> nav_setcwd_fail;   <span class="comment">// don't creat path then exit</span>
<a name="l01546"></a>01546          <span class="comment">// Set flag to create path</span>
<a name="l01547"></a>01547          b_create_name = TRUE;
<a name="l01548"></a>01548          sz_save_path = sz_path;
<a name="l01549"></a>01549       }
<a name="l01550"></a>01550       
<a name="l01551"></a>01551       <span class="keywordflow">while</span>( 1 )
<a name="l01552"></a>01552       {
<a name="l01553"></a>01553          sz_path  += (Is_unicode? 2 : 1 );
<a name="l01554"></a>01554          <span class="keywordflow">if</span>( (( Is_unicode) &amp;&amp; ( 0 == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0] ) )
<a name="l01555"></a>01555          ||  ((!Is_unicode) &amp;&amp; ( 0 == sz_path [0] ) ) )
<a name="l01556"></a>01556          {
<a name="l01557"></a>01557             <span class="comment">// Is it the last name of path and it is a file</span>
<a name="l01558"></a>01558             <span class="keywordflow">if</span>( b_create_name )
<a name="l01559"></a>01559             {
<a name="l01560"></a>01560                <span class="comment">// the file must be create</span>
<a name="l01561"></a>01561                <a class="code" href="a00026.html#27b550ee0cf2326498755b429818b145">nav_file_create</a>( sz_save_path );
<a name="l01562"></a>01562             }
<a name="l01563"></a>01563             <span class="keywordflow">break</span>;   <span class="comment">// file of path is found or created, then end of set_cwd</span>
<a name="l01564"></a>01564          }
<a name="l01565"></a>01565 
<a name="l01566"></a>01566          <span class="keywordflow">if</span>( (( Is_unicode) &amp;&amp; ((<span class="charliteral">'\\'</span> == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0] ) || (<span class="charliteral">'/'</span> == ((<a class="code" href="a00023.html#4b07eeef6c66c629ec6708f8eee35f58">FS_STR_UNICODE</a>)sz_path )[0] )) )
<a name="l01567"></a>01567          ||  ((!Is_unicode) &amp;&amp; ((<span class="charliteral">'\\'</span> == sz_path [0] ) || (<span class="charliteral">'/'</span> == sz_path [0] )) ) )
<a name="l01568"></a>01568          {
<a name="l01569"></a>01569             <span class="comment">// Is it a folder name</span>
<a name="l01570"></a>01570             <span class="keywordflow">if</span>( b_create_name )
<a name="l01571"></a>01571             {
<a name="l01572"></a>01572                <span class="comment">// The folder don't exist and it must be create</span>
<a name="l01573"></a>01573                <a class="code" href="a00026.html#3e6857f4edb9c88949bd56e2233da650">nav_dir_make</a>( sz_save_path );
<a name="l01574"></a>01574             }
<a name="l01575"></a>01575             <span class="keywordflow">if</span>( !<a class="code" href="a00017.html#e0caae1c6e4a737af4ad0aa5d4171e79">fat_entry_is_dir</a>() )
<a name="l01576"></a>01576                <span class="keywordflow">goto</span> nav_setcwd_fail;
<a name="l01577"></a>01577             <span class="comment">// jump '\'</span>
<a name="l01578"></a>01578             sz_path  += (Is_unicode? 2 : 1 );
<a name="l01579"></a>01579             <span class="keywordflow">if</span>( !<a class="code" href="a00026.html#dca006b356e65cb05459f7bd7917a1ed">nav_dir_cd</a>())
<a name="l01580"></a>01580                <span class="keywordflow">goto</span> nav_setcwd_fail;
<a name="l01581"></a>01581             <span class="keywordflow">break</span>;
<a name="l01582"></a>01582          }
<a name="l01583"></a>01583       }
<a name="l01584"></a>01584       
<a name="l01585"></a>01585    }
<a name="l01586"></a>01586       
<a name="l01587"></a>01587 nav_setcwd_fail:
<a name="l01588"></a>01588    <span class="comment">// Reinitialise the current position</span>
<a name="l01589"></a>01589    <a class="code" href="a00026.html#503f8d42be2b70cb554589ac7974ed78">nav_gotoindex</a>( &amp;index );
<a name="l01590"></a>01590    <span class="keywordflow">return</span> FALSE;
<a name="l01591"></a>01591 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="7489cf6b312750301cb7df5b915b436a"></a><!-- doxytag: member="navigation.c::nav_string_ascii" ref="7489cf6b312750301cb7df5b915b436a" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nav_string_ascii           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction select the ASCII mode for all routines with FS_STRING parameter. 
<p>
<div class="fragment"><pre class="fragment">
//! If you have enable the FS_ASCII AND FS_UNICODE define
//! then FS_STRING parameter can be a ASCII or UNICODE table.
//! Use this routines to select the type ASCII for string table.
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00091">91</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00365">g_b_unicode</a>.<div class="fragment"><pre class="fragment"><a name="l00092"></a>00092 {
<a name="l00093"></a>00093    <a class="code" href="a00018.html#fdc963fda511dd9e790c81b6a6b33d34">g_b_unicode</a> = FALSE;
<a name="l00094"></a>00094 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="69ee3def8525352e53819df1f975dd86"></a><!-- doxytag: member="navigation.c::nav_string_unicode" ref="69ee3def8525352e53819df1f975dd86" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nav_string_unicode           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This fonction select the UNICODE mode for all routines with FS_STRING parameter. 
<p>
<div class="fragment"><pre class="fragment">
//! If you have enable the FS_ASCII AND FS_UNICODE define
//! then FS_STRING parameter can be a ASCII or UNICODE table.
//! Use this routines to select the type UNICODE of string table.
//! </pre></div> 
<p>
Definition at line <a class="el" href="a00042.html#l00079">79</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
References <a class="el" href="a00034.html#l00365">g_b_unicode</a>.<div class="fragment"><pre class="fragment"><a name="l00080"></a>00080 {
<a name="l00081"></a>00081    <a class="code" href="a00018.html#fdc963fda511dd9e790c81b6a6b33d34">g_b_unicode</a> = TRUE;
<a name="l00082"></a>00082 }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="b84a05017e426fd46d9eb3698642f133"></a><!-- doxytag: member="navigation.c::fs_g_u8_nav_selected" ref="b84a05017e426fd46d9eb3698642f133" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ U8 <a class="el" href="a00026.html#b84a05017e426fd46d9eb3698642f133">fs_g_u8_nav_selected</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This one containt the current navigator selected. 
<p>

<p>
Definition at line <a class="el" href="a00042.html#l00063">63</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
Referenced by <a class="el" href="a00042.html#l00196">nav_copy_file_current()</a>, <a class="el" href="a00042.html#l00175">nav_get()</a>, <a class="el" href="a00042.html#l00108">nav_reset()</a>, and <a class="el" href="a00042.html#l00152">nav_select()</a>.
</div>
</div><p>
<a class="anchor" name="b4aa634e7d90eb225f80597a0e80125d"></a><!-- doxytag: member="navigation.c::g_id_trans_memtomem" ref="b4aa634e7d90eb225f80597a0e80125d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_MEM_TYPE_SLOW_ U8 <a class="el" href="a00026.html#b4aa634e7d90eb225f80597a0e80125d">g_id_trans_memtomem</a> = ID_STREAM_ERR          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This variable store the current ID transfer used by the internal copy-paste routines. 
<p>

<p>
Definition at line <a class="el" href="a00042.html#l00058">58</a> of file <a class="el" href="a00042.html">navigation.c</a>.
<p>
Referenced by <a class="el" href="a00042.html#l02065">nav_file_paste_start()</a>, and <a class="el" href="a00042.html#l02112">nav_file_paste_state()</a>.
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Thu Sep 20 12:17:15 2007 for AVR32 - FAT Services by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
